{"meta":{"version":1,"warehouse":"4.0.0"},"models":{"Asset":[{"_id":"themes/butterfly/source/css/index.styl","path":"css/index.styl","modified":0,"renderable":1},{"_id":"themes/butterfly/source/css/var.styl","path":"css/var.styl","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/404.jpg","path":"img/404.jpg","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/favicon.png","path":"img/favicon.png","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/friend_404.gif","path":"img/friend_404.gif","modified":0,"renderable":1},{"_id":"themes/butterfly/source/js/main.js","path":"js/main.js","modified":0,"renderable":1},{"_id":"themes/butterfly/source/js/tw_cn.js","path":"js/tw_cn.js","modified":0,"renderable":1},{"_id":"themes/butterfly/source/js/utils.js","path":"js/utils.js","modified":0,"renderable":1},{"_id":"themes/butterfly/source/js/search/algolia.js","path":"js/search/algolia.js","modified":0,"renderable":1},{"_id":"themes/butterfly/source/js/search/local-search.js","path":"js/search/local-search.js","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/cover_1.webp","path":"img/cover_1.webp","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/cover_10.webp","path":"img/cover_10.webp","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/cover_2.webp","path":"img/cover_2.webp","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/cover_3.webp","path":"img/cover_3.webp","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/cover_4.webp","path":"img/cover_4.webp","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/cover_5.webp","path":"img/cover_5.webp","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/cover_6.webp","path":"img/cover_6.webp","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/cover_7.webp","path":"img/cover_7.webp","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/cover_8.webp","path":"img/cover_8.webp","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/cover_9.webp","path":"img/cover_9.webp","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/favicon.png.backup","path":"img/favicon.png.backup","modified":0,"renderable":1}],"Cache":[{"_id":"source/_posts/vueReactive.md","hash":"94108ba8b818c2dcd696e93cc8aaea0c0a900ca6","modified":1649666243483},{"_id":"source/_posts/webpackOutFileAnalyes.md","hash":"96adc98b2a9430e5821a05f268aebcc5d7d03066","modified":1649665891666},{"_id":"source/_posts/wirteMyAsync.md","hash":"ec6d505154fc132db22a3672ec455e57804b7136","modified":1649665900562},{"_id":"source/_posts/vueReactive/1.png","hash":"ead737beee3a16a9d33409faa1483d5712cba7f9","modified":1635839876827},{"_id":"source/_posts/vueReactive/2.gif","hash":"34937ff35ddd8f54235732b951b4dc3aa0f7fd08","modified":1635839876839},{"_id":"source/_posts/wirteMyPromise.md","hash":"301df694b8eea8b3ef067236cea750c3fa26e8a3","modified":1649665948906},{"_id":"source/_posts/vueReactive/4.gif","hash":"6880e9ee9cc3e5daeaf532d3e53f57d697a922f0","modified":1635839877003},{"_id":"source/_posts/vueReactive/5.gif","hash":"46d1ed876a12c1601decaa251894306dd6a48a72","modified":1635839877103},{"_id":"source/_posts/vueReactive/3.gif","hash":"d55ca1654a9d731f7494c7c7693e85992324d885","modified":1635839876979},{"_id":"themes/stun/.commitlintrc.js","hash":"af8f006fbdfc6a1880605c7a35e63de300d6929b","modified":1635838108633},{"_id":"themes/stun/.cz-config.js","hash":"fbb89df58c60cf4f3827059d0574accc8407e1bb","modified":1635838108633},{"_id":"themes/stun/.editorconfig","hash":"1ca001b8a7ed235eb9f5c21360b3a11eedb84ae7","modified":1635838108633},{"_id":"themes/stun/.eslintrc","hash":"1ba4f0ddd4bef04884c7fda6ef04f9d9697a62b4","modified":1635838108633},{"_id":"themes/stun/.gitignore","hash":"7745f04d70b1ea58b02d68dde999708836343c7a","modified":1635838108633},{"_id":"themes/stun/.prettierrc","hash":"4b6589404c509f4538daf6f3b8b3ee2ec37d2f4c","modified":1635838108633},{"_id":"themes/stun/.stylintrc","hash":"3305c42a95c986341d7c7dd03ed9f37a42da343c","modified":1635838108633},{"_id":"themes/stun/CHANGELOG.md","hash":"77eadd10fafb46e194cd1a0ea9a986270ba994c9","modified":1635838108633},{"_id":"themes/stun/FAQ.md","hash":"df56d44b1297fe507d8b4edefb303629f4b23c67","modified":1635838108633},{"_id":"themes/stun/LICENSE","hash":"c79ab3fe0ee8f2388376574dfe704b3df0c70a69","modified":1635838108633},{"_id":"themes/stun/README.md","hash":"b77f5b18bfe474178fee322ff6065f960f33c96d","modified":1635838108633},{"_id":"themes/stun/README_en-US.md","hash":"5e7bff4bcd02badcd3207379d353c5d1ea403a4f","modified":1635838108637},{"_id":"themes/stun/_config.yml","hash":"ffdd9905a3501d67db3d236153e33bb0eff9c999","modified":1635839792332},{"_id":"themes/stun/package.json","hash":"020d40d2fc58d74bdb79d9e1036631679733d2aa","modified":1635838108641},{"_id":"themes/stun/.github/FUNDING.yml","hash":"963cf7fb304865af888ad4bbb87a0f5991f3790f","modified":1635838108633},{"_id":"themes/stun/languages/en.yml","hash":"e1348852aa00d2d57f5215c83709f6428f8e8a71","modified":1635838108637},{"_id":"themes/stun/languages/es.yml","hash":"e150c8a1f56ae9ed065611951aa124fb548577fc","modified":1635838108637},{"_id":"themes/stun/languages/zh-CN.yml","hash":"8535e2d34d24769067ba7bd3d9c0b94d1fd01cc7","modified":1635838108637},{"_id":"themes/stun/languages/zh-HK.yml","hash":"aef25f329cc05dbe8e38753fccd98d63c9fcd174","modified":1635838108637},{"_id":"themes/stun/layout/_layout.pug","hash":"5052ee5040ae736d78ad208df7352be69b61b0d1","modified":1635838108637},{"_id":"themes/stun/layout/archive.pug","hash":"d45d078ae4196add83e21fcaed3ef168b237af90","modified":1635838108637},{"_id":"themes/stun/layout/category.pug","hash":"24153408b2971542d177227f09e93da7754bf75e","modified":1635838108637},{"_id":"themes/stun/layout/index.pug","hash":"df40cf1f051fd29f0f51ace74e9f7394f6ea2ab7","modified":1635838108637},{"_id":"themes/stun/layout/page.pug","hash":"22ba5928bd9ae8c56b3242b7caa5fc3ec471b082","modified":1635838108637},{"_id":"themes/stun/layout/post.pug","hash":"a4d16dbb919df5d4ffdb5a1d0114a4e1c8c21197","modified":1635838108637},{"_id":"themes/stun/layout/tag.pug","hash":"46f956ad7e2aed879999ddf5e768d80c4bbe5b5f","modified":1635838108637},{"_id":"themes/stun/scripts/engine.js","hash":"a63a57c9206a77a79f93dbd86e86204447d7d904","modified":1635838108641},{"_id":"themes/stun/scripts/merge-config.js","hash":"bb914100129c5ca2d1a9e087fffd7bedcb6ae6a6","modified":1635838108641},{"_id":"themes/stun/.github/ISSUE_TEMPLATE/bug-report_en.md","hash":"70022617d944b410a21c28d2abafcfe0b2928f01","modified":1635838108633},{"_id":"themes/stun/.github/ISSUE_TEMPLATE/bug-report_zh.md","hash":"0b42693e9577d3203473caa11ceaa9f64096a67c","modified":1635838108633},{"_id":"themes/stun/.github/ISSUE_TEMPLATE/feature-request_en.md","hash":"af7175a0d0f7edfbfbeef3eeb949e20d1e41bf38","modified":1635838108633},{"_id":"themes/stun/.github/ISSUE_TEMPLATE/feature-request_zh.md","hash":"1ecd119a1f4c6fbe3886c885b7d13f1fcc048a5b","modified":1635838108633},{"_id":"themes/stun/.github/ISSUE_TEMPLATE/other_en.md","hash":"6b6afbfc66ee51624f7eeaeb5a1fc959e290e06d","modified":1635838108633},{"_id":"themes/stun/.github/ISSUE_TEMPLATE/other_zh.md","hash":"a9f7abd311731c21082fa5e553251f4704e555c5","modified":1635838108633},{"_id":"themes/stun/.github/workflows/codeql-analysis.yml","hash":"7a9d289addb10720f6b666157efe170d47774906","modified":1635838108633},{"_id":"themes/stun/.github/workflows/files-shaking.yml","hash":"3593429efe2f5b196a44d185e810b226cef26714","modified":1635838108633},{"_id":"themes/stun/layout/_mixins/gallery.pug","hash":"3054e2c09bc205173c517fb1c36321f7c4c0db63","modified":1635838108637},{"_id":"themes/stun/layout/_mixins/menu-item.pug","hash":"93c4454e48a6f1456c29aeb9d1332be186b49d4f","modified":1635838108637},{"_id":"themes/stun/layout/_mixins/meta-item.pug","hash":"3d74dc8ba8651efd4a605e56a21e314678d04057","modified":1635838108637},{"_id":"themes/stun/layout/_mixins/post-header.pug","hash":"9486d07e56acf7bcc5d691bef93c19e2e5c98022","modified":1635838108637},{"_id":"themes/stun/layout/_mixins/timeline.pug","hash":"4e19a670f002d3c6bc740a2d6ef03964e6b59c09","modified":1635838108637},{"_id":"themes/stun/layout/_partials/config.pug","hash":"4fb832652485161148ea957067c06d50ed11578b","modified":1635838108637},{"_id":"themes/stun/layout/_scripts/stun.pug","hash":"961554914427578b57ea3912d751d398f4eb381d","modified":1635838108637},{"_id":"themes/stun/layout/_scripts/vendors.pug","hash":"62a6831d3b1d90d6c8335ce3402efc50e141eafb","modified":1635838108637},{"_id":"themes/stun/layout/_third-party/pjax.pug","hash":"4a786459a8e6a4f378a9d834502f8b11aa66f185","modified":1635838108637},{"_id":"themes/stun/layout/_third-party/quicklink.pug","hash":"2bed65ed4d314dc587e2359e20ae099b46181ed5","modified":1635838108637},{"_id":"themes/stun/scripts/filters/external-link.js","hash":"f5369becfd8cc6e43d6dc3595b1edbe014d9aa7c","modified":1635838108641},{"_id":"themes/stun/scripts/filters/image-setting.js","hash":"412318b6d189d5355dbcc52c9762072f7ecdaad4","modified":1635838108641},{"_id":"themes/stun/scripts/filters/lazyload.js","hash":"d5baf39faeff5368182be1f59fb598d023985cde","modified":1635838108641},{"_id":"themes/stun/scripts/filters/post-heading.js","hash":"b504aa047e3f080fc3f95f3e96fad88bbbce20cb","modified":1635838108641},{"_id":"themes/stun/scripts/filters/shake-file.js","hash":"159dff6e4f7020545c9b151108398cd383d613e2","modified":1635838108641},{"_id":"themes/stun/scripts/filters/wrap-table.js","hash":"888c9eaaddcdb9b88d07837a9091aa39ed3fe677","modified":1635838108641},{"_id":"themes/stun/scripts/tags/friends.js","hash":"c2fe1e8e128f464d772bcb7534efef54ad224310","modified":1635838108641},{"_id":"themes/stun/scripts/tags/note.js","hash":"b436593a56e3bab8dd59c71e73ac9efbc8fa29d4","modified":1635838108641},{"_id":"themes/stun/scripts/tags/table.js","hash":"177061e1bfb296981a101643f51a27ccc1469307","modified":1635838108641},{"_id":"themes/stun/source/css/index.styl","hash":"8a75ec81fb064b0da2f978a064cc5bec2395f27d","modified":1635838108641},{"_id":"themes/stun/source/images/algolia.svg","hash":"90322f80db6ad0daf26ea3ec71dea6f691a8b2f1","modified":1635838108641},{"_id":"themes/stun/source/images/cc-by-nc-nd.svg","hash":"017ad912874686a982ebceae359299b8f2a492e2","modified":1635838108641},{"_id":"themes/stun/source/images/cc-by-nc-sa.svg","hash":"71d035c34219f924dbf1bf852166ee8fb58d2f24","modified":1635838108641},{"_id":"themes/stun/source/images/cc-by-nc.svg","hash":"4608189edbe7636dd651df65473298a3c5afb20d","modified":1635838108641},{"_id":"themes/stun/source/images/cc-by-nd.svg","hash":"20c66ae3c393903e6eab3bc8cf7c3be6d753f9f8","modified":1635838108641},{"_id":"themes/stun/source/images/cc-by-sa.svg","hash":"0455a8857ba096925d4145a56e8d10537fccb378","modified":1635838108641},{"_id":"themes/stun/source/images/cc-by.svg","hash":"77f74c241902447424207869c74cb9d9264bdced","modified":1635838108641},{"_id":"themes/stun/source/images/loading.svg","hash":"32a6e770d217ae6c0cf0f6beef3172f1b5b9a0a2","modified":1635838108641},{"_id":"themes/stun/source/js/header.js","hash":"63d407ee6f80114e220171ba829b79b28d420fe0","modified":1635838108641},{"_id":"themes/stun/source/js/scroll.js","hash":"8926ab87181a49c730ce5132518b608c54b8cdb1","modified":1635838108641},{"_id":"themes/stun/source/js/sidebar.js","hash":"20adff7f54bcd8299d32690d41ebc7a4eb7a8728","modified":1635838108641},{"_id":"themes/stun/source/js/stun-boot.js","hash":"8358ac0d879c0ca340c52e4de606523c2a91e156","modified":1635838108641},{"_id":"themes/stun/source/js/utils.js","hash":"b570eafe77e47d7701348f172a4dbaaba6fa8123","modified":1635838108641},{"_id":"themes/stun/layout/_partials/analytics/busuanzi.pug","hash":"80d2f4f8706a96b367ac1e89f5b56ada4684d571","modified":1635838108637},{"_id":"themes/stun/layout/_partials/footer/footer.pug","hash":"9a8e56bcc504f251c13ee3d0d18a08142fb7ee43","modified":1635838108637},{"_id":"themes/stun/layout/_partials/head/head.pug","hash":"c7909a6a50c7a76a6c1810b700a5d72bcb1e20c9","modified":1635838108637},{"_id":"themes/stun/layout/_partials/head/kill-old-ie.pug","hash":"427a95d02844f29e63c5e9f014ede3609aec1a5b","modified":1635838108637},{"_id":"themes/stun/layout/_partials/header/header.pug","hash":"7ecbe18da15d3a52c56f69c542540291b6178763","modified":1635838108637},{"_id":"themes/stun/layout/_partials/post/post-list.pug","hash":"c049078009aa251fc76cd948837c7a5efdd39cb2","modified":1635838108637},{"_id":"themes/stun/layout/_partials/search/algolia.pug","hash":"61181bece0e27929fe00df5204fefd8dee31a354","modified":1635838108637},{"_id":"themes/stun/layout/_partials/search/assist-btns.pug","hash":"7e6dc0d975ccbe291116487b15277d27a391fb9a","modified":1635838108637},{"_id":"themes/stun/layout/_partials/search/index.pug","hash":"0f84aa013a96e7eb3bb25b87f20bab9b7ac55538","modified":1635838108637},{"_id":"themes/stun/layout/_partials/search/localsearch.pug","hash":"4d8e0bc33f92a603e0b2a5f4296af6bcc7cc31b8","modified":1635838108637},{"_id":"themes/stun/layout/_partials/sidebar/sidebar.pug","hash":"18173a2acf99db39748c392f2e669acd805b4090","modified":1635838108637},{"_id":"themes/stun/layout/_partials/widgets/back2top.pug","hash":"48b7fedeb472bd01fd1f3317359a10e83ca919e1","modified":1635838108637},{"_id":"themes/stun/layout/_partials/widgets/comments.pug","hash":"af1b16be74c7e1242e0f57986672dc73e93546e2","modified":1635838108637},{"_id":"themes/stun/layout/_partials/widgets/copyright.pug","hash":"0938c885697f6eb388b28ddbf88f5631d024fe73","modified":1635838108637},{"_id":"themes/stun/layout/_partials/widgets/loading-bar.pug","hash":"6cda7866f9589c9ffc05ce4a3d7c33b706e70324","modified":1635838108637},{"_id":"themes/stun/layout/_partials/widgets/night-mode.pug","hash":"c7f9bd67cd231b9bd40a84123644e009ac8d8ef3","modified":1635838108637},{"_id":"themes/stun/layout/_partials/widgets/paginator.pug","hash":"b0045dcb9b151ee31f1db5b7d741f10ef3b74be0","modified":1635838108637},{"_id":"themes/stun/layout/_partials/widgets/reward.pug","hash":"c9081c1dcf0ca18df06d23638654d8f43b28d55c","modified":1635838108637},{"_id":"themes/stun/layout/_partials/widgets/share.pug","hash":"1bb3d25298b7ee6a28150aa286ed6b0ae42ead4f","modified":1635838108637},{"_id":"themes/stun/layout/_partials/widgets/sticky-top.pug","hash":"bf86b2f9f4b1471afb8b31965d3230f6088682ae","modified":1635838108637},{"_id":"themes/stun/layout/_third-party/advertising/google-adsense.pug","hash":"e489020f1130976d3ec2245915ede6319d89b89c","modified":1635838108637},{"_id":"themes/stun/layout/_third-party/advertising/index.pug","hash":"1285cd65a873f688ae3c51846c1284447f502adc","modified":1635838108637},{"_id":"themes/stun/layout/_third-party/analytics/baidu-analytics.pug","hash":"f7300991a29dbe2e8091a588dfa8c65c3dee6302","modified":1635838108637},{"_id":"themes/stun/layout/_third-party/analytics/busuanzi.pug","hash":"78a4fc9c9380e31536f5b500638f2d005accd361","modified":1635838108637},{"_id":"themes/stun/layout/_third-party/analytics/google-analytics.pug","hash":"4eef66fbb8a8ad55e0868cf4b77a6b7bca0e7f35","modified":1635838108637},{"_id":"themes/stun/layout/_third-party/analytics/index.pug","hash":"0d72f844bf9532b3be644c27b0af7cb4331fc46c","modified":1635838108637},{"_id":"themes/stun/layout/_third-party/analytics/tencent-analytics.pug","hash":"f88fb0f085812db6023c30308ba3458da7742993","modified":1635838108637},{"_id":"themes/stun/layout/_third-party/comments/disqus.pug","hash":"57bcbaac3d237d9168dd8f4b682f34351f11d250","modified":1635838108637},{"_id":"themes/stun/layout/_third-party/comments/fbcomments.pug","hash":"fb651812c87dc5e2134d7fb7d8f98d4d4227f1f6","modified":1635838108637},{"_id":"themes/stun/layout/_third-party/comments/gitalk.pug","hash":"c2a90e80c51b5b99e6804dbed5457a071b980bbd","modified":1635838108637},{"_id":"themes/stun/layout/_third-party/comments/index.pug","hash":"bec4d9c8ea360637e7da3314fa987e33facd8071","modified":1635838108637},{"_id":"themes/stun/layout/_third-party/comments/livere.pug","hash":"687f74a998519608944b40a41f3a98ccf4535139","modified":1635838108637},{"_id":"themes/stun/layout/_third-party/comments/minivaline.pug","hash":"5584ade7dd19deca418373115bde9d563d37d826","modified":1635838108637},{"_id":"themes/stun/layout/_third-party/comments/utterances.pug","hash":"6418baeb3aedcddb02a64bd89b26ac12e18551c8","modified":1635838108637},{"_id":"themes/stun/layout/_third-party/comments/valine.pug","hash":"b519a6948d6ef37c037385e3e3f9590c17f7ad62","modified":1635838108637},{"_id":"themes/stun/layout/_third-party/comments/waline.pug","hash":"fd4c958b13777752f176556c7b109b7dede7cc68","modified":1635838108637},{"_id":"themes/stun/layout/_third-party/math/index.pug","hash":"e952be6c736545e73c0e02f833f87a4f8c5a2582","modified":1635838108637},{"_id":"themes/stun/layout/_third-party/math/katex.pug","hash":"345c59fe76a7c83b529328e5144d1036cb14f533","modified":1635838108637},{"_id":"themes/stun/layout/_third-party/math/mathjax.pug","hash":"72d51538cc85f01c8c64db74b9219ccaf334c9e9","modified":1635838108637},{"_id":"themes/stun/layout/_third-party/search/algolia.pug","hash":"54233748e22ceae063f70ee49b44c4bd0a78f391","modified":1635838108637},{"_id":"themes/stun/layout/_third-party/search/index.pug","hash":"0f84aa013a96e7eb3bb25b87f20bab9b7ac55538","modified":1635838108637},{"_id":"themes/stun/layout/_third-party/search/localsearch.pug","hash":"d98db7ed7e3e4c574212fa9d75adba681f3d0687","modified":1635838108637},{"_id":"themes/stun/source/css/_common/index.styl","hash":"86057db6cb18263866d62a6669feee8752882398","modified":1635838108641},{"_id":"themes/stun/source/css/_common/responsive.styl","hash":"618c6005f1bc7c482fa37ae3ce15729a64044d9d","modified":1635838108641},{"_id":"themes/stun/source/css/_custom/index.styl","hash":"0d1adc70250941074c742f94f7801b3b43a7f1db","modified":1635838108641},{"_id":"themes/stun/source/css/_mixins/index.styl","hash":"f3060519f3acd05cb4b26bb5f6a5c6b857cb0d68","modified":1635838108641},{"_id":"themes/stun/source/css/_variables/index.styl","hash":"c81aac4285eb058026b255e31282d35f55a820ab","modified":1635838108641},{"_id":"themes/stun/source/images/icons/favicon-16x16.png","hash":"7bfd64eac26e17ea162f0c399a4a40164c26b412","modified":1635838108641},{"_id":"themes/stun/source/images/icons/favicon-32x32.png","hash":"02fead07726920400ede57ddfdbf071dd7203fd5","modified":1635838108641},{"_id":"themes/stun/source/images/icons/stun-logo.svg","hash":"069dc7590ad152373f1c346d892e32faa2bbdd87","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/index.styl","hash":"a54720db94121efd1a34ac88d344197c8206837e","modified":1635838108641},{"_id":"themes/stun/source/css/_common/outline/index.styl","hash":"467d4171c0690a95d40fbecea02e6b212b7c74f1","modified":1635838108641},{"_id":"themes/stun/source/css/_common/outline/macro.styl","hash":"13b96f239de15e1cfdc14d9c80e6959506556dd2","modified":1635838108641},{"_id":"themes/stun/source/css/_common/scaffolding/base.styl","hash":"4064a7e2c3f71d2ed72a47edd60e9be01af6c354","modified":1635838108641},{"_id":"themes/stun/source/css/_common/scaffolding/index.styl","hash":"e750f2dae9eb3385039ee018ff8001b0e6ec3b64","modified":1635838108641},{"_id":"themes/stun/source/css/_common/scaffolding/normalize.styl","hash":"c15a9616fddb267431416304d709185aeb3d45f5","modified":1635838108641},{"_id":"themes/stun/source/css/_common/scaffolding/utils.styl","hash":"7e62f34521ea539a25a101f25e1684e3a3ac4be8","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/analytics/busuanzi.styl","hash":"d196c88ea2e9b851e8d8f9c5a315dfc2929eb897","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/analytics/index.styl","hash":"339a43fd5ee97a77775b723118f6ab1af754fed4","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/footer/index.styl","hash":"14464841145cf3ecab66f1094653daa033c261eb","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/header/index.styl","hash":"904af0e73cdf0767ec781271856d7b5b63e043ef","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/highlight/diff.styl","hash":"056e70f6dfe45ec50427d7ab293d33361c9b956f","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/highlight/highlight.styl","hash":"bc0b01021a0d19b2c98f0c5c9fa1af96d67c1099","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/highlight/index.styl","hash":"85848179cbc78152d2521b601ac9f888dea4e255","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/highlight/theme.styl","hash":"dfc99b05302f8203040431e563c9f63d63da46de","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/pages/index.styl","hash":"463a4e6a92ec5f757e167fbeb171e4e92e83a822","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/pages/page.styl","hash":"df732e267dfd9f1bda6a8cf1ede3198a205925f9","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/pages/timeline.styl","hash":"21e9c8def1613030f0927e2ce80f4ecc721f078e","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/plugins/friends.styl","hash":"bdb015173f8e5fa391fc4fb2b2a8d42787022c4b","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/plugins/index.styl","hash":"c35d0cf421c6669ee0458c2f0264dca05769c01d","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/plugins/note.styl","hash":"ae0ad9b44a87839d220792336478a9ae6db11c47","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/plugins/table.styl","hash":"98cacc91e42f5e45279e2174a90ab26171085e2f","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/post/index.styl","hash":"08aad11e329cda0550efef226e0c4d0bb4540454","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/post/post-list.styl","hash":"d0ed844e28533f832cbd9b3f09203d16936628f7","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/post/post.styl","hash":"8b7b22225b40d028efee689d3700a9796291cb8d","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/search/algolia.styl","hash":"fb62e4baf25a66e46c27783be5d79353ec394b44","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/search/common.styl","hash":"1939b7dfbcf557794a188fbf8fec4ef2b5afa437","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/search/index.styl","hash":"1990d2c2a9bfe8e09d656f0c2ae6cf0c9f7f5542","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/search/localsearch.styl","hash":"bf1ac1b8ee8c4daaa7e6b47eec097a176624e6d0","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/sidebar/index.styl","hash":"02138647437f7e8ee8927cae225d41072d936bdc","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/widgets/back2top.styl","hash":"b3da5ea71a9947e781056d1bd7d42e4045fa2aca","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/widgets/comments.styl","hash":"41d229ac4fa02a3a8b46687ccbafa7a608008e2f","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/widgets/copy-button.styl","hash":"378961fa7c986e3313053814806902bf76204a93","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/widgets/copyright.styl","hash":"1d28fc8f76f7164a306ed81a9ede21c0a2b0f7cd","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/widgets/ending.styl","hash":"63985ca9a3f6c481cc60207966fa1267de14d945","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/widgets/fancybox.styl","hash":"3d677c0323d77199bb9fbfefd65e97d8b882d7b3","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/widgets/font-icon.styl","hash":"bdda0953611378e93a8d6387cbdc93e1de4f7f0a","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/widgets/gallery-image.styl","hash":"99b1cc42f38816083f93233778b299422b6d8f32","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/widgets/index.styl","hash":"03ffdc55fd5fb64c3158bc222d0e8e9d7844686b","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/widgets/lazyload.styl","hash":"eced96235f0ff5dc6a8fd068d4ed05934a29b430","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/widgets/loading-bar.styl","hash":"9f23e8762d01fb4a3cbf5e786fdead2926849e8a","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/widgets/night-mode.styl","hash":"9caeef13a913aba38976f082e1f0ca191bffc64e","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/widgets/paginator.styl","hash":"71ddb6a1e9664a4fde04a0ce143b8786ba6e0089","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/widgets/reward.styl","hash":"de1130ec3765879884cbdc77a15b458da6e37bcc","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/widgets/share.styl","hash":"fe32e3434107d92cefd7aacfdcef526a93c4b865","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/widgets/sticky-top.styl","hash":"f0e37944168a74a64b18dc54c6fde2308e4bf023","modified":1635838108641},{"_id":"themes/stun/source/css/_common/components/widgets/zoom-image.styl","hash":"40f832a199320642debabe32910c1168e3c6e40c","modified":1635838108641},{"_id":"themes/stun/package-lock.json","hash":"623a3d645e58db11a77bf118b8cbee96c8a527df","modified":1635838108641},{"_id":"public/archives/index.html","hash":"9a0c0ff52e4b773582d131dc8f6252d7a94deed8","modified":1649751848570},{"_id":"public/archives/2021/index.html","hash":"a2c71544d934cc6b01dd65f99759d2f64fab463a","modified":1649751848570},{"_id":"public/archives/2021/05/index.html","hash":"941768f5cad83d54520462f82fb2131b83d4a0eb","modified":1649751848570},{"_id":"public/archives/2021/06/index.html","hash":"db81750f43a6d86204630de9a0853732ebbf50a5","modified":1649751848570},{"_id":"public/categories/javascript/index.html","hash":"ddbf3d87a31b5271199dd9bf63e891bd9cd07109","modified":1649751848570},{"_id":"public/index.html","hash":"e9a874145e4b19424d20824db639b76ee4e8035c","modified":1649751848570},{"_id":"public/tags/Vue/index.html","hash":"16bb3d947a0b9c9b3e48fa510eef33fb624bfa21","modified":1649751848570},{"_id":"public/tags/webpack/index.html","hash":"67b1ea30ef1e2efdd386b0ea2bb7a3f7a604dd4f","modified":1649751848570},{"_id":"public/tags/javascript/index.html","hash":"6a7093d1ac90869802ead2393763145c68a10914","modified":1649751848570},{"_id":"public/tags/async/index.html","hash":"7a95b751e350956b7cdb0d09e58836d9a733b96b","modified":1649751848570},{"_id":"public/tags/promise/index.html","hash":"e585f9c4f3951adc847e19e9642265f19acf2dbc","modified":1649751848570},{"_id":"public/2021/06/04/vueReactive/index.html","hash":"3a4bcf3886fea70702a0fabd1358d04aa9a47419","modified":1649751848570},{"_id":"public/2021/05/31/wirteMyAsync/index.html","hash":"17453abe170d65e7833c1e36f4bc977fdd4fc618","modified":1649751848570},{"_id":"public/2021/05/25/webpackOutFileAnalyes/index.html","hash":"2e88538d5011295d806654336f41ade74fcb72fa","modified":1649751848570},{"_id":"public/2021/05/19/wirteMyPromise/index.html","hash":"127999e6bb4da1662564a82dcb49a40899fdedbe","modified":1649751848570},{"_id":"public/images/algolia.svg","hash":"90322f80db6ad0daf26ea3ec71dea6f691a8b2f1","modified":1635840803299},{"_id":"public/images/cc-by-nc-nd.svg","hash":"017ad912874686a982ebceae359299b8f2a492e2","modified":1635840803299},{"_id":"public/images/cc-by-nc-sa.svg","hash":"71d035c34219f924dbf1bf852166ee8fb58d2f24","modified":1635840803299},{"_id":"public/images/cc-by-nc.svg","hash":"4608189edbe7636dd651df65473298a3c5afb20d","modified":1635840803299},{"_id":"public/images/cc-by-nd.svg","hash":"20c66ae3c393903e6eab3bc8cf7c3be6d753f9f8","modified":1635840803299},{"_id":"public/images/cc-by-sa.svg","hash":"0455a8857ba096925d4145a56e8d10537fccb378","modified":1635840803299},{"_id":"public/images/cc-by.svg","hash":"77f74c241902447424207869c74cb9d9264bdced","modified":1635840803299},{"_id":"public/images/loading.svg","hash":"32a6e770d217ae6c0cf0f6beef3172f1b5b9a0a2","modified":1635840803299},{"_id":"public/images/icons/favicon-16x16.png","hash":"7bfd64eac26e17ea162f0c399a4a40164c26b412","modified":1635840803299},{"_id":"public/images/icons/favicon-32x32.png","hash":"02fead07726920400ede57ddfdbf071dd7203fd5","modified":1635840803299},{"_id":"public/images/icons/stun-logo.svg","hash":"069dc7590ad152373f1c346d892e32faa2bbdd87","modified":1635840803299},{"_id":"public/2021/06/04/vueReactive/1.png","hash":"ead737beee3a16a9d33409faa1483d5712cba7f9","modified":1649749327879},{"_id":"public/2021/06/04/vueReactive/2.gif","hash":"34937ff35ddd8f54235732b951b4dc3aa0f7fd08","modified":1649749327879},{"_id":"public/2021/06/04/vueReactive/4.gif","hash":"6880e9ee9cc3e5daeaf532d3e53f57d697a922f0","modified":1649749327879},{"_id":"public/js/header.js","hash":"63d407ee6f80114e220171ba829b79b28d420fe0","modified":1635840803299},{"_id":"public/js/scroll.js","hash":"8926ab87181a49c730ce5132518b608c54b8cdb1","modified":1635840803299},{"_id":"public/js/sidebar.js","hash":"20adff7f54bcd8299d32690d41ebc7a4eb7a8728","modified":1635840803299},{"_id":"public/js/stun-boot.js","hash":"8358ac0d879c0ca340c52e4de606523c2a91e156","modified":1635840803299},{"_id":"public/css/index.css","hash":"d19ed1c5b2d2295d1ba4a3c030a7659709ba27c2","modified":1649749327879},{"_id":"public/js/utils.js","hash":"0b95daada72abb5d64a1e3236049a60120e47cca","modified":1649749327879},{"_id":"public/2021/06/04/vueReactive/5.gif","hash":"46d1ed876a12c1601decaa251894306dd6a48a72","modified":1649749327879},{"_id":"public/2021/06/04/vueReactive/3.gif","hash":"d55ca1654a9d731f7494c7c7693e85992324d885","modified":1649749327879},{"_id":"source/_posts/vue2SourceDebug.md","hash":"07c7b772bbeac1af48240855100cdcb34e194f89","modified":1649665910830},{"_id":"public/archives/2021/11/index.html","hash":"5de5a4fcc87d8a0ac4e4804ab02a32e2b13519ff","modified":1649751848570},{"_id":"public/categories/JavaScript/index.html","hash":"2f24bc6b5c07af5ac5de461e19c3b9e322e0d999","modified":1649665210344},{"_id":"public/2021/11/15/vue2SourceDebug/index.html","hash":"40b1423e4f4296420792604b0e6101d6d1e03038","modified":1649751848570},{"_id":"source/_posts/RustStudyBasic.md","hash":"04805d3d51eaa81f66722149e5622f2d1bcf7914","modified":1649665670740},{"_id":"public/2022/02/21/RustStudyBasic/index.html","hash":"c10b3ad8ef04f4ab6e3599120771159f460dccfb","modified":1649666994674},{"_id":"public/archives/2022/index.html","hash":"31a5cd51d2ad1672de4dd9592ad8df2a292f96e6","modified":1649751848570},{"_id":"public/archives/2022/02/index.html","hash":"8f267d701d536429d7a2e3ab85158e5995510437","modified":1649751848570},{"_id":"public/categories/Rust/index.html","hash":"f848fd97d0a84fc8f3b87f769d7f5aa2bfdd7f51","modified":1649751848570},{"_id":"public/tags/Rust/index.html","hash":"577eddc7c1eb59c23b084dcb4b5f094dbd44c50f","modified":1649751848570},{"_id":"public/tags/basic/index.html","hash":"6929ebc91c5c48893008d68da743d033afa5f494","modified":1649751848570},{"_id":"source/_posts/ReactSourceDebug.md","hash":"1fc804f930cb9b99c7f71406d9cd867b19195faa","modified":1649665458855},{"_id":"source/_posts/ReactSourceDebug/1.png","hash":"8136f1e10f8c9a44f0a39ebce4b2ee95f6e624a6","modified":1647849239278},{"_id":"source/_posts/ReactSourceDebug/2.png","hash":"9e394d1e8c0ba9355080161fdd8477a6d6968871","modified":1647849239434},{"_id":"source/_posts/ReactSourceDebug/3.png","hash":"017784677857c4f5b5976b1a36bc7ae08304d04e","modified":1647849239642},{"_id":"source/_posts/ReactSourceDebug/4.png","hash":"a5590f8f0ad9be5d80d004c78133bc000972d257","modified":1647849239770},{"_id":"source/_posts/ReactSourceDebug/5.png","hash":"e546d911db100bdb02f9b4a588968ead8772c748","modified":1647849239938},{"_id":"source/_posts/ReactSourceDebug/6.png","hash":"20278c87a9af1cd50da9c3aaff68f7df5cfacc57","modified":1647849240118},{"_id":"public/archives/2022/03/index.html","hash":"091654ae680466e9301916ff56b8a68be7b95532","modified":1649751848570},{"_id":"public/categories/React/index.html","hash":"7ccd7f9fbafefd3ba35f2e3b8de943199916f067","modified":1649751848570},{"_id":"public/tags/React/index.html","hash":"f3182c7e99232bb4e3b93c95a19c031f096a87c2","modified":1649751848570},{"_id":"public/tags/Javascript/index.html","hash":"f8476d84f43b2aeab5ce6ca2a671946931317039","modified":1649751848570},{"_id":"public/tags/source/index.html","hash":"07287742a117782d180cab918a556e5f6c8111a0","modified":1649751848570},{"_id":"public/2022/03/20/ReactSourceDebug/index.html","hash":"820f2f5c42b78461b1c6892cb6ea5d3c23ea2310","modified":1649666994674},{"_id":"public/2022/03/20/ReactSourceDebug/1.png","hash":"8136f1e10f8c9a44f0a39ebce4b2ee95f6e624a6","modified":1647849513492},{"_id":"public/2022/03/20/ReactSourceDebug/3.png","hash":"017784677857c4f5b5976b1a36bc7ae08304d04e","modified":1647849513492},{"_id":"public/2022/03/20/ReactSourceDebug/2.png","hash":"9e394d1e8c0ba9355080161fdd8477a6d6968871","modified":1647849513492},{"_id":"public/2022/03/20/ReactSourceDebug/4.png","hash":"a5590f8f0ad9be5d80d004c78133bc000972d257","modified":1647849513492},{"_id":"public/2022/03/20/ReactSourceDebug/5.png","hash":"e546d911db100bdb02f9b4a588968ead8772c748","modified":1647849513492},{"_id":"public/2022/03/20/ReactSourceDebug/6.png","hash":"20278c87a9af1cd50da9c3aaff68f7df5cfacc57","modified":1647849513492},{"_id":"source/_posts/ReactSourceHookDebug.md","hash":"b724d8ad9c19f49055a604a35eb0933107e5ada1","modified":1649665413935},{"_id":"source/_posts/ReactSourceHookDebug/11.png","hash":"f95ac10dbe9fe712039ed49222ac508db9e17b61","modified":1648378698620},{"_id":"source/_posts/ReactSourceHookDebug/22.png","hash":"249845b6265d4994528ff86d3d3cf10f03de0800","modified":1648378698656},{"_id":"source/_posts/ReactSourceHookDebug/33.png","hash":"2015f303a739e35ef8beeb4ffc973e43295667bf","modified":1648378698820},{"_id":"source/_posts/ReactSourceHookDebug/44.png","hash":"62aafa81a31edb226297cbf2959682ba8abac391","modified":1648378698824},{"_id":"source/_posts/wirteMyAsync/1.gif","hash":"3609cf259d1dba8fd3f3c45036e1021d1e1b3838","modified":1648379168776},{"_id":"source/_posts/wirteMyAsync/2.gif","hash":"72f2656b454284f2fc1ca6042facc7075cff43e1","modified":1648379168824},{"_id":"public/2022/03/27/ReactSourceHookDebug/index.html","hash":"351ea545370a10d91323f5c6f11407e531bd951a","modified":1649751848570},{"_id":"public/2022/03/27/ReactSourceHookDebug/33.png","hash":"2015f303a739e35ef8beeb4ffc973e43295667bf","modified":1649749327879},{"_id":"public/2022/03/27/ReactSourceHookDebug/22.png","hash":"249845b6265d4994528ff86d3d3cf10f03de0800","modified":1649749327879},{"_id":"public/2022/03/27/ReactSourceHookDebug/11.png","hash":"f95ac10dbe9fe712039ed49222ac508db9e17b61","modified":1649749327879},{"_id":"public/2022/03/27/ReactSourceHookDebug/44.png","hash":"62aafa81a31edb226297cbf2959682ba8abac391","modified":1649749327879},{"_id":"public/2021/05/31/wirteMyAsync/2.gif","hash":"72f2656b454284f2fc1ca6042facc7075cff43e1","modified":1649749327879},{"_id":"public/2021/05/31/wirteMyAsync/1.gif","hash":"3609cf259d1dba8fd3f3c45036e1021d1e1b3838","modified":1649749327879},{"_id":"source/_posts/ReactSourceDiffDebug.md","hash":"f2d2466be61fbddd046d445bbc832c4537bc525a","modified":1649665207317},{"_id":"public/archives/2022/04/index.html","hash":"6e7cab0e03de1654e309964fce6d712d8c939978","modified":1649751848570},{"_id":"public/tags/Diff/index.html","hash":"09f5930844443c2243262d462d17c3732794da46","modified":1649751848570},{"_id":"public/2022/04/05/ReactSourceDiffDebug/index.html","hash":"1484605b0e89532932bb26d91a71cfda68d269e9","modified":1649666994674},{"_id":"themes/butterfly/LICENSE","hash":"1128f8f91104ba9ef98d37eea6523a888dcfa5de","modified":1649231804993},{"_id":"themes/butterfly/README.md","hash":"6ee27baf95a5741abbc224ef8938d679b6597665","modified":1649231804993},{"_id":"themes/butterfly/README_CN.md","hash":"49ace5208f98783344f17a00adab7641cda43280","modified":1649231804993},{"_id":"themes/butterfly/_config.yml","hash":"8239544985a87481bf4c6c4775e8a3b4745d0bcb","modified":1649231804993},{"_id":"themes/butterfly/package.json","hash":"80ebdf46caa7266fc43cd51c96c97731adbc5694","modified":1649231804993},{"_id":"themes/butterfly/.github/stale.yml","hash":"05a55a87fa7f122c59683e41c8b2e37e79f688f0","modified":1649231804993},{"_id":"themes/butterfly/languages/default.yml","hash":"7fd2950554e99a6f15232267621f36f026a85380","modified":1649231804993},{"_id":"themes/butterfly/languages/en.yml","hash":"4b2c351f2b5fd4f8497e806085364928e1af0b5b","modified":1649231804993},{"_id":"themes/butterfly/languages/zh-CN.yml","hash":"6c35255c196ea8e9817b85b6d7729d00cf18f231","modified":1649231804993},{"_id":"themes/butterfly/languages/zh-TW.yml","hash":"ef035065ebb37fce3e56e51f8b56deb596db78b2","modified":1649231804993},{"_id":"themes/butterfly/layout/archive.pug","hash":"bd62286afb64a51c97e800c5945620d51605d5fa","modified":1649231804993},{"_id":"themes/butterfly/layout/category.pug","hash":"710708cfdb436bc875602abf096c919ccdf544db","modified":1649231804993},{"_id":"themes/butterfly/layout/index.pug","hash":"e1c3146834c16e6077406180858add0a8183875a","modified":1649231804993},{"_id":"themes/butterfly/layout/page.pug","hash":"baf469784aef227e4cc840550888554588e87a13","modified":1649231804993},{"_id":"themes/butterfly/layout/post.pug","hash":"fc9f45252d78fcd15e4a82bfd144401cba5b169a","modified":1649231804993},{"_id":"themes/butterfly/layout/tag.pug","hash":"0440f42569df2676273c026a92384fa7729bc4e9","modified":1649231804993},{"_id":"themes/butterfly/.github/ISSUE_TEMPLATE/bug_report.md","hash":"476802922b774b679225102ac30a9d9183394701","modified":1649231804993},{"_id":"themes/butterfly/.github/ISSUE_TEMPLATE/custom.md","hash":"eff495eb1584cf4586e33c76e8b2fa6a469a179b","modified":1649231804993},{"_id":"themes/butterfly/.github/ISSUE_TEMPLATE/feature_request.md","hash":"f6867a2f0417fe89a0f2008730ee19dd38422021","modified":1649231804993},{"_id":"themes/butterfly/.github/workflows/publish.yml","hash":"05857c2f265246d8de00e31037f2720709540c09","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/404.pug","hash":"cb49f737aca272ccfeb62880bd651eccee72a129","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/additional-js.pug","hash":"ab3bdeb6e0acd3d58091698c1335afb069eea7e5","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/footer.pug","hash":"02390a5b6ae1f57497b22ba2e6be9f13cfb7acac","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/head.pug","hash":"847a5cbc13db1a435a4f762a7c0007d9bcbb79a2","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/layout.pug","hash":"6f2608c4d93d3d10ae6b2cd7f8918f303f024321","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/pagination.pug","hash":"0b80f04950bd0fe5e6c4e7b7559adf4d0ce28436","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/rightside.pug","hash":"699d0d2cff233628752956c4434125c8203f7d63","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/sidebar.pug","hash":"f093ab771257a6a939b194f68607a2038c8d7da3","modified":1649231804993},{"_id":"themes/butterfly/scripts/events/404.js","hash":"83cd7f73225ccad123afbd526ce1834eb1eb6a6d","modified":1649231804993},{"_id":"themes/butterfly/scripts/events/config.js","hash":"a72c2020c87c4998aa124a16e9f8560875b9f86d","modified":1649231804993},{"_id":"themes/butterfly/scripts/events/init.js","hash":"a7f567b3d3110afe2f99c967b8e15351a7f5bd6d","modified":1649231804993},{"_id":"themes/butterfly/scripts/events/stylus.js","hash":"9819f0996234fbd80d6c50a9e526c56ebf22588d","modified":1649231804993},{"_id":"themes/butterfly/scripts/events/welcome.js","hash":"3cfc46c749e2fd7ae9c2a17206238ed0e0e17e7d","modified":1649231804993},{"_id":"themes/butterfly/scripts/filters/post_lazyload.js","hash":"932df912976261929f809b7dbd4eb473e7787345","modified":1649231804993},{"_id":"themes/butterfly/scripts/filters/random_cover.js","hash":"21379ed2dccb69c43b893895c9d56238c11e5f43","modified":1649231804993},{"_id":"themes/butterfly/scripts/helpers/aside_archives.js","hash":"2ec66513d5322f185d2071acc052978ba9415a8e","modified":1649231804993},{"_id":"themes/butterfly/scripts/helpers/aside_categories.js","hash":"e00efdb5d02bc5c6eb4159e498af69fa61a7dbb9","modified":1649231804993},{"_id":"themes/butterfly/scripts/helpers/inject_head_js.js","hash":"6a103a2472903289bdecd5240eb89cac0b9e13d9","modified":1649231804993},{"_id":"themes/butterfly/scripts/helpers/page.js","hash":"c6611d97087c51845cb1ab4821696a62fa33daeb","modified":1649231804993},{"_id":"themes/butterfly/scripts/helpers/related_post.js","hash":"21556f9cb412ddc500ad12ecfd419f3ea6c9f663","modified":1649231804993},{"_id":"themes/butterfly/scripts/tag/button.js","hash":"91d954f6e9fe6e571eb8ec9f8996294b2dc3688e","modified":1649231804993},{"_id":"themes/butterfly/scripts/tag/flink.js","hash":"ab62919fa567b95fbe14889517abda649991b1ee","modified":1649231804993},{"_id":"themes/butterfly/scripts/tag/gallery.js","hash":"f79c99f6c5b626c272dc2bed2b0250d6b91bb28a","modified":1649231804993},{"_id":"themes/butterfly/scripts/tag/hide.js","hash":"396c3ab1bcf1c7693ad7e506eadd13016c6769b6","modified":1649231804997},{"_id":"themes/butterfly/scripts/tag/inlineImg.js","hash":"a43ee2c7871bdd93cb6beb804429e404570f7929","modified":1649231804997},{"_id":"themes/butterfly/scripts/tag/label.js","hash":"03b2afef41d02bd1045c89578a02402c28356006","modified":1649231804997},{"_id":"themes/butterfly/scripts/tag/mermaid.js","hash":"531808a290b8bdd66bac2faab211ada8e9646a37","modified":1649231804997},{"_id":"themes/butterfly/scripts/tag/note.js","hash":"c16c6eb058af2b36bcd583b2591076c7ebdd51ad","modified":1649231804997},{"_id":"themes/butterfly/scripts/tag/tabs.js","hash":"6c6e415623d0fd39da016d9e353bb4f5cca444f5","modified":1649231804997},{"_id":"themes/butterfly/scripts/tag/timeline.js","hash":"300eb779588bf35a1b687d9f829d866074b707e3","modified":1649231804997},{"_id":"themes/butterfly/source/css/index.styl","hash":"861998e4ac67a59529a8245a9130d68f826c9c12","modified":1649231804997},{"_id":"themes/butterfly/source/css/var.styl","hash":"4890a40366d6443f8b8942a4e9a6dce9fe3494f5","modified":1649231804997},{"_id":"themes/butterfly/source/img/404.jpg","hash":"fb4489bc1d30c93d28f7332158c1c6c1416148de","modified":1649231804997},{"_id":"themes/butterfly/source/img/favicon.png","hash":"83ca32ec14ef6a2cdb95fb85ff12bca748e6a673","modified":1649667596881},{"_id":"themes/butterfly/source/img/friend_404.gif","hash":"8d2d0ebef70a8eb07329f57e645889b0e420fa48","modified":1649231804997},{"_id":"themes/butterfly/source/js/main.js","hash":"04efcbd28b37875cfec88eb87cab7256a9ebb327","modified":1649231804997},{"_id":"themes/butterfly/source/js/tw_cn.js","hash":"00053ce73210274b3679f42607edef1206eebc68","modified":1649231804997},{"_id":"themes/butterfly/source/js/utils.js","hash":"0b95daada72abb5d64a1e3236049a60120e47cca","modified":1649231804997},{"_id":"themes/butterfly/layout/includes/head/Open_Graph.pug","hash":"6c41f49a3e682067533dd9384e6e4511fc3a1349","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/head/analytics.pug","hash":"15530d9ac59c576d79af75dd687efe71e8d261b0","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/head/config.pug","hash":"9e58c80af8bbd0c66ccb4f94d3781818cebf0d66","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/head/config_site.pug","hash":"7df90c8e432e33716517ab918b0a125bc284041b","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/head/google_adsense.pug","hash":"95a37e92b39c44bcbea4be7e29ddb3921c5b8220","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/head/noscript.pug","hash":"d16ad2ee0ff5751fd7f8a5ce1b83935518674977","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/head/preconnect.pug","hash":"65a23b5170204e55b813ce13a79d799b66b7382c","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/head/pwa.pug","hash":"3d492cfe645d37c94d30512e0b230b0a09913148","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/head/site_verification.pug","hash":"e2e8d681f183f00ce5ee239c42d2e36b3744daad","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/header/index.pug","hash":"65fa23680af0daf64930a399c2f2ca37809a8149","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/header/menu_item.pug","hash":"31346a210f4f9912c5b29f51d8f659913492f388","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/header/nav.pug","hash":"78a3abd90bb3c18cd773d3d5abac3541e7f415e5","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/header/post-info.pug","hash":"dc3913c1a6dd207051c3d3414a33851ae8bc0a45","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/header/social.pug","hash":"0d953e51d04a9294a64153c89c20f491a9ec42d4","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/loading/loading-js.pug","hash":"4cfcf0100e37ce91864703cd44f1cb99cb5493ea","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/loading/loading.pug","hash":"5276937fbcceb9d62879dc47be880cd469a27349","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/mixins/article-sort.pug","hash":"2fb74d0b0e4b98749427c5a1a1b0acb6c85fadc4","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/mixins/post-ui.pug","hash":"b9ebb02af8ccf43e3f73be43db19254fa913c57b","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/page/categories.pug","hash":"5276a8d2835e05bd535fedc9f593a0ce8c3e8437","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/page/default-page.pug","hash":"12c65c174d26a41821df9bad26cdf1087ec5b0ca","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/page/flink.pug","hash":"fed069baa9b383f57db32bb631115071d29bdc60","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/page/tags.pug","hash":"6311eda08e4515281c51bd49f43902a51832383c","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/post/post-copyright.pug","hash":"88e3b611b03149665e4113cfa39595c1a3fca7e5","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/post/reward.pug","hash":"864869c43fe5b5bb6f4ac6b13dd4bfb16ea47550","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/aplayer.pug","hash":"292646dfab135973b09f0fa9e3931e83da2ed30e","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/effect.pug","hash":"b9d54a01d7c2a7a183cb7209e99430ce7fea1fe3","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/pangu.pug","hash":"d5fec7dedc52ab23865fb4db002755e9bdaadc9f","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/pjax.pug","hash":"d4072f9ab79f4ac49aa251ae470abc45a2fddbd6","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/prismjs.pug","hash":"1fbecfd299068f90d727f0c8c65e2a792fa6e3e2","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/subtitle.pug","hash":"b63fd8ec48d782f51ee11226753fed1998bbf34a","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/widget/card_ad.pug","hash":"60dc48a7b5d89c2a49123c3fc5893ab9c57dd225","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/widget/card_announcement.pug","hash":"ae392459ad401a083ca51ee0b27526b3c1e1faed","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/widget/card_archives.pug","hash":"86897010fe71503e239887fd8f6a4f5851737be9","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/widget/card_author.pug","hash":"0380a1e048e6219ea4b4a8a4eadba960edf308f0","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/widget/card_bottom_self.pug","hash":"13dc8ce922e2e2332fe6ad5856ebb5dbf9ea4444","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/widget/card_categories.pug","hash":"d1a416d0a8a7916d0b1a41d73adc66f8c811e493","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/widget/card_newest_comment.pug","hash":"6d93564a8bd13cb9b52ee5e178db3bcbf18b1bc6","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/widget/card_post_toc.pug","hash":"3057a2f6f051355e35d3b205121af8735100eacf","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/widget/card_recent_post.pug","hash":"9c1229af6ab48961021886882c473514101fba21","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/widget/card_tags.pug","hash":"438aea3e713ed16b7559b9a80a9c5ec0221263df","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/widget/card_top_self.pug","hash":"ae67c6d4130a6c075058a9c1faea1648bcc6f83e","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/widget/card_webinfo.pug","hash":"0612aaee878f33ea8d3da0293c7dc3b6cd871466","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/widget/index.pug","hash":"7fb096656c8a6c21a4b6a5100885b1081d6021ed","modified":1649231804993},{"_id":"themes/butterfly/source/css/_global/function.styl","hash":"f7fd855593396b30932a06627287a73a407aff88","modified":1649231804997},{"_id":"themes/butterfly/source/css/_global/index.styl","hash":"714f19e7d66df84938bd1b82b33d5667abe1f147","modified":1649231804997},{"_id":"themes/butterfly/source/css/_highlight/highlight.styl","hash":"2f95e99b8351fbecd9037a1bbdc3fee9d6ea8a77","modified":1649231804997},{"_id":"themes/butterfly/source/css/_highlight/theme.styl","hash":"bcd384c8b2aa0390c9eb69ac1abbfd1240ce1da4","modified":1649231804997},{"_id":"themes/butterfly/source/css/_layout/aside.styl","hash":"2d3b0386c8b62a61734e10bab2cf86842cbb1673","modified":1649231804997},{"_id":"themes/butterfly/source/css/_layout/chat.styl","hash":"29f48f9370f245e6e575b5836bccf47eb5688d8b","modified":1649231804997},{"_id":"themes/butterfly/source/css/_layout/comments.styl","hash":"c61dccca690d486c3d9c29cf028d87b777385141","modified":1649231804997},{"_id":"themes/butterfly/source/css/_layout/footer.styl","hash":"26be2afa9d4e7016cf3c42a6cd166f01e8e4ad5c","modified":1649231804997},{"_id":"themes/butterfly/source/css/_layout/head.styl","hash":"d97c1722ce0fcc319f1f90ec2d51f9d746748e2b","modified":1649231804997},{"_id":"themes/butterfly/source/css/_layout/loading.styl","hash":"ef21990de28bd75dcd0f88b8d616e1a7a137502f","modified":1649231804997},{"_id":"themes/butterfly/source/css/_layout/pagination.styl","hash":"fb9f78bfbb79579f1d752cb73fb6d25c8418e0fd","modified":1649231804997},{"_id":"themes/butterfly/source/css/_layout/post.styl","hash":"84d4f27fde933bdf839629eb3bddcbc0f4592836","modified":1649231804997},{"_id":"themes/butterfly/source/css/_layout/relatedposts.styl","hash":"d53de408cb27a2e704aba7f7402b7caebe0410d8","modified":1649231804997},{"_id":"themes/butterfly/source/css/_layout/reward.styl","hash":"c5cfed620708807a48076b5ee59b0ba84e29aa80","modified":1649231804997},{"_id":"themes/butterfly/source/css/_layout/rightside.styl","hash":"bd88ee30ebf8ca2e7b4d3a034c317fd61733921f","modified":1649231804997},{"_id":"themes/butterfly/source/css/_layout/sidebar.styl","hash":"1bcbc80dff19cd53d0b367c3b9a3c751d3a1f10d","modified":1649231804997},{"_id":"themes/butterfly/source/css/_layout/third-party.styl","hash":"e5008f43897d8482b4831cd4c13a0af40e496762","modified":1649231804997},{"_id":"themes/butterfly/source/css/_mode/darkmode.styl","hash":"f67177310f5594954b25a591d186d28d5d450b18","modified":1649231804997},{"_id":"themes/butterfly/source/css/_mode/readmode.styl","hash":"69f8e9414526dfda3af9a71c8e528fdd0ecbbfe5","modified":1649231804997},{"_id":"themes/butterfly/source/css/_page/404.styl","hash":"50dbb9e6d98c71ffe16741b8c1b0c1b9771efd2b","modified":1649231804997},{"_id":"themes/butterfly/source/css/_page/archives.styl","hash":"6f4b4ede52305bce9b22c8c897dcbde8af6e2ce4","modified":1649231804997},{"_id":"themes/butterfly/source/css/_page/categories.styl","hash":"f01ee74948cedb44e53cd3bb1ef36b7d2778ede7","modified":1649231804997},{"_id":"themes/butterfly/source/css/_page/common.styl","hash":"a58d35d698885f1034dedbe99f7dbc1a801412c6","modified":1649231804997},{"_id":"themes/butterfly/source/css/_page/flink.styl","hash":"98d755b686ee833e9da10afaa40c4ec2bd66c19a","modified":1649231804997},{"_id":"themes/butterfly/source/css/_page/homepage.styl","hash":"826dae759062d8f84eb2bf5ab8fdb80e0f79d58b","modified":1649231804997},{"_id":"themes/butterfly/source/css/_page/tags.styl","hash":"580feb7e8b0822a1be48ac380f8c5c53b1523321","modified":1649231804997},{"_id":"themes/butterfly/source/css/_search/algolia.styl","hash":"656f9007d94cf29a20532705d94fb7f22827e6fe","modified":1649231804997},{"_id":"themes/butterfly/source/css/_search/index.styl","hash":"0290605c4984882990059eefe3ad18d2ac6a19ef","modified":1649231804997},{"_id":"themes/butterfly/source/css/_search/local-search.styl","hash":"e4c987c0202162b50dec91e1df74665d0fa933c9","modified":1649231804997},{"_id":"themes/butterfly/source/css/_tags/button.styl","hash":"45f0c32bdea117540f6b14ebac6450d7142bd710","modified":1649231804997},{"_id":"themes/butterfly/source/css/_tags/gallery.styl","hash":"a310e48f826a4cacc55d8e68f43806e5085554f6","modified":1649231804997},{"_id":"themes/butterfly/source/css/_tags/hexo.styl","hash":"d76c38adf1d9c1279ef4241835667789f5b736e0","modified":1649231804997},{"_id":"themes/butterfly/source/css/_tags/hide.styl","hash":"ce489ca2e249e2a3cf71584e20d84bdb022e3475","modified":1649231804997},{"_id":"themes/butterfly/source/css/_tags/inlineImg.styl","hash":"df9d405c33a9a68946b530410f64096bcb72560c","modified":1649231804997},{"_id":"themes/butterfly/source/css/_tags/label.styl","hash":"66c59e193d794cdb02cca7bd1dc4aea5a19d7e84","modified":1649231804997},{"_id":"themes/butterfly/source/css/_tags/note.styl","hash":"08493b66b9f31f2bd3e9a3115017a0ce16142b20","modified":1649231804997},{"_id":"themes/butterfly/source/css/_tags/tabs.styl","hash":"bf9568444dd54e39dc59b461323dcd38942f27d9","modified":1649231804997},{"_id":"themes/butterfly/source/css/_tags/timeline.styl","hash":"f071156d439556e7463ed4bc61ceee87170d5d08","modified":1649231804997},{"_id":"themes/butterfly/source/css/_third-party/normalize.min.css","hash":"2c18a1c9604af475b4749def8f1959df88d8b276","modified":1649231804997},{"_id":"themes/butterfly/source/js/search/algolia.js","hash":"aaa5e44125dcf321866bc2355a73773b11db8c9c","modified":1649231804997},{"_id":"themes/butterfly/source/js/search/local-search.js","hash":"ec62117f38e095425f295b1170c222c7a1399425","modified":1649231804997},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/disqus.pug","hash":"d85c3737b5c9548553a78b757a7698df126a52cf","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/fb.pug","hash":"7848ec58c6ec03243abf80a3b22b4dc10f3edf53","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/index.pug","hash":"e3bf847553515174f6085df982f0623e9783db7a","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/twikoo.pug","hash":"ef1b2b5b980d6aeaa5d06b97d1afc9644b155a16","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/valine.pug","hash":"bba9871f446c10ffcc8fa9023f5a2eb701a86bae","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/waline.pug","hash":"400ce038548d6f9ddb486150c724c87b6923a88b","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/chat/chatra.pug","hash":"481cd5053bafb1a19f623554a27d3aa077ea59c3","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/chat/crisp.pug","hash":"76634112c64023177260d1317ae39cef2a68e35f","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/chat/daovoice.pug","hash":"cfe63e7d26a6665df6aa32ca90868ad48e05ec04","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/chat/gitter.pug","hash":"d1d2474420bf4edc2e43ccdff6f92b8b082143df","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/chat/index.pug","hash":"3f05f8311ae559d768ee3d0925e84ed767c314d3","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/chat/tidio.pug","hash":"24a926756c2300b9c561aaab6bd3a71fdd16e16d","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/comments/disqus.pug","hash":"a111407fdcafcf1099e26ffa69786f8822c5d9fb","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/comments/disqusjs.pug","hash":"143236e395c18d80ab8dc794821eb337c85f6b32","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/comments/facebook_comments.pug","hash":"fe684aaad4c99b908dc4499c85afd9a2cd893aae","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/comments/giscus.pug","hash":"0764709381fa29778f6390d645ed137d2f91228f","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/comments/gitalk.pug","hash":"9c96e6e67931977268b218b99084b98597c2e42b","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/comments/index.pug","hash":"e4850f2c9ba5f6b2248808f7257662679e0fab0a","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/comments/js.pug","hash":"9302837f1e35f153323bb4f166514c7e96e8ecdd","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/comments/livere.pug","hash":"52ea8aa26b84d3ad38ae28cdf0f163e9ca8dced7","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/comments/twikoo.pug","hash":"c271cacbac14ed665bbf47aa9c6e74e94c69dcef","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/comments/utterances.pug","hash":"c1c75abe5c899618ed6699c97ac999544840098a","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/comments/valine.pug","hash":"59c22ebf3aaee90152e7cdb17ff5841c888fcd82","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/comments/waline.pug","hash":"7648e4cb0b224f480b5f1356d64f62c9235f6723","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/math/index.pug","hash":"b8ae5fd7d74e1edcef21f5004fc96147e064d219","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/math/katex.pug","hash":"f9b00ead54573ba6e6eb33481588af144aab648d","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/math/mathjax.pug","hash":"a47d8f9f593091cc91192c0c49deaa2c0d2317fd","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/math/mermaid.pug","hash":"0a7587a0211011b5942edba2aa80d51169561d30","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/disqus-comment.pug","hash":"04b2a5882e789a988e41d45abe606f0617b08e38","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/github-issues.pug","hash":"e846ddfe4a63b15d1416f6055f5756af5e3da7c6","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/index.pug","hash":"f6506ccfd1ce994b9e53aa95588d0b6dbad11411","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/twikoo-comment.pug","hash":"ac811c1d6e0bf08aeb933ade1b9557e0c560d0c9","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/valine.pug","hash":"9028efac78e4122acd734edd5ef9110ef3f05cd1","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/waline.pug","hash":"5e32d903903c76db55a625640f9417d15a3a312f","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/search/algolia.pug","hash":"c92df4f9d0611cf44c1a4491e226f242ec80f5bb","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/search/index.pug","hash":"da3b9437d061ee68dbc383057db5c73034c49605","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/search/local-search.pug","hash":"8ce336a4c8cae81b58ee26ff51040ca650ff1519","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/share/add-this.pug","hash":"2980f1889226ca981aa23b8eb1853fde26dcf89a","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/share/addtoany.pug","hash":"309f51bc5302e72fc469d54c577fbcfe57fb07a8","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/share/index.pug","hash":"4c4a9c15215ae8ac5eadb0e086b278f76db9ee92","modified":1649231804993},{"_id":"themes/butterfly/layout/includes/third-party/share/share-js.pug","hash":"006acc91ce25fc7c7d778ca043e970f57dc46b83","modified":1649231804993},{"_id":"themes/butterfly/source/css/_highlight/highlight/diff.styl","hash":"cf1fae641c927621a4df1be5ca4a853b9b526e23","modified":1649231804997},{"_id":"themes/butterfly/source/css/_highlight/highlight/index.styl","hash":"18804c58239d95798fa86d0597f32d7f7dd30051","modified":1649231804997},{"_id":"themes/butterfly/source/css/_highlight/prismjs/diff.styl","hash":"5972c61f5125068cbe0af279a0c93a54847fdc3b","modified":1649231804997},{"_id":"themes/butterfly/source/css/_highlight/prismjs/index.styl","hash":"5dc2e0bcae9a54bfb9bdcc82d02ae5a3cf1ca97d","modified":1649231804997},{"_id":"themes/butterfly/source/css/_highlight/prismjs/line-number.styl","hash":"8970cc1916c982b64a1478792b2822d1d31e276d","modified":1649231804997},{"_id":"public/img/404.jpg","hash":"fb4489bc1d30c93d28f7332158c1c6c1416148de","modified":1649749327879},{"_id":"public/img/favicon.png","hash":"83ca32ec14ef6a2cdb95fb85ff12bca748e6a673","modified":1649749327879},{"_id":"public/img/friend_404.gif","hash":"8d2d0ebef70a8eb07329f57e645889b0e420fa48","modified":1649749327879},{"_id":"public/css/var.css","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1649749327879},{"_id":"public/js/search/algolia.js","hash":"aaa5e44125dcf321866bc2355a73773b11db8c9c","modified":1649749327879},{"_id":"public/js/search/local-search.js","hash":"ec62117f38e095425f295b1170c222c7a1399425","modified":1649749327879},{"_id":"public/js/main.js","hash":"04efcbd28b37875cfec88eb87cab7256a9ebb327","modified":1649749327879},{"_id":"public/js/tw_cn.js","hash":"00053ce73210274b3679f42607edef1206eebc68","modified":1649749327879},{"_id":"themes/butterfly/source/img/cover_1.webp","hash":"356cb6ab08918cb0b8aeb46b11d727e72d5f7a3f","modified":1649664223567},{"_id":"public/img/cover_1.webp","hash":"356cb6ab08918cb0b8aeb46b11d727e72d5f7a3f","modified":1649749327879},{"_id":"source/_posts/.RustStudyBasic.md.swp","hash":"c3c7f50c816f9e31aaf1355901f5df85844da6be","modified":1649665593885},{"_id":"themes/butterfly/source/img/cover_10.webp","hash":"4071312dc348b0048dbfd79f5028f7dd500d5793","modified":1649666099088},{"_id":"themes/butterfly/source/img/cover_2.webp","hash":"03718359655373b366c6d72a03d633a2b740544b","modified":1649666098080},{"_id":"themes/butterfly/source/img/cover_3.webp","hash":"5ed634e994979007c4efa5b64a15ebc432c23be1","modified":1649666098144},{"_id":"themes/butterfly/source/img/cover_4.webp","hash":"b526b248b81831a36e4f4274b65ee7719a76f4b5","modified":1649666098380},{"_id":"themes/butterfly/source/img/cover_6.webp","hash":"682e774b35bf4f373d6bc1efaca38ef2c4ed1ab4","modified":1649666098632},{"_id":"themes/butterfly/source/img/cover_9.webp","hash":"86b7a04c3f92a4c4153164c67b7d4e90ebdaeedf","modified":1649666098992},{"_id":"themes/butterfly/source/img/cover_5.webp","hash":"670967d0461756328a5cd5a1ce082a5ffb8da211","modified":1649666098428},{"_id":"themes/butterfly/source/img/cover_7.webp","hash":"d1591af6733819d88aa4e6142356d152c3932be0","modified":1649666098704},{"_id":"themes/butterfly/source/img/cover_8.webp","hash":"fe7bae47d770a7ec17005a2348e0ff4f6d3f9a02","modified":1649666098856},{"_id":"public/categories/Vue/index.html","hash":"46262ceac0e95093d55e17d741f383626fdd04c2","modified":1649751848570},{"_id":"public/img/cover_10.webp","hash":"4071312dc348b0048dbfd79f5028f7dd500d5793","modified":1649749327879},{"_id":"public/img/cover_2.webp","hash":"03718359655373b366c6d72a03d633a2b740544b","modified":1649749327879},{"_id":"public/img/cover_3.webp","hash":"5ed634e994979007c4efa5b64a15ebc432c23be1","modified":1649749327879},{"_id":"public/img/cover_4.webp","hash":"b526b248b81831a36e4f4274b65ee7719a76f4b5","modified":1649749327879},{"_id":"public/img/cover_5.webp","hash":"670967d0461756328a5cd5a1ce082a5ffb8da211","modified":1649749327879},{"_id":"public/img/cover_6.webp","hash":"682e774b35bf4f373d6bc1efaca38ef2c4ed1ab4","modified":1649749327879},{"_id":"public/img/cover_7.webp","hash":"d1591af6733819d88aa4e6142356d152c3932be0","modified":1649749327879},{"_id":"public/img/cover_8.webp","hash":"fe7bae47d770a7ec17005a2348e0ff4f6d3f9a02","modified":1649749327879},{"_id":"public/img/cover_9.webp","hash":"86b7a04c3f92a4c4153164c67b7d4e90ebdaeedf","modified":1649749327879},{"_id":"themes/butterfly/source/img/favicon.png.backup","hash":"3cf89864b4f6c9b532522a4d260a2e887971c92d","modified":1649667330244},{"_id":"public/img/favicon.png.backup","hash":"3cf89864b4f6c9b532522a4d260a2e887971c92d","modified":1649749327879},{"_id":"public/2022/04/06/ReactSourceDiffDebug/index.html","hash":"ec8540a295833900d14e2c34327dcdd8390a819b","modified":1649751848570},{"_id":"public/2022/03/21/ReactSourceDebug/index.html","hash":"06d4b20be897c895197b6549e7a495ca194b8bb1","modified":1649751848570},{"_id":"public/2022/02/22/RustStudyBasic/index.html","hash":"dfb0fa5b7468c9bc396a33e25e50533b04ab985b","modified":1649751848570},{"_id":"public/2022/03/21/ReactSourceDebug/1.png","hash":"8136f1e10f8c9a44f0a39ebce4b2ee95f6e624a6","modified":1649749327879},{"_id":"public/2022/03/21/ReactSourceDebug/2.png","hash":"9e394d1e8c0ba9355080161fdd8477a6d6968871","modified":1649749327879},{"_id":"public/2022/03/21/ReactSourceDebug/3.png","hash":"017784677857c4f5b5976b1a36bc7ae08304d04e","modified":1649749327879},{"_id":"public/2022/03/21/ReactSourceDebug/5.png","hash":"e546d911db100bdb02f9b4a588968ead8772c748","modified":1649749327879},{"_id":"public/2022/03/21/ReactSourceDebug/4.png","hash":"a5590f8f0ad9be5d80d004c78133bc000972d257","modified":1649749327879},{"_id":"public/2022/03/21/ReactSourceDebug/6.png","hash":"20278c87a9af1cd50da9c3aaff68f7df5cfacc57","modified":1649749327879}],"Category":[{"name":"javascript","_id":"ckvhtdmbi0002rgo34rxz688x"},{"name":"JavaScript","_id":"ckw0gwfcf0001u3o3hz429441"},{"name":"Rust","_id":"ckzxsx2fc00016lo3dimph9ov"},{"name":"React","_id":"cl10f1yi700019no33ttn633o"},{"name":"Vue","_id":"cl1ugm1au0000tio36gc56id3"}],"Data":[],"Page":[],"Post":[{"title":"Vue","date":"2021-06-04T01:06:01.000Z","comments":1,"description":"VueJavaScript","cover":"/img/cover_2.webp","top_image":"https://pic2.zhimg.com/v2-db7221c0d7ca752b2f88d7ca94939976_1440w.jpg?source=172ae18b","_content":"## \n\n_Vue.js  DOM _Vue\n\n- \n\n  ```html\n  <div id=\"app\">\n    {{ message }}\n  </div>\n  \n  <script>\n  var app = new Vue({\n    el: '#app',\n    data: {\n      message: 'Hello Vue!'\n    }\n  })\n  </script>\n  ```\n\n  - `Hello Vue!`****`app.message`\n  - `Vue`\n\n## \n\n### \n\n- JavaScriptDOM\n\n  ```javascript\n  let msg = '123';\n  document.querySelector('#app').innerHTML = msg;\n  ```\n\n  \n\n  ![](1.png)\n\n- JavaScriptDOM****JavaScriptDOM\n\n  ```javascript\n  let msg = '123';\n  update();\n  //\n  setTimeout(() => {\n      msg = '456';\n      update();\n  }, 1000);\n  //update\n  function update() {\n      document.querySelector('#app').innerHTML = msg;\n  }\n  ```\n\n1DOM\n\n![](2.gif)\n\n### \n\n- `msg`Vue**`msg``update`**\n\n#### gettersetter\n\n- JavaScript`setter``getter`\n\n  ```javascript\n  let obj = {\n      _a: 1\n  }\n  Object.defineProperty(obj, 'a', {\n      get() {\n          return this._a\n      },\n      set(val) {\n          this._a = val\n      }\n  })\n  ```\n\n  \n\n  ![](3.gif)\n\n  - `setter``getter``obj._a`**ES6`Proxy`Vue3**\n\n### \n\n- \n\n  ```javascript\n  //data\n  let data = {\n      _msg: ''\n  };\n  //\n  Object.defineProperty(data, 'msg', {\n      set(val) {\n          this._msg = val;\n          //\n          update();\n      },\n      get() {\n          return this._msg;\n      }\n  })\n  \n  function update() {\n      document.querySelector('#app').innerHTML = data.msg;\n  }\n  \n  //\n  data.msg = '123';\n  setTimeout(() => {\n      data.msg = '456'\n  }, 1000);\n  ```\n\n  \n\n  ![](4.gif)\n\n  - \n\n### \n\n- Vue\n\n- \n\n  ```javascript\n  class Dep {\n      constructor() {\n          this.subs = [];//\n      }\n      addSub(watcher) {\n          this.subs.push(watcher)//watcher\n      }\n      notify() {\n          this.subs.forEach((watcher) => {\n              watcher.update()//watcherupdate\n          })\n      }\n  }\n  ```\n\n  - watcherwatcher\n\n- \n\n  ```javascript\n  class Watcher {\n      constructor(obj, key, cb) {\n          Dep.target = this;//Depwatcher\n          this.val = obj[key];//getter\n          this.obj = obj;\n          this.key = key;\n          this.cb = cb;//\n          Dep.target = null//watcher\n      }\n      update() {\n          this.val = this.obj[this.key];//\n          this.cb(this.val)//\n      }\n  }\n  ```\n\n  - watchergetterwatcher\n\n- \n\n  ```javascript\n  let dep = new Dep();\n  for (const key in data) {//data\n      if (Object.hasOwnProperty.call(data, key)) {//data\n          let value = data[key];//\n          Object.defineProperty(data, key, {\n              get() {\n                  if (Dep.target) {//watcher\n                      dep.addSub(Dep.target)\n                  }\n                  return value\n              },\n              set(val) {\n                  value = val;\n                  dep.notify();//watcher\n              }\n          })\n      }\n  }\n  //\n  new Watcher(data, 'pri1', (val) => {\n      //pri1\n      document.querySelector('.pri1').innerHTML = 'pri1:' + val;\n      document.querySelector('.total').innerHTML = 'total:' + (val + data.pri2);\n  })\n  new Watcher(data, 'pri2', (val) => {\n      //pri2\n      document.querySelector('.pri2').innerHTML = 'pri2:' + val;\n      document.querySelector('.total').innerHTML = 'total:' + (val + data.pri1)\n  })\n  ```\n\n  - Vuewatcher\n\n  \n\n  ![](5.gif)\n\n- VueVue\n","source":"_posts/vueReactive.md","raw":"---\ntitle: Vue\ndate: 2021-6-4 09:06:01\ncomments: true\ntags:\n- Vue\ncategories:\n- Vue\ndescription: VueJavaScript\ncover: /img/cover_2.webp\ntop_image: https://pic2.zhimg.com/v2-db7221c0d7ca752b2f88d7ca94939976_1440w.jpg?source=172ae18b\n\n---\n## \n\n_Vue.js  DOM _Vue\n\n- \n\n  ```html\n  <div id=\"app\">\n    {{ message }}\n  </div>\n  \n  <script>\n  var app = new Vue({\n    el: '#app',\n    data: {\n      message: 'Hello Vue!'\n    }\n  })\n  </script>\n  ```\n\n  - `Hello Vue!`****`app.message`\n  - `Vue`\n\n## \n\n### \n\n- JavaScriptDOM\n\n  ```javascript\n  let msg = '123';\n  document.querySelector('#app').innerHTML = msg;\n  ```\n\n  \n\n  ![](1.png)\n\n- JavaScriptDOM****JavaScriptDOM\n\n  ```javascript\n  let msg = '123';\n  update();\n  //\n  setTimeout(() => {\n      msg = '456';\n      update();\n  }, 1000);\n  //update\n  function update() {\n      document.querySelector('#app').innerHTML = msg;\n  }\n  ```\n\n1DOM\n\n![](2.gif)\n\n### \n\n- `msg`Vue**`msg``update`**\n\n#### gettersetter\n\n- JavaScript`setter``getter`\n\n  ```javascript\n  let obj = {\n      _a: 1\n  }\n  Object.defineProperty(obj, 'a', {\n      get() {\n          return this._a\n      },\n      set(val) {\n          this._a = val\n      }\n  })\n  ```\n\n  \n\n  ![](3.gif)\n\n  - `setter``getter``obj._a`**ES6`Proxy`Vue3**\n\n### \n\n- \n\n  ```javascript\n  //data\n  let data = {\n      _msg: ''\n  };\n  //\n  Object.defineProperty(data, 'msg', {\n      set(val) {\n          this._msg = val;\n          //\n          update();\n      },\n      get() {\n          return this._msg;\n      }\n  })\n  \n  function update() {\n      document.querySelector('#app').innerHTML = data.msg;\n  }\n  \n  //\n  data.msg = '123';\n  setTimeout(() => {\n      data.msg = '456'\n  }, 1000);\n  ```\n\n  \n\n  ![](4.gif)\n\n  - \n\n### \n\n- Vue\n\n- \n\n  ```javascript\n  class Dep {\n      constructor() {\n          this.subs = [];//\n      }\n      addSub(watcher) {\n          this.subs.push(watcher)//watcher\n      }\n      notify() {\n          this.subs.forEach((watcher) => {\n              watcher.update()//watcherupdate\n          })\n      }\n  }\n  ```\n\n  - watcherwatcher\n\n- \n\n  ```javascript\n  class Watcher {\n      constructor(obj, key, cb) {\n          Dep.target = this;//Depwatcher\n          this.val = obj[key];//getter\n          this.obj = obj;\n          this.key = key;\n          this.cb = cb;//\n          Dep.target = null//watcher\n      }\n      update() {\n          this.val = this.obj[this.key];//\n          this.cb(this.val)//\n      }\n  }\n  ```\n\n  - watchergetterwatcher\n\n- \n\n  ```javascript\n  let dep = new Dep();\n  for (const key in data) {//data\n      if (Object.hasOwnProperty.call(data, key)) {//data\n          let value = data[key];//\n          Object.defineProperty(data, key, {\n              get() {\n                  if (Dep.target) {//watcher\n                      dep.addSub(Dep.target)\n                  }\n                  return value\n              },\n              set(val) {\n                  value = val;\n                  dep.notify();//watcher\n              }\n          })\n      }\n  }\n  //\n  new Watcher(data, 'pri1', (val) => {\n      //pri1\n      document.querySelector('.pri1').innerHTML = 'pri1:' + val;\n      document.querySelector('.total').innerHTML = 'total:' + (val + data.pri2);\n  })\n  new Watcher(data, 'pri2', (val) => {\n      //pri2\n      document.querySelector('.pri2').innerHTML = 'pri2:' + val;\n      document.querySelector('.total').innerHTML = 'total:' + (val + data.pri1)\n  })\n  ```\n\n  - Vuewatcher\n\n  \n\n  ![](5.gif)\n\n- VueVue\n","slug":"vueReactive","published":1,"updated":"2022-04-11T08:37:23.483Z","_id":"ckvhtdmbc0000rgo3fcfm10za","layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>_Vue.js  DOM _Vue</p>\n<ul>\n<li><p></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;app&quot;</span>&gt;</span></span><br><span class=\"line\">  &#123;&#123; message &#125;&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">var</span> app = <span class=\"keyword\">new</span> <span class=\"title class_\">Vue</span>(&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"attr\">el</span>: <span class=\"string\">&#x27;#app&#x27;</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"attr\">data</span>: &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"attr\">message</span>: <span class=\"string\">&#x27;Hello Vue!&#x27;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;)</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>Hello Vue!</code><strong></strong><code>app.message</code></li>\n<li><code>Vue</code></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><p>JavaScriptDOM</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> msg = <span class=\"string\">&#x27;123&#x27;</span>;</span><br><span class=\"line\"><span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;#app&#x27;</span>).<span class=\"property\">innerHTML</span> = msg;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><img src=\"/1.png\"></p>\n</li>\n<li><p>JavaScriptDOM<strong></strong>JavaScriptDOM</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> msg = <span class=\"string\">&#x27;123&#x27;</span>;</span><br><span class=\"line\"><span class=\"title function_\">update</span>();</span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    msg = <span class=\"string\">&#x27;456&#x27;</span>;</span><br><span class=\"line\">    <span class=\"title function_\">update</span>();</span><br><span class=\"line\">&#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\"><span class=\"comment\">//update</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">update</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;#app&#x27;</span>).<span class=\"property\">innerHTML</span> = msg;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<p>1DOM</p>\n<p><img src=\"/2.gif\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><code>msg</code>Vue<strong><code>msg</code><code>update</code></strong></li>\n</ul>\n<h4 id=\"gettersetter\"><a href=\"#gettersetter\" class=\"headerlink\" title=\"gettersetter\"></a>gettersetter</h4><ul>\n<li><p>JavaScript<code>setter</code><code>getter</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;</span><br><span class=\"line\">    <span class=\"attr\">_a</span>: <span class=\"number\">1</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"title class_\">Object</span>.<span class=\"title function_\">defineProperty</span>(obj, <span class=\"string\">&#x27;a&#x27;</span>, &#123;</span><br><span class=\"line\">    <span class=\"title function_\">get</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">this</span>.<span class=\"property\">_a</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"title function_\">set</span>(<span class=\"params\">val</span>) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">_a</span> = val</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><img src=\"/3.gif\"></p>\n<ul>\n<li><code>setter</code><code>getter</code><code>obj._a</code><strong>ES6<code>Proxy</code>Vue3</strong></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//data</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> data = &#123;</span><br><span class=\"line\">    <span class=\"attr\">_msg</span>: <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"title class_\">Object</span>.<span class=\"title function_\">defineProperty</span>(data, <span class=\"string\">&#x27;msg&#x27;</span>, &#123;</span><br><span class=\"line\">    <span class=\"title function_\">set</span>(<span class=\"params\">val</span>) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">_msg</span> = val;</span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"title function_\">update</span>();</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"title function_\">get</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">this</span>.<span class=\"property\">_msg</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">update</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;#app&#x27;</span>).<span class=\"property\">innerHTML</span> = data.<span class=\"property\">msg</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\">data.<span class=\"property\">msg</span> = <span class=\"string\">&#x27;123&#x27;</span>;</span><br><span class=\"line\"><span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    data.<span class=\"property\">msg</span> = <span class=\"string\">&#x27;456&#x27;</span></span><br><span class=\"line\">&#125;, <span class=\"number\">1000</span>);</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><img src=\"/4.gif\"></p>\n<ul>\n<li></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><p>Vue</p>\n</li>\n<li><p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Dep</span> &#123;</span><br><span class=\"line\">    <span class=\"title function_\">constructor</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">subs</span> = [];<span class=\"comment\">//</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"title function_\">addSub</span>(<span class=\"params\">watcher</span>) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">subs</span>.<span class=\"title function_\">push</span>(watcher)<span class=\"comment\">//watcher</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"title function_\">notify</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">subs</span>.<span class=\"title function_\">forEach</span>(<span class=\"function\">(<span class=\"params\">watcher</span>) =&gt;</span> &#123;</span><br><span class=\"line\">            watcher.<span class=\"title function_\">update</span>()<span class=\"comment\">//watcherupdate</span></span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>watcherwatcher</li>\n</ul>\n</li>\n<li><p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Watcher</span> &#123;</span><br><span class=\"line\">    <span class=\"title function_\">constructor</span>(<span class=\"params\">obj, key, cb</span>) &#123;</span><br><span class=\"line\">        <span class=\"title class_\">Dep</span>.<span class=\"property\">target</span> = <span class=\"variable language_\">this</span>;<span class=\"comment\">//Depwatcher</span></span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">val</span> = obj[key];<span class=\"comment\">//getter</span></span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">obj</span> = obj;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">key</span> = key;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">cb</span> = cb;<span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"title class_\">Dep</span>.<span class=\"property\">target</span> = <span class=\"literal\">null</span><span class=\"comment\">//watcher</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"title function_\">update</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">val</span> = <span class=\"variable language_\">this</span>.<span class=\"property\">obj</span>[<span class=\"variable language_\">this</span>.<span class=\"property\">key</span>];<span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"title function_\">cb</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">val</span>)<span class=\"comment\">//</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>watchergetterwatcher</li>\n</ul>\n</li>\n<li><p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> dep = <span class=\"keyword\">new</span> <span class=\"title class_\">Dep</span>();</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">const</span> key <span class=\"keyword\">in</span> data) &#123;<span class=\"comment\">//data</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"title class_\">Object</span>.<span class=\"property\">hasOwnProperty</span>.<span class=\"title function_\">call</span>(data, key)) &#123;<span class=\"comment\">//data</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> value = data[key];<span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"title class_\">Object</span>.<span class=\"title function_\">defineProperty</span>(data, key, &#123;</span><br><span class=\"line\">            <span class=\"title function_\">get</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (<span class=\"title class_\">Dep</span>.<span class=\"property\">target</span>) &#123;<span class=\"comment\">//watcher</span></span><br><span class=\"line\">                    dep.<span class=\"title function_\">addSub</span>(<span class=\"title class_\">Dep</span>.<span class=\"property\">target</span>)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> value</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            <span class=\"title function_\">set</span>(<span class=\"params\">val</span>) &#123;</span><br><span class=\"line\">                value = val;</span><br><span class=\"line\">                dep.<span class=\"title function_\">notify</span>();<span class=\"comment\">//watcher</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"title class_\">Watcher</span>(data, <span class=\"string\">&#x27;pri1&#x27;</span>, <span class=\"function\">(<span class=\"params\">val</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//pri1</span></span><br><span class=\"line\">    <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;.pri1&#x27;</span>).<span class=\"property\">innerHTML</span> = <span class=\"string\">&#x27;pri1:&#x27;</span> + val;</span><br><span class=\"line\">    <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;.total&#x27;</span>).<span class=\"property\">innerHTML</span> = <span class=\"string\">&#x27;total:&#x27;</span> + (val + data.<span class=\"property\">pri2</span>);</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"title class_\">Watcher</span>(data, <span class=\"string\">&#x27;pri2&#x27;</span>, <span class=\"function\">(<span class=\"params\">val</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//pri2</span></span><br><span class=\"line\">    <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;.pri2&#x27;</span>).<span class=\"property\">innerHTML</span> = <span class=\"string\">&#x27;pri2:&#x27;</span> + val;</span><br><span class=\"line\">    <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;.total&#x27;</span>).<span class=\"property\">innerHTML</span> = <span class=\"string\">&#x27;total:&#x27;</span> + (val + data.<span class=\"property\">pri1</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Vuewatcher</li>\n</ul>\n<p></p>\n<p><img src=\"/5.gif\"></p>\n</li>\n<li><p>VueVue</p>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>_Vue.js  DOM _Vue</p>\n<ul>\n<li><p></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;app&quot;</span>&gt;</span></span><br><span class=\"line\">  &#123;&#123; message &#125;&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">var</span> app = <span class=\"keyword\">new</span> <span class=\"title class_\">Vue</span>(&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"attr\">el</span>: <span class=\"string\">&#x27;#app&#x27;</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"attr\">data</span>: &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"attr\">message</span>: <span class=\"string\">&#x27;Hello Vue!&#x27;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;)</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>Hello Vue!</code><strong></strong><code>app.message</code></li>\n<li><code>Vue</code></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><p>JavaScriptDOM</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> msg = <span class=\"string\">&#x27;123&#x27;</span>;</span><br><span class=\"line\"><span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;#app&#x27;</span>).<span class=\"property\">innerHTML</span> = msg;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><img src=\"/1.png\"></p>\n</li>\n<li><p>JavaScriptDOM<strong></strong>JavaScriptDOM</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> msg = <span class=\"string\">&#x27;123&#x27;</span>;</span><br><span class=\"line\"><span class=\"title function_\">update</span>();</span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    msg = <span class=\"string\">&#x27;456&#x27;</span>;</span><br><span class=\"line\">    <span class=\"title function_\">update</span>();</span><br><span class=\"line\">&#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\"><span class=\"comment\">//update</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">update</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;#app&#x27;</span>).<span class=\"property\">innerHTML</span> = msg;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<p>1DOM</p>\n<p><img src=\"/2.gif\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><code>msg</code>Vue<strong><code>msg</code><code>update</code></strong></li>\n</ul>\n<h4 id=\"gettersetter\"><a href=\"#gettersetter\" class=\"headerlink\" title=\"gettersetter\"></a>gettersetter</h4><ul>\n<li><p>JavaScript<code>setter</code><code>getter</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;</span><br><span class=\"line\">    <span class=\"attr\">_a</span>: <span class=\"number\">1</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"title class_\">Object</span>.<span class=\"title function_\">defineProperty</span>(obj, <span class=\"string\">&#x27;a&#x27;</span>, &#123;</span><br><span class=\"line\">    <span class=\"title function_\">get</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">this</span>.<span class=\"property\">_a</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"title function_\">set</span>(<span class=\"params\">val</span>) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">_a</span> = val</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><img src=\"/3.gif\"></p>\n<ul>\n<li><code>setter</code><code>getter</code><code>obj._a</code><strong>ES6<code>Proxy</code>Vue3</strong></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//data</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> data = &#123;</span><br><span class=\"line\">    <span class=\"attr\">_msg</span>: <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"title class_\">Object</span>.<span class=\"title function_\">defineProperty</span>(data, <span class=\"string\">&#x27;msg&#x27;</span>, &#123;</span><br><span class=\"line\">    <span class=\"title function_\">set</span>(<span class=\"params\">val</span>) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">_msg</span> = val;</span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"title function_\">update</span>();</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"title function_\">get</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">this</span>.<span class=\"property\">_msg</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">update</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;#app&#x27;</span>).<span class=\"property\">innerHTML</span> = data.<span class=\"property\">msg</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\">data.<span class=\"property\">msg</span> = <span class=\"string\">&#x27;123&#x27;</span>;</span><br><span class=\"line\"><span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    data.<span class=\"property\">msg</span> = <span class=\"string\">&#x27;456&#x27;</span></span><br><span class=\"line\">&#125;, <span class=\"number\">1000</span>);</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><img src=\"/4.gif\"></p>\n<ul>\n<li></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><p>Vue</p>\n</li>\n<li><p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Dep</span> &#123;</span><br><span class=\"line\">    <span class=\"title function_\">constructor</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">subs</span> = [];<span class=\"comment\">//</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"title function_\">addSub</span>(<span class=\"params\">watcher</span>) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">subs</span>.<span class=\"title function_\">push</span>(watcher)<span class=\"comment\">//watcher</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"title function_\">notify</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">subs</span>.<span class=\"title function_\">forEach</span>(<span class=\"function\">(<span class=\"params\">watcher</span>) =&gt;</span> &#123;</span><br><span class=\"line\">            watcher.<span class=\"title function_\">update</span>()<span class=\"comment\">//watcherupdate</span></span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>watcherwatcher</li>\n</ul>\n</li>\n<li><p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Watcher</span> &#123;</span><br><span class=\"line\">    <span class=\"title function_\">constructor</span>(<span class=\"params\">obj, key, cb</span>) &#123;</span><br><span class=\"line\">        <span class=\"title class_\">Dep</span>.<span class=\"property\">target</span> = <span class=\"variable language_\">this</span>;<span class=\"comment\">//Depwatcher</span></span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">val</span> = obj[key];<span class=\"comment\">//getter</span></span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">obj</span> = obj;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">key</span> = key;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">cb</span> = cb;<span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"title class_\">Dep</span>.<span class=\"property\">target</span> = <span class=\"literal\">null</span><span class=\"comment\">//watcher</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"title function_\">update</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">val</span> = <span class=\"variable language_\">this</span>.<span class=\"property\">obj</span>[<span class=\"variable language_\">this</span>.<span class=\"property\">key</span>];<span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"title function_\">cb</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">val</span>)<span class=\"comment\">//</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>watchergetterwatcher</li>\n</ul>\n</li>\n<li><p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> dep = <span class=\"keyword\">new</span> <span class=\"title class_\">Dep</span>();</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">const</span> key <span class=\"keyword\">in</span> data) &#123;<span class=\"comment\">//data</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"title class_\">Object</span>.<span class=\"property\">hasOwnProperty</span>.<span class=\"title function_\">call</span>(data, key)) &#123;<span class=\"comment\">//data</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> value = data[key];<span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"title class_\">Object</span>.<span class=\"title function_\">defineProperty</span>(data, key, &#123;</span><br><span class=\"line\">            <span class=\"title function_\">get</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (<span class=\"title class_\">Dep</span>.<span class=\"property\">target</span>) &#123;<span class=\"comment\">//watcher</span></span><br><span class=\"line\">                    dep.<span class=\"title function_\">addSub</span>(<span class=\"title class_\">Dep</span>.<span class=\"property\">target</span>)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> value</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            <span class=\"title function_\">set</span>(<span class=\"params\">val</span>) &#123;</span><br><span class=\"line\">                value = val;</span><br><span class=\"line\">                dep.<span class=\"title function_\">notify</span>();<span class=\"comment\">//watcher</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"title class_\">Watcher</span>(data, <span class=\"string\">&#x27;pri1&#x27;</span>, <span class=\"function\">(<span class=\"params\">val</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//pri1</span></span><br><span class=\"line\">    <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;.pri1&#x27;</span>).<span class=\"property\">innerHTML</span> = <span class=\"string\">&#x27;pri1:&#x27;</span> + val;</span><br><span class=\"line\">    <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;.total&#x27;</span>).<span class=\"property\">innerHTML</span> = <span class=\"string\">&#x27;total:&#x27;</span> + (val + data.<span class=\"property\">pri2</span>);</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"title class_\">Watcher</span>(data, <span class=\"string\">&#x27;pri2&#x27;</span>, <span class=\"function\">(<span class=\"params\">val</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//pri2</span></span><br><span class=\"line\">    <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;.pri2&#x27;</span>).<span class=\"property\">innerHTML</span> = <span class=\"string\">&#x27;pri2:&#x27;</span> + val;</span><br><span class=\"line\">    <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;.total&#x27;</span>).<span class=\"property\">innerHTML</span> = <span class=\"string\">&#x27;total:&#x27;</span> + (val + data.<span class=\"property\">pri1</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Vuewatcher</li>\n</ul>\n<p></p>\n<p><img src=\"/5.gif\"></p>\n</li>\n<li><p>VueVue</p>\n</li>\n</ul>\n"},{"title":"webpack","date":"2021-05-25T09:24:34.000Z","description":"webpackv5.37.0,webpack","cover":"/img/cover_4.webp","_content":"## webpack 5.37.0 \n\n- \n\n  ```javascript\n  //main.js\n  import show from \"./tmp2\";\n  \n  show(123);\n  console.log(\"1111\");\n  ```\n\n- \n\n  ```javascript\n  //tmp2.js\n  export default function show(arg) {\n  \tconsole.log(\"show me!\");\n  \tconsole.log(`arg is ${arg}`);\n  }\n  ```\n\n- webpack.config.js\n\n  ```javascript\n  module.exports={\n      //\n      devtool:\"sourcce-map\"\n  }\n  ```\n\n- \n\n  ```javascript\n  /******/ (() => { // webpackBootstrap\n  /******/ \t\"use strict\";\n  /******/ \tvar __webpack_modules__ = ({\n  \n  /***/ \"./mySrc/js/tmp2.js\":\n  /*!**************************!*\\\n    !*** ./mySrc/js/tmp2.js ***!\n    \\**************************/\n  /***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n  \n  __webpack_require__.r(__webpack_exports__);\n  /* harmony export */ __webpack_require__.d(__webpack_exports__, {\n  /* harmony export */   \"default\": () => (/* binding */ show)\n  /* harmony export */ });\n  function show(arg) {\n      console.log(\"show me!\");\n      console.log(`arg is ${arg}`);\n  }\n  \n  \n  /***/ })\n  \n  /******/ \t});\n  /************************************************************************/\n  /******/ \t// The module cache\n  /******/ \tvar __webpack_module_cache__ = {};\n  /******/ \t\n  /******/ \t// The require function\n  /******/ \tfunction __webpack_require__(moduleId) {\n  /******/ \t\t// Check if module is in cache\n  /******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n  /******/ \t\tif (cachedModule !== undefined) {\n  /******/ \t\t\treturn cachedModule.exports;\n  /******/ \t\t}\n  /******/ \t\t// Create a new module (and put it into the cache)\n  /******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n  /******/ \t\t\t// no module.id needed\n  /******/ \t\t\t// no module.loaded needed\n  /******/ \t\t\texports: {}\n  /******/ \t\t};\n  /******/ \t\n  /******/ \t\t// Execute the module function\n  /******/ \t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n  /******/ \t\n  /******/ \t\t// Return the exports of the module\n  /******/ \t\treturn module.exports;\n  /******/ \t}\n  /******/ \t\n  /************************************************************************/\n  /******/ \t/* webpack/runtime/define property getters */\n  /******/ \t(() => {\n  /******/ \t\t// define getter functions for harmony exports\n  /******/ \t\t__webpack_require__.d = (exports, definition) => {\n  /******/ \t\t\tfor(var key in definition) {\n  /******/ \t\t\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n  /******/ \t\t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n  /******/ \t\t\t\t}\n  /******/ \t\t\t}\n  /******/ \t\t};\n  /******/ \t})();\n  /******/ \t\n  /******/ \t/* webpack/runtime/hasOwnProperty shorthand */\n  /******/ \t(() => {\n  /******/ \t\t__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))\n  /******/ \t})();\n  /******/ \t\n  /******/ \t/* webpack/runtime/make namespace object */\n  /******/ \t(() => {\n  /******/ \t\t// define __esModule on exports\n  /******/ \t\t__webpack_require__.r = (exports) => {\n  /******/ \t\t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n  /******/ \t\t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n  /******/ \t\t\t}\n  /******/ \t\t\tObject.defineProperty(exports, '__esModule', { value: true });\n  /******/ \t\t};\n  /******/ \t})();\n  /******/ \t\n  /************************************************************************/\n  var __webpack_exports__ = {};\n  // This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.\n  (() => {\n  /*!**************************!*\\\n    !*** ./mySrc/js/main.js ***!\n    \\**************************/\n  __webpack_require__.r(__webpack_exports__);\n  /* harmony import */ var _tmp2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tmp2 */ \"./mySrc/js/tmp2.js\");\n  \n  (0,_tmp2__WEBPACK_IMPORTED_MODULE_0__.default)(123);\n  console.log(\"1111\");\n  \n  })();\n  \n  /******/ })()\n  ;\n  //# sourceMappingURL=build.js.map\n  ```\n  \n  - \n\n### \n\n- \n- \n- \n- \n\n### __webpack_require\\_\\_\n\n```javascript\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n```\n\n- \n\n  ```javascript\n  var __webpack_module_cache__ = {}; //\n  //...\n  var cachedModule = __webpack_module_cache__[moduleId]; //\n  if (cachedModule !== undefined) {\n      return cachedModule.exports;//\n  }\n  ```\n\n  - \n\n- require \n\n  ```javascript\n  function __webpack_require__(moduleId) {\n      // ...\n      // \n      var module = (__webpack_module_cache__[moduleId] = {\n          //\n          exports: {},\n      });\n  \n      // \n      __webpack_modules__[moduleId](module, module.exports, __webpack_require__);//module\n  \n      // \n      return module.exports;\n  }\n  ```\n\n  - commonjsES6 module\n\n### \\__webpack_require\\_\\_\n\n- hasOwnProperty  \\__webpack_require\\_\\_.o\n\n  ```javascript\n  (() => {\n      __webpack_require__.o = (obj, prop) =>\n      Object.prototype.hasOwnProperty.call(obj, prop);\n  })();\n  ```\n\n  - \n\n- ** \\__webpack_require\\_\\_.d**\n\n  - Commonjs\n\n  ```javascript\n  (() => {\n      // exports\n      __webpack_require__.d = (exports, definition) => {//exports\n          for (var key in definition) {\n              if (\n                  __webpack_require__.o(definition, key) &&\n                  !__webpack_require__.o(exports, key)\n              ) //\n              {\n                  Object.defineProperty(exports, key, {\n                      enumerable: true,\n                      get: definition[key],\n                  });//exportsgettermodule.exportsget\n              }\n          }\n      };\n  })();\n  ```\n\n  - \n\n-  \\__webpack_require\\_\\_.r\n\n  ```javascript\n  (() => {\n      // \n      __webpack_require__.r = (exports) => {\n          if (typeof Symbol !== \"undefined\" && Symbol.toStringTag) {//Symbol.toStringTagtypeof\n              Object.defineProperty(exports, Symbol.toStringTag, { value: \"Module\" });\n          }\n          Object.defineProperty(exports, \"__esModule\", { value: true });//Symbol\n      };\n  })();\n  ```\n\n### \n\n- main.jswebpack5\n\n  ```javascript\n  var __webpack_modules__ = {\n      /***/ \"./mySrc/js/tmp2.js\"://,,\n      /*!**************************!*\\\n    !*** ./mySrc/js/tmp2.js ***!\n    \\**************************/\n      /***/ (\n          __unused_webpack_module,\n          __webpack_exports__,\n          __webpack_require__\n      ) => {\n          __webpack_require__.r(__webpack_exports__);//\n          /* harmony export */ __webpack_require__.d(__webpack_exports__, {\n              /* harmony export */ default: () => /* binding */ show,\n              /* harmony export */\n          });//module.exports\n          //\n          function show(arg) {\n              console.log(\"show me!\");\n              console.log(`arg is ${arg}`);\n          }\n  \n          /***/\n      },\n  };\n  ```\n\n### \n\n```javascript\n(() => {\n    /*!**************************!*\\\n  !*** ./mySrc/js/main.js ***!\n  \\**************************/\n    /* harmony import */ var _tmp2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\n        /*! ./tmp2 */ \"./mySrc/js/tmp2.js\"\n    );//__webpack_require__requiretmp2\n\n    (0, _tmp2__WEBPACK_IMPORTED_MODULE_0__.default)(123);//tmp2show\n    console.log(\"1111\");//\n})();\n```\n\n-  \\__webpack_require\\_\\_ \n\n\n\n\n","source":"_posts/webpackOutFileAnalyes.md","raw":"---\ntitle: webpack\ndate: 2021/5/25 17:24:34\ntags:  \n- webpack\ncategories:\n- javascript\ndescription: webpackv5.37.0,webpack\ncover: /img/cover_4.webp\n\n---\n## webpack 5.37.0 \n\n- \n\n  ```javascript\n  //main.js\n  import show from \"./tmp2\";\n  \n  show(123);\n  console.log(\"1111\");\n  ```\n\n- \n\n  ```javascript\n  //tmp2.js\n  export default function show(arg) {\n  \tconsole.log(\"show me!\");\n  \tconsole.log(`arg is ${arg}`);\n  }\n  ```\n\n- webpack.config.js\n\n  ```javascript\n  module.exports={\n      //\n      devtool:\"sourcce-map\"\n  }\n  ```\n\n- \n\n  ```javascript\n  /******/ (() => { // webpackBootstrap\n  /******/ \t\"use strict\";\n  /******/ \tvar __webpack_modules__ = ({\n  \n  /***/ \"./mySrc/js/tmp2.js\":\n  /*!**************************!*\\\n    !*** ./mySrc/js/tmp2.js ***!\n    \\**************************/\n  /***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n  \n  __webpack_require__.r(__webpack_exports__);\n  /* harmony export */ __webpack_require__.d(__webpack_exports__, {\n  /* harmony export */   \"default\": () => (/* binding */ show)\n  /* harmony export */ });\n  function show(arg) {\n      console.log(\"show me!\");\n      console.log(`arg is ${arg}`);\n  }\n  \n  \n  /***/ })\n  \n  /******/ \t});\n  /************************************************************************/\n  /******/ \t// The module cache\n  /******/ \tvar __webpack_module_cache__ = {};\n  /******/ \t\n  /******/ \t// The require function\n  /******/ \tfunction __webpack_require__(moduleId) {\n  /******/ \t\t// Check if module is in cache\n  /******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n  /******/ \t\tif (cachedModule !== undefined) {\n  /******/ \t\t\treturn cachedModule.exports;\n  /******/ \t\t}\n  /******/ \t\t// Create a new module (and put it into the cache)\n  /******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n  /******/ \t\t\t// no module.id needed\n  /******/ \t\t\t// no module.loaded needed\n  /******/ \t\t\texports: {}\n  /******/ \t\t};\n  /******/ \t\n  /******/ \t\t// Execute the module function\n  /******/ \t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n  /******/ \t\n  /******/ \t\t// Return the exports of the module\n  /******/ \t\treturn module.exports;\n  /******/ \t}\n  /******/ \t\n  /************************************************************************/\n  /******/ \t/* webpack/runtime/define property getters */\n  /******/ \t(() => {\n  /******/ \t\t// define getter functions for harmony exports\n  /******/ \t\t__webpack_require__.d = (exports, definition) => {\n  /******/ \t\t\tfor(var key in definition) {\n  /******/ \t\t\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n  /******/ \t\t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n  /******/ \t\t\t\t}\n  /******/ \t\t\t}\n  /******/ \t\t};\n  /******/ \t})();\n  /******/ \t\n  /******/ \t/* webpack/runtime/hasOwnProperty shorthand */\n  /******/ \t(() => {\n  /******/ \t\t__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))\n  /******/ \t})();\n  /******/ \t\n  /******/ \t/* webpack/runtime/make namespace object */\n  /******/ \t(() => {\n  /******/ \t\t// define __esModule on exports\n  /******/ \t\t__webpack_require__.r = (exports) => {\n  /******/ \t\t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n  /******/ \t\t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n  /******/ \t\t\t}\n  /******/ \t\t\tObject.defineProperty(exports, '__esModule', { value: true });\n  /******/ \t\t};\n  /******/ \t})();\n  /******/ \t\n  /************************************************************************/\n  var __webpack_exports__ = {};\n  // This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.\n  (() => {\n  /*!**************************!*\\\n    !*** ./mySrc/js/main.js ***!\n    \\**************************/\n  __webpack_require__.r(__webpack_exports__);\n  /* harmony import */ var _tmp2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tmp2 */ \"./mySrc/js/tmp2.js\");\n  \n  (0,_tmp2__WEBPACK_IMPORTED_MODULE_0__.default)(123);\n  console.log(\"1111\");\n  \n  })();\n  \n  /******/ })()\n  ;\n  //# sourceMappingURL=build.js.map\n  ```\n  \n  - \n\n### \n\n- \n- \n- \n- \n\n### __webpack_require\\_\\_\n\n```javascript\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n```\n\n- \n\n  ```javascript\n  var __webpack_module_cache__ = {}; //\n  //...\n  var cachedModule = __webpack_module_cache__[moduleId]; //\n  if (cachedModule !== undefined) {\n      return cachedModule.exports;//\n  }\n  ```\n\n  - \n\n- require \n\n  ```javascript\n  function __webpack_require__(moduleId) {\n      // ...\n      // \n      var module = (__webpack_module_cache__[moduleId] = {\n          //\n          exports: {},\n      });\n  \n      // \n      __webpack_modules__[moduleId](module, module.exports, __webpack_require__);//module\n  \n      // \n      return module.exports;\n  }\n  ```\n\n  - commonjsES6 module\n\n### \\__webpack_require\\_\\_\n\n- hasOwnProperty  \\__webpack_require\\_\\_.o\n\n  ```javascript\n  (() => {\n      __webpack_require__.o = (obj, prop) =>\n      Object.prototype.hasOwnProperty.call(obj, prop);\n  })();\n  ```\n\n  - \n\n- ** \\__webpack_require\\_\\_.d**\n\n  - Commonjs\n\n  ```javascript\n  (() => {\n      // exports\n      __webpack_require__.d = (exports, definition) => {//exports\n          for (var key in definition) {\n              if (\n                  __webpack_require__.o(definition, key) &&\n                  !__webpack_require__.o(exports, key)\n              ) //\n              {\n                  Object.defineProperty(exports, key, {\n                      enumerable: true,\n                      get: definition[key],\n                  });//exportsgettermodule.exportsget\n              }\n          }\n      };\n  })();\n  ```\n\n  - \n\n-  \\__webpack_require\\_\\_.r\n\n  ```javascript\n  (() => {\n      // \n      __webpack_require__.r = (exports) => {\n          if (typeof Symbol !== \"undefined\" && Symbol.toStringTag) {//Symbol.toStringTagtypeof\n              Object.defineProperty(exports, Symbol.toStringTag, { value: \"Module\" });\n          }\n          Object.defineProperty(exports, \"__esModule\", { value: true });//Symbol\n      };\n  })();\n  ```\n\n### \n\n- main.jswebpack5\n\n  ```javascript\n  var __webpack_modules__ = {\n      /***/ \"./mySrc/js/tmp2.js\"://,,\n      /*!**************************!*\\\n    !*** ./mySrc/js/tmp2.js ***!\n    \\**************************/\n      /***/ (\n          __unused_webpack_module,\n          __webpack_exports__,\n          __webpack_require__\n      ) => {\n          __webpack_require__.r(__webpack_exports__);//\n          /* harmony export */ __webpack_require__.d(__webpack_exports__, {\n              /* harmony export */ default: () => /* binding */ show,\n              /* harmony export */\n          });//module.exports\n          //\n          function show(arg) {\n              console.log(\"show me!\");\n              console.log(`arg is ${arg}`);\n          }\n  \n          /***/\n      },\n  };\n  ```\n\n### \n\n```javascript\n(() => {\n    /*!**************************!*\\\n  !*** ./mySrc/js/main.js ***!\n  \\**************************/\n    /* harmony import */ var _tmp2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\n        /*! ./tmp2 */ \"./mySrc/js/tmp2.js\"\n    );//__webpack_require__requiretmp2\n\n    (0, _tmp2__WEBPACK_IMPORTED_MODULE_0__.default)(123);//tmp2show\n    console.log(\"1111\");//\n})();\n```\n\n-  \\__webpack_require\\_\\_ \n\n\n\n\n","slug":"webpackOutFileAnalyes","published":1,"updated":"2022-04-11T08:31:31.666Z","_id":"ckvhtdmbg0001rgo38pjz7t9a","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"webpack-5-37-0-\"><a href=\"#webpack-5-37-0-\" class=\"headerlink\" title=\"webpack 5.37.0 \"></a>webpack 5.37.0 </h2><ul>\n<li><p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//main.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> show <span class=\"keyword\">from</span> <span class=\"string\">&quot;./tmp2&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">show</span>(<span class=\"number\">123</span>);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;1111&quot;</span>);</span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//tmp2.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">function</span> <span class=\"title function_\">show</span>(<span class=\"params\">arg</span>) &#123;</span><br><span class=\"line\">\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;show me!&quot;</span>);</span><br><span class=\"line\">\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">`arg is <span class=\"subst\">$&#123;arg&#125;</span>`</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>webpack.config.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span>=&#123;</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"attr\">devtool</span>:<span class=\"string\">&quot;sourcce-map&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/******/</span> (<span class=\"function\">() =&gt;</span> &#123; <span class=\"comment\">// webpackBootstrap</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t<span class=\"string\">&quot;use strict&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t<span class=\"keyword\">var</span> __webpack_modules__ = (&#123;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/***/</span> <span class=\"string\">&quot;./mySrc/js/tmp2.js&quot;</span>:</span><br><span class=\"line\"><span class=\"comment\">/*!**************************!*\\</span></span><br><span class=\"line\"><span class=\"comment\">  !*** ./mySrc/js/tmp2.js ***!</span></span><br><span class=\"line\"><span class=\"comment\">  \\**************************/</span></span><br><span class=\"line\"><span class=\"comment\">/***/</span> (<span class=\"function\">(<span class=\"params\">__unused_webpack_module, __webpack_exports__, __webpack_require__</span>) =&gt;</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">__webpack_require__.<span class=\"title function_\">r</span>(__webpack_exports__);</span><br><span class=\"line\"><span class=\"comment\">/* harmony export */</span> __webpack_require__.<span class=\"title function_\">d</span>(__webpack_exports__, &#123;</span><br><span class=\"line\"><span class=\"comment\">/* harmony export */</span>   <span class=\"string\">&quot;default&quot;</span>: <span class=\"function\">() =&gt;</span> (<span class=\"comment\">/* binding */</span> show)</span><br><span class=\"line\"><span class=\"comment\">/* harmony export */</span> &#125;);</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">show</span>(<span class=\"params\">arg</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;show me!&quot;</span>);</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">`arg is <span class=\"subst\">$&#123;arg&#125;</span>`</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/***/</span> &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t&#125;);</span><br><span class=\"line\"><span class=\"comment\">/************************************************************************/</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t<span class=\"comment\">// The module cache</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t<span class=\"keyword\">var</span> __webpack_module_cache__ = &#123;&#125;;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t<span class=\"comment\">// The require function</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t<span class=\"keyword\">function</span> <span class=\"title function_\">__webpack_require__</span>(<span class=\"params\">moduleId</span>) &#123;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"comment\">// Check if module is in cache</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"keyword\">var</span> cachedModule = __webpack_module_cache__[moduleId];</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"keyword\">if</span> (cachedModule !== <span class=\"literal\">undefined</span>) &#123;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t\t<span class=\"keyword\">return</span> cachedModule.<span class=\"property\">exports</span>;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t&#125;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"comment\">// Create a new module (and put it into the cache)</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"keyword\">var</span> <span class=\"variable language_\">module</span> = __webpack_module_cache__[moduleId] = &#123;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t\t<span class=\"comment\">// no module.id needed</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t\t<span class=\"comment\">// no module.loaded needed</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t\t<span class=\"attr\">exports</span>: &#123;&#125;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t&#125;;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"comment\">// Execute the module function</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t__webpack_modules__[moduleId](<span class=\"variable language_\">module</span>, <span class=\"variable language_\">module</span>.<span class=\"property\">exports</span>, __webpack_require__);</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"comment\">// Return the exports of the module</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"keyword\">return</span> <span class=\"variable language_\">module</span>.<span class=\"property\">exports</span>;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t&#125;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t</span><br><span class=\"line\"><span class=\"comment\">/************************************************************************/</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t<span class=\"comment\">/* webpack/runtime/define property getters */</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"comment\">// define getter functions for harmony exports</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t__webpack_require__.<span class=\"property\">d</span> = <span class=\"function\">(<span class=\"params\"><span class=\"built_in\">exports</span>, definition</span>) =&gt;</span> &#123;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t\t<span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> key <span class=\"keyword\">in</span> definition) &#123;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t\t\t<span class=\"keyword\">if</span>(__webpack_require__.<span class=\"title function_\">o</span>(definition, key) &amp;&amp; !__webpack_require__.<span class=\"title function_\">o</span>(<span class=\"built_in\">exports</span>, key)) &#123;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t\t\t\t<span class=\"title class_\">Object</span>.<span class=\"title function_\">defineProperty</span>(<span class=\"built_in\">exports</span>, key, &#123; <span class=\"attr\">enumerable</span>: <span class=\"literal\">true</span>, <span class=\"attr\">get</span>: definition[key] &#125;);</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t\t\t&#125;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t\t&#125;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t&#125;;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t&#125;)();</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t<span class=\"comment\">/* webpack/runtime/hasOwnProperty shorthand */</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t__webpack_require__.<span class=\"property\">o</span> = <span class=\"function\">(<span class=\"params\">obj, prop</span>) =&gt;</span> (<span class=\"title class_\">Object</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">hasOwnProperty</span>.<span class=\"title function_\">call</span>(obj, prop))</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t&#125;)();</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t<span class=\"comment\">/* webpack/runtime/make namespace object */</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"comment\">// define __esModule on exports</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t__webpack_require__.<span class=\"property\">r</span> = <span class=\"function\">(<span class=\"params\"><span class=\"built_in\">exports</span></span>) =&gt;</span> &#123;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t\t<span class=\"keyword\">if</span>(<span class=\"keyword\">typeof</span> <span class=\"title class_\">Symbol</span> !== <span class=\"string\">&#x27;undefined&#x27;</span> &amp;&amp; <span class=\"title class_\">Symbol</span>.<span class=\"property\">toStringTag</span>) &#123;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t\t\t<span class=\"title class_\">Object</span>.<span class=\"title function_\">defineProperty</span>(<span class=\"built_in\">exports</span>, <span class=\"title class_\">Symbol</span>.<span class=\"property\">toStringTag</span>, &#123; <span class=\"attr\">value</span>: <span class=\"string\">&#x27;Module&#x27;</span> &#125;);</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t\t&#125;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t\t<span class=\"title class_\">Object</span>.<span class=\"title function_\">defineProperty</span>(<span class=\"built_in\">exports</span>, <span class=\"string\">&#x27;__esModule&#x27;</span>, &#123; <span class=\"attr\">value</span>: <span class=\"literal\">true</span> &#125;);</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t&#125;;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t&#125;)();</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t</span><br><span class=\"line\"><span class=\"comment\">/************************************************************************/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> __webpack_exports__ = &#123;&#125;;</span><br><span class=\"line\"><span class=\"comment\">// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.</span></span><br><span class=\"line\">(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\"><span class=\"comment\">/*!**************************!*\\</span></span><br><span class=\"line\"><span class=\"comment\">  !*** ./mySrc/js/main.js ***!</span></span><br><span class=\"line\"><span class=\"comment\">  \\**************************/</span></span><br><span class=\"line\">__webpack_require__.<span class=\"title function_\">r</span>(__webpack_exports__);</span><br><span class=\"line\"><span class=\"comment\">/* harmony import */</span> <span class=\"keyword\">var</span> _tmp2__WEBPACK_IMPORTED_MODULE_0__ = <span class=\"title function_\">__webpack_require__</span>(<span class=\"comment\">/*! ./tmp2 */</span> <span class=\"string\">&quot;./mySrc/js/tmp2.js&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">(<span class=\"number\">0</span>,_tmp2__WEBPACK_IMPORTED_MODULE_0__.<span class=\"property\">default</span>)(<span class=\"number\">123</span>);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;1111&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;)();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/******/</span> &#125;)()</span><br><span class=\"line\">;</span><br><span class=\"line\"><span class=\"comment\">//# sourceMappingURL=build.js.map</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<h3 id=\"webpack-require-\"><a href=\"#webpack-require-\" class=\"headerlink\" title=\"__webpack_require__\"></a>__webpack_require__</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/******/</span> \t<span class=\"comment\">// The module cache</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t<span class=\"keyword\">var</span> __webpack_module_cache__ = &#123;&#125;;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t<span class=\"comment\">// The require function</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t<span class=\"keyword\">function</span> <span class=\"title function_\">__webpack_require__</span>(<span class=\"params\">moduleId</span>) &#123;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"comment\">// Check if module is in cache</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"keyword\">var</span> cachedModule = __webpack_module_cache__[moduleId];</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"keyword\">if</span> (cachedModule !== <span class=\"literal\">undefined</span>) &#123;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t\t<span class=\"keyword\">return</span> cachedModule.<span class=\"property\">exports</span>;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t&#125;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"comment\">// Create a new module (and put it into the cache)</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"keyword\">var</span> <span class=\"variable language_\">module</span> = __webpack_module_cache__[moduleId] = &#123;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t\t<span class=\"comment\">// no module.id needed</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t\t<span class=\"comment\">// no module.loaded needed</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t\t<span class=\"attr\">exports</span>: &#123;&#125;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t&#125;;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"comment\">// Execute the module function</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t__webpack_modules__[moduleId](<span class=\"variable language_\">module</span>, <span class=\"variable language_\">module</span>.<span class=\"property\">exports</span>, __webpack_require__);</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"comment\">// Return the exports of the module</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"keyword\">return</span> <span class=\"variable language_\">module</span>.<span class=\"property\">exports</span>;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> __webpack_module_cache__ = &#123;&#125;; <span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"comment\">//...</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> cachedModule = __webpack_module_cache__[moduleId]; <span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (cachedModule !== <span class=\"literal\">undefined</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> cachedModule.<span class=\"property\">exports</span>;<span class=\"comment\">//</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li></li>\n</ul>\n</li>\n<li><p>require </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">__webpack_require__</span>(<span class=\"params\">moduleId</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> <span class=\"variable language_\">module</span> = (__webpack_module_cache__[moduleId] = &#123;</span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"attr\">exports</span>: &#123;&#125;,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    __webpack_modules__[moduleId](<span class=\"variable language_\">module</span>, <span class=\"variable language_\">module</span>.<span class=\"property\">exports</span>, __webpack_require__);<span class=\"comment\">//module</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable language_\">module</span>.<span class=\"property\">exports</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>commonjsES6 module</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"webpack-require-\"><a href=\"#webpack-require-\" class=\"headerlink\" title=\"__webpack_require__\"></a>__webpack_require__</h3><ul>\n<li><p>hasOwnProperty  __webpack_require__.o</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    __webpack_require__.<span class=\"property\">o</span> = <span class=\"function\">(<span class=\"params\">obj, prop</span>) =&gt;</span></span><br><span class=\"line\">    <span class=\"title class_\">Object</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">hasOwnProperty</span>.<span class=\"title function_\">call</span>(obj, prop);</span><br><span class=\"line\">&#125;)();</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li></li>\n</ul>\n</li>\n<li><p><strong> __webpack_require__.d</strong></p>\n<ul>\n<li>Commonjs</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// exports</span></span><br><span class=\"line\">    __webpack_require__.<span class=\"property\">d</span> = <span class=\"function\">(<span class=\"params\"><span class=\"built_in\">exports</span>, definition</span>) =&gt;</span> &#123;<span class=\"comment\">//exports</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> key <span class=\"keyword\">in</span> definition) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (</span><br><span class=\"line\">                __webpack_require__.<span class=\"title function_\">o</span>(definition, key) &amp;&amp;</span><br><span class=\"line\">                !__webpack_require__.<span class=\"title function_\">o</span>(<span class=\"built_in\">exports</span>, key)</span><br><span class=\"line\">            ) <span class=\"comment\">//</span></span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"title class_\">Object</span>.<span class=\"title function_\">defineProperty</span>(<span class=\"built_in\">exports</span>, key, &#123;</span><br><span class=\"line\">                    <span class=\"attr\">enumerable</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">                    <span class=\"attr\">get</span>: definition[key],</span><br><span class=\"line\">                &#125;);<span class=\"comment\">//exportsgettermodule.exportsget</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">&#125;)();</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li></li>\n</ul>\n</li>\n<li><p> __webpack_require__.r</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    __webpack_require__.<span class=\"property\">r</span> = <span class=\"function\">(<span class=\"params\"><span class=\"built_in\">exports</span></span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"title class_\">Symbol</span> !== <span class=\"string\">&quot;undefined&quot;</span> &amp;&amp; <span class=\"title class_\">Symbol</span>.<span class=\"property\">toStringTag</span>) &#123;<span class=\"comment\">//Symbol.toStringTagtypeof</span></span><br><span class=\"line\">            <span class=\"title class_\">Object</span>.<span class=\"title function_\">defineProperty</span>(<span class=\"built_in\">exports</span>, <span class=\"title class_\">Symbol</span>.<span class=\"property\">toStringTag</span>, &#123; <span class=\"attr\">value</span>: <span class=\"string\">&quot;Module&quot;</span> &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"title class_\">Object</span>.<span class=\"title function_\">defineProperty</span>(<span class=\"built_in\">exports</span>, <span class=\"string\">&quot;__esModule&quot;</span>, &#123; <span class=\"attr\">value</span>: <span class=\"literal\">true</span> &#125;);<span class=\"comment\">//Symbol</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">&#125;)();</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><p>main.jswebpack5</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> __webpack_modules__ = &#123;</span><br><span class=\"line\">    <span class=\"comment\">/***/</span> <span class=\"string\">&quot;./mySrc/js/tmp2.js&quot;</span>:<span class=\"comment\">//,,</span></span><br><span class=\"line\">    <span class=\"comment\">/*!**************************!*\\</span></span><br><span class=\"line\"><span class=\"comment\">  !*** ./mySrc/js/tmp2.js ***!</span></span><br><span class=\"line\"><span class=\"comment\">  \\**************************/</span></span><br><span class=\"line\">    <span class=\"comment\">/***/</span> <span class=\"function\">(<span class=\"params\"></span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        __unused_webpack_module,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        __webpack_exports__,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        __webpack_require__</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    </span>) =&gt;</span> &#123;</span><br><span class=\"line\">        __webpack_require__.<span class=\"title function_\">r</span>(__webpack_exports__);<span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"comment\">/* harmony export */</span> __webpack_require__.<span class=\"title function_\">d</span>(__webpack_exports__, &#123;</span><br><span class=\"line\">            <span class=\"comment\">/* harmony export */</span> <span class=\"attr\">default</span>: <span class=\"function\">() =&gt;</span> <span class=\"comment\">/* binding */</span> show,</span><br><span class=\"line\">            <span class=\"comment\">/* harmony export */</span></span><br><span class=\"line\">        &#125;);<span class=\"comment\">//module.exports</span></span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"keyword\">function</span> <span class=\"title function_\">show</span>(<span class=\"params\">arg</span>) &#123;</span><br><span class=\"line\">            <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;show me!&quot;</span>);</span><br><span class=\"line\">            <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">`arg is <span class=\"subst\">$&#123;arg&#125;</span>`</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/***/</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/*!**************************!*\\</span></span><br><span class=\"line\"><span class=\"comment\">  !*** ./mySrc/js/main.js ***!</span></span><br><span class=\"line\"><span class=\"comment\">  \\**************************/</span></span><br><span class=\"line\">    <span class=\"comment\">/* harmony import */</span> <span class=\"keyword\">var</span> _tmp2__WEBPACK_IMPORTED_MODULE_0__ = <span class=\"title function_\">__webpack_require__</span>(</span><br><span class=\"line\">        <span class=\"comment\">/*! ./tmp2 */</span> <span class=\"string\">&quot;./mySrc/js/tmp2.js&quot;</span></span><br><span class=\"line\">    );<span class=\"comment\">//__webpack_require__requiretmp2</span></span><br><span class=\"line\"></span><br><span class=\"line\">    (<span class=\"number\">0</span>, _tmp2__WEBPACK_IMPORTED_MODULE_0__.<span class=\"property\">default</span>)(<span class=\"number\">123</span>);<span class=\"comment\">//tmp2show</span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;1111&quot;</span>);<span class=\"comment\">//</span></span><br><span class=\"line\">&#125;)();</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li> __webpack_require__ </li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"webpack-5-37-0-\"><a href=\"#webpack-5-37-0-\" class=\"headerlink\" title=\"webpack 5.37.0 \"></a>webpack 5.37.0 </h2><ul>\n<li><p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//main.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> show <span class=\"keyword\">from</span> <span class=\"string\">&quot;./tmp2&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">show</span>(<span class=\"number\">123</span>);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;1111&quot;</span>);</span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//tmp2.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">function</span> <span class=\"title function_\">show</span>(<span class=\"params\">arg</span>) &#123;</span><br><span class=\"line\">\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;show me!&quot;</span>);</span><br><span class=\"line\">\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">`arg is <span class=\"subst\">$&#123;arg&#125;</span>`</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>webpack.config.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span>=&#123;</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"attr\">devtool</span>:<span class=\"string\">&quot;sourcce-map&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/******/</span> (<span class=\"function\">() =&gt;</span> &#123; <span class=\"comment\">// webpackBootstrap</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t<span class=\"string\">&quot;use strict&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t<span class=\"keyword\">var</span> __webpack_modules__ = (&#123;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/***/</span> <span class=\"string\">&quot;./mySrc/js/tmp2.js&quot;</span>:</span><br><span class=\"line\"><span class=\"comment\">/*!**************************!*\\</span></span><br><span class=\"line\"><span class=\"comment\">  !*** ./mySrc/js/tmp2.js ***!</span></span><br><span class=\"line\"><span class=\"comment\">  \\**************************/</span></span><br><span class=\"line\"><span class=\"comment\">/***/</span> (<span class=\"function\">(<span class=\"params\">__unused_webpack_module, __webpack_exports__, __webpack_require__</span>) =&gt;</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">__webpack_require__.<span class=\"title function_\">r</span>(__webpack_exports__);</span><br><span class=\"line\"><span class=\"comment\">/* harmony export */</span> __webpack_require__.<span class=\"title function_\">d</span>(__webpack_exports__, &#123;</span><br><span class=\"line\"><span class=\"comment\">/* harmony export */</span>   <span class=\"string\">&quot;default&quot;</span>: <span class=\"function\">() =&gt;</span> (<span class=\"comment\">/* binding */</span> show)</span><br><span class=\"line\"><span class=\"comment\">/* harmony export */</span> &#125;);</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">show</span>(<span class=\"params\">arg</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;show me!&quot;</span>);</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">`arg is <span class=\"subst\">$&#123;arg&#125;</span>`</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/***/</span> &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t&#125;);</span><br><span class=\"line\"><span class=\"comment\">/************************************************************************/</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t<span class=\"comment\">// The module cache</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t<span class=\"keyword\">var</span> __webpack_module_cache__ = &#123;&#125;;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t<span class=\"comment\">// The require function</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t<span class=\"keyword\">function</span> <span class=\"title function_\">__webpack_require__</span>(<span class=\"params\">moduleId</span>) &#123;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"comment\">// Check if module is in cache</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"keyword\">var</span> cachedModule = __webpack_module_cache__[moduleId];</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"keyword\">if</span> (cachedModule !== <span class=\"literal\">undefined</span>) &#123;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t\t<span class=\"keyword\">return</span> cachedModule.<span class=\"property\">exports</span>;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t&#125;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"comment\">// Create a new module (and put it into the cache)</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"keyword\">var</span> <span class=\"variable language_\">module</span> = __webpack_module_cache__[moduleId] = &#123;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t\t<span class=\"comment\">// no module.id needed</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t\t<span class=\"comment\">// no module.loaded needed</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t\t<span class=\"attr\">exports</span>: &#123;&#125;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t&#125;;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"comment\">// Execute the module function</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t__webpack_modules__[moduleId](<span class=\"variable language_\">module</span>, <span class=\"variable language_\">module</span>.<span class=\"property\">exports</span>, __webpack_require__);</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"comment\">// Return the exports of the module</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"keyword\">return</span> <span class=\"variable language_\">module</span>.<span class=\"property\">exports</span>;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t&#125;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t</span><br><span class=\"line\"><span class=\"comment\">/************************************************************************/</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t<span class=\"comment\">/* webpack/runtime/define property getters */</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"comment\">// define getter functions for harmony exports</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t__webpack_require__.<span class=\"property\">d</span> = <span class=\"function\">(<span class=\"params\"><span class=\"built_in\">exports</span>, definition</span>) =&gt;</span> &#123;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t\t<span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> key <span class=\"keyword\">in</span> definition) &#123;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t\t\t<span class=\"keyword\">if</span>(__webpack_require__.<span class=\"title function_\">o</span>(definition, key) &amp;&amp; !__webpack_require__.<span class=\"title function_\">o</span>(<span class=\"built_in\">exports</span>, key)) &#123;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t\t\t\t<span class=\"title class_\">Object</span>.<span class=\"title function_\">defineProperty</span>(<span class=\"built_in\">exports</span>, key, &#123; <span class=\"attr\">enumerable</span>: <span class=\"literal\">true</span>, <span class=\"attr\">get</span>: definition[key] &#125;);</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t\t\t&#125;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t\t&#125;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t&#125;;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t&#125;)();</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t<span class=\"comment\">/* webpack/runtime/hasOwnProperty shorthand */</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t__webpack_require__.<span class=\"property\">o</span> = <span class=\"function\">(<span class=\"params\">obj, prop</span>) =&gt;</span> (<span class=\"title class_\">Object</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">hasOwnProperty</span>.<span class=\"title function_\">call</span>(obj, prop))</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t&#125;)();</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t<span class=\"comment\">/* webpack/runtime/make namespace object */</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"comment\">// define __esModule on exports</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t__webpack_require__.<span class=\"property\">r</span> = <span class=\"function\">(<span class=\"params\"><span class=\"built_in\">exports</span></span>) =&gt;</span> &#123;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t\t<span class=\"keyword\">if</span>(<span class=\"keyword\">typeof</span> <span class=\"title class_\">Symbol</span> !== <span class=\"string\">&#x27;undefined&#x27;</span> &amp;&amp; <span class=\"title class_\">Symbol</span>.<span class=\"property\">toStringTag</span>) &#123;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t\t\t<span class=\"title class_\">Object</span>.<span class=\"title function_\">defineProperty</span>(<span class=\"built_in\">exports</span>, <span class=\"title class_\">Symbol</span>.<span class=\"property\">toStringTag</span>, &#123; <span class=\"attr\">value</span>: <span class=\"string\">&#x27;Module&#x27;</span> &#125;);</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t\t&#125;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t\t<span class=\"title class_\">Object</span>.<span class=\"title function_\">defineProperty</span>(<span class=\"built_in\">exports</span>, <span class=\"string\">&#x27;__esModule&#x27;</span>, &#123; <span class=\"attr\">value</span>: <span class=\"literal\">true</span> &#125;);</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t&#125;;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t&#125;)();</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t</span><br><span class=\"line\"><span class=\"comment\">/************************************************************************/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> __webpack_exports__ = &#123;&#125;;</span><br><span class=\"line\"><span class=\"comment\">// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.</span></span><br><span class=\"line\">(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\"><span class=\"comment\">/*!**************************!*\\</span></span><br><span class=\"line\"><span class=\"comment\">  !*** ./mySrc/js/main.js ***!</span></span><br><span class=\"line\"><span class=\"comment\">  \\**************************/</span></span><br><span class=\"line\">__webpack_require__.<span class=\"title function_\">r</span>(__webpack_exports__);</span><br><span class=\"line\"><span class=\"comment\">/* harmony import */</span> <span class=\"keyword\">var</span> _tmp2__WEBPACK_IMPORTED_MODULE_0__ = <span class=\"title function_\">__webpack_require__</span>(<span class=\"comment\">/*! ./tmp2 */</span> <span class=\"string\">&quot;./mySrc/js/tmp2.js&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">(<span class=\"number\">0</span>,_tmp2__WEBPACK_IMPORTED_MODULE_0__.<span class=\"property\">default</span>)(<span class=\"number\">123</span>);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;1111&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;)();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/******/</span> &#125;)()</span><br><span class=\"line\">;</span><br><span class=\"line\"><span class=\"comment\">//# sourceMappingURL=build.js.map</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<h3 id=\"webpack-require-\"><a href=\"#webpack-require-\" class=\"headerlink\" title=\"__webpack_require__\"></a>__webpack_require__</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/******/</span> \t<span class=\"comment\">// The module cache</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t<span class=\"keyword\">var</span> __webpack_module_cache__ = &#123;&#125;;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t<span class=\"comment\">// The require function</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t<span class=\"keyword\">function</span> <span class=\"title function_\">__webpack_require__</span>(<span class=\"params\">moduleId</span>) &#123;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"comment\">// Check if module is in cache</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"keyword\">var</span> cachedModule = __webpack_module_cache__[moduleId];</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"keyword\">if</span> (cachedModule !== <span class=\"literal\">undefined</span>) &#123;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t\t<span class=\"keyword\">return</span> cachedModule.<span class=\"property\">exports</span>;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t&#125;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"comment\">// Create a new module (and put it into the cache)</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"keyword\">var</span> <span class=\"variable language_\">module</span> = __webpack_module_cache__[moduleId] = &#123;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t\t<span class=\"comment\">// no module.id needed</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t\t<span class=\"comment\">// no module.loaded needed</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t\t<span class=\"attr\">exports</span>: &#123;&#125;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t&#125;;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"comment\">// Execute the module function</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t__webpack_modules__[moduleId](<span class=\"variable language_\">module</span>, <span class=\"variable language_\">module</span>.<span class=\"property\">exports</span>, __webpack_require__);</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"comment\">// Return the exports of the module</span></span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t\t<span class=\"keyword\">return</span> <span class=\"variable language_\">module</span>.<span class=\"property\">exports</span>;</span><br><span class=\"line\"><span class=\"comment\">/******/</span> \t&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> __webpack_module_cache__ = &#123;&#125;; <span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"comment\">//...</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> cachedModule = __webpack_module_cache__[moduleId]; <span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (cachedModule !== <span class=\"literal\">undefined</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> cachedModule.<span class=\"property\">exports</span>;<span class=\"comment\">//</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li></li>\n</ul>\n</li>\n<li><p>require </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">__webpack_require__</span>(<span class=\"params\">moduleId</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> <span class=\"variable language_\">module</span> = (__webpack_module_cache__[moduleId] = &#123;</span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"attr\">exports</span>: &#123;&#125;,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    __webpack_modules__[moduleId](<span class=\"variable language_\">module</span>, <span class=\"variable language_\">module</span>.<span class=\"property\">exports</span>, __webpack_require__);<span class=\"comment\">//module</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable language_\">module</span>.<span class=\"property\">exports</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>commonjsES6 module</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"webpack-require-\"><a href=\"#webpack-require-\" class=\"headerlink\" title=\"__webpack_require__\"></a>__webpack_require__</h3><ul>\n<li><p>hasOwnProperty  __webpack_require__.o</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    __webpack_require__.<span class=\"property\">o</span> = <span class=\"function\">(<span class=\"params\">obj, prop</span>) =&gt;</span></span><br><span class=\"line\">    <span class=\"title class_\">Object</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">hasOwnProperty</span>.<span class=\"title function_\">call</span>(obj, prop);</span><br><span class=\"line\">&#125;)();</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li></li>\n</ul>\n</li>\n<li><p><strong> __webpack_require__.d</strong></p>\n<ul>\n<li>Commonjs</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// exports</span></span><br><span class=\"line\">    __webpack_require__.<span class=\"property\">d</span> = <span class=\"function\">(<span class=\"params\"><span class=\"built_in\">exports</span>, definition</span>) =&gt;</span> &#123;<span class=\"comment\">//exports</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> key <span class=\"keyword\">in</span> definition) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (</span><br><span class=\"line\">                __webpack_require__.<span class=\"title function_\">o</span>(definition, key) &amp;&amp;</span><br><span class=\"line\">                !__webpack_require__.<span class=\"title function_\">o</span>(<span class=\"built_in\">exports</span>, key)</span><br><span class=\"line\">            ) <span class=\"comment\">//</span></span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"title class_\">Object</span>.<span class=\"title function_\">defineProperty</span>(<span class=\"built_in\">exports</span>, key, &#123;</span><br><span class=\"line\">                    <span class=\"attr\">enumerable</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">                    <span class=\"attr\">get</span>: definition[key],</span><br><span class=\"line\">                &#125;);<span class=\"comment\">//exportsgettermodule.exportsget</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">&#125;)();</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li></li>\n</ul>\n</li>\n<li><p> __webpack_require__.r</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    __webpack_require__.<span class=\"property\">r</span> = <span class=\"function\">(<span class=\"params\"><span class=\"built_in\">exports</span></span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"title class_\">Symbol</span> !== <span class=\"string\">&quot;undefined&quot;</span> &amp;&amp; <span class=\"title class_\">Symbol</span>.<span class=\"property\">toStringTag</span>) &#123;<span class=\"comment\">//Symbol.toStringTagtypeof</span></span><br><span class=\"line\">            <span class=\"title class_\">Object</span>.<span class=\"title function_\">defineProperty</span>(<span class=\"built_in\">exports</span>, <span class=\"title class_\">Symbol</span>.<span class=\"property\">toStringTag</span>, &#123; <span class=\"attr\">value</span>: <span class=\"string\">&quot;Module&quot;</span> &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"title class_\">Object</span>.<span class=\"title function_\">defineProperty</span>(<span class=\"built_in\">exports</span>, <span class=\"string\">&quot;__esModule&quot;</span>, &#123; <span class=\"attr\">value</span>: <span class=\"literal\">true</span> &#125;);<span class=\"comment\">//Symbol</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">&#125;)();</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><p>main.jswebpack5</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> __webpack_modules__ = &#123;</span><br><span class=\"line\">    <span class=\"comment\">/***/</span> <span class=\"string\">&quot;./mySrc/js/tmp2.js&quot;</span>:<span class=\"comment\">//,,</span></span><br><span class=\"line\">    <span class=\"comment\">/*!**************************!*\\</span></span><br><span class=\"line\"><span class=\"comment\">  !*** ./mySrc/js/tmp2.js ***!</span></span><br><span class=\"line\"><span class=\"comment\">  \\**************************/</span></span><br><span class=\"line\">    <span class=\"comment\">/***/</span> <span class=\"function\">(<span class=\"params\"></span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        __unused_webpack_module,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        __webpack_exports__,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        __webpack_require__</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    </span>) =&gt;</span> &#123;</span><br><span class=\"line\">        __webpack_require__.<span class=\"title function_\">r</span>(__webpack_exports__);<span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"comment\">/* harmony export */</span> __webpack_require__.<span class=\"title function_\">d</span>(__webpack_exports__, &#123;</span><br><span class=\"line\">            <span class=\"comment\">/* harmony export */</span> <span class=\"attr\">default</span>: <span class=\"function\">() =&gt;</span> <span class=\"comment\">/* binding */</span> show,</span><br><span class=\"line\">            <span class=\"comment\">/* harmony export */</span></span><br><span class=\"line\">        &#125;);<span class=\"comment\">//module.exports</span></span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"keyword\">function</span> <span class=\"title function_\">show</span>(<span class=\"params\">arg</span>) &#123;</span><br><span class=\"line\">            <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;show me!&quot;</span>);</span><br><span class=\"line\">            <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">`arg is <span class=\"subst\">$&#123;arg&#125;</span>`</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/***/</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/*!**************************!*\\</span></span><br><span class=\"line\"><span class=\"comment\">  !*** ./mySrc/js/main.js ***!</span></span><br><span class=\"line\"><span class=\"comment\">  \\**************************/</span></span><br><span class=\"line\">    <span class=\"comment\">/* harmony import */</span> <span class=\"keyword\">var</span> _tmp2__WEBPACK_IMPORTED_MODULE_0__ = <span class=\"title function_\">__webpack_require__</span>(</span><br><span class=\"line\">        <span class=\"comment\">/*! ./tmp2 */</span> <span class=\"string\">&quot;./mySrc/js/tmp2.js&quot;</span></span><br><span class=\"line\">    );<span class=\"comment\">//__webpack_require__requiretmp2</span></span><br><span class=\"line\"></span><br><span class=\"line\">    (<span class=\"number\">0</span>, _tmp2__WEBPACK_IMPORTED_MODULE_0__.<span class=\"property\">default</span>)(<span class=\"number\">123</span>);<span class=\"comment\">//tmp2show</span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;1111&quot;</span>);<span class=\"comment\">//</span></span><br><span class=\"line\">&#125;)();</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li> __webpack_require__ </li>\n</ul>\n"},{"title":"async","date":"2021-05-31T08:30:00.000Z","description":"asyncECMAscriptPromise+Generator","cover":"/img/cover_1.webp","_content":"\n## \n\n- **asyncpromise+generator**\n  - JavaScript\n\n- promise+generator\n  - **async**\n\n## \n\n[](https://juejin.cn/post/6844904102053281806)\n\n## \n\n```javascript\nconst getData = () => new Promise(resolve => setTimeout(() => resolve(\"data\"), 1000))\n\nasync function test() {\n  const data = await getData()\n  console.log('data: ', data);\n  const data2 = await getData()\n  console.log('data2: ', data2);\n  return 'success'\n}\n\n//  1data data2 success\ntest().then(res => console.log(res))\n```\n\n\n\n![](1.gif)\n\n- asyncawaitjsasync\n  - async[](https://es6.ruanyifeng.com/#docs/async)\n\n## \n\n### generator\n\n```javascript\nconst getData = () =>\n  new Promise((resolve) => {\n    setTimeout(() => {\n      resolve(\"haha\");\n    }, 1000);\n  });\n\nfunction* testG() {\n  const data = yield getData();\n  console.log(\"data:\", data);\n  const data2 = yield getData();\n  console.log(\"data2:\", data2);\n  return \"success\";\n}\n```\n\n- getData\n- **testasyncgenerator*awaityield**\n\n### \n\n```javascript\nvar gen = testG()//\n\nvar dataPromise = gen.next()//promise\n\ndataPromise.then((value1) => {\n    // data1value nextdata promise\n    var data2Promise = gen.next(value1)\n    \n    // console.log('data: ', data);\n    // data\n    \n    data2Promise.value.then((value2) => {\n        // data2value nextvalue2\n         gen.next(value2)\n         \n        // console.log('data2: ', data2);\n        // data2\n    })\n})\n```\n\n- generator\n\n### \n\n- \n\n  ```javascript\n  asyncToGenerator(testG).then((res) => console.log(res));\n  //asyncToGeneratorpromise\n  ```\n\n  - asyncToGeneratorpromise\n\n- **promise**\n\n  ```javascript\n  function* testG() {\n    const data = yield getData();\n    console.log(\"data:\", data);\n    const data2 = yield getData();\n    console.log(\"data2:\", data2);\n    return \"success\";\n  }\n  ```\n\n  - generatorpromise\n\n  - \n\n  ```javascript\n  //retPromisegeneratorpromise\n  retPromise.then((res)=>{\n      //it promiseresolvepromise\n      it.next(res);\n  })\n  ```\n\n  - \n\n- \n\n  ```javascript\n  function asyncToGenerator(generatorFunc) {\n    //generator\n    let it = generatorFunc();\n    //promise\n    return new Promise((resolve, reject) => {\n      //steppromise\n      //keyval\n      function step(key, val) {\n        //generatorvaluetry\n        let retPromise;\n  \n        try {\n          retPromise = it[key](val); //\n        } catch (e) {\n          return reject(e); //\n        }\n  \n        const { value, done } = retPromise; //generator\n        //valuepromise,done\n  \n        if (done) {\n          //\n          return resolve(value);\n        } else {\n          //generatorpromisethen\n          return value.then(\n            (val) => {\n              //generatorpromiseresolvestep\n              step(\"next\", val);\n            },\n            (err) => {\n              //\n              step(\"throw\", err);\n            }\n          );\n        }\n      }\n      //\n      step(\"next\");\n    });\n  }\n  ```\n\n- \n\n  ![](2.gif)\n\n--\n\n","source":"_posts/wirteMyAsync.md","raw":"---\ntitle: async\ndate: 2021-5-31 16:30:00\ncategories:\n- javascript\ntags:\n- javascript\n- async\ndescription: asyncECMAscriptPromise+Generator\ncover: /img/cover_1.webp\n\n---\n\n## \n\n- **asyncpromise+generator**\n  - JavaScript\n\n- promise+generator\n  - **async**\n\n## \n\n[](https://juejin.cn/post/6844904102053281806)\n\n## \n\n```javascript\nconst getData = () => new Promise(resolve => setTimeout(() => resolve(\"data\"), 1000))\n\nasync function test() {\n  const data = await getData()\n  console.log('data: ', data);\n  const data2 = await getData()\n  console.log('data2: ', data2);\n  return 'success'\n}\n\n//  1data data2 success\ntest().then(res => console.log(res))\n```\n\n\n\n![](1.gif)\n\n- asyncawaitjsasync\n  - async[](https://es6.ruanyifeng.com/#docs/async)\n\n## \n\n### generator\n\n```javascript\nconst getData = () =>\n  new Promise((resolve) => {\n    setTimeout(() => {\n      resolve(\"haha\");\n    }, 1000);\n  });\n\nfunction* testG() {\n  const data = yield getData();\n  console.log(\"data:\", data);\n  const data2 = yield getData();\n  console.log(\"data2:\", data2);\n  return \"success\";\n}\n```\n\n- getData\n- **testasyncgenerator*awaityield**\n\n### \n\n```javascript\nvar gen = testG()//\n\nvar dataPromise = gen.next()//promise\n\ndataPromise.then((value1) => {\n    // data1value nextdata promise\n    var data2Promise = gen.next(value1)\n    \n    // console.log('data: ', data);\n    // data\n    \n    data2Promise.value.then((value2) => {\n        // data2value nextvalue2\n         gen.next(value2)\n         \n        // console.log('data2: ', data2);\n        // data2\n    })\n})\n```\n\n- generator\n\n### \n\n- \n\n  ```javascript\n  asyncToGenerator(testG).then((res) => console.log(res));\n  //asyncToGeneratorpromise\n  ```\n\n  - asyncToGeneratorpromise\n\n- **promise**\n\n  ```javascript\n  function* testG() {\n    const data = yield getData();\n    console.log(\"data:\", data);\n    const data2 = yield getData();\n    console.log(\"data2:\", data2);\n    return \"success\";\n  }\n  ```\n\n  - generatorpromise\n\n  - \n\n  ```javascript\n  //retPromisegeneratorpromise\n  retPromise.then((res)=>{\n      //it promiseresolvepromise\n      it.next(res);\n  })\n  ```\n\n  - \n\n- \n\n  ```javascript\n  function asyncToGenerator(generatorFunc) {\n    //generator\n    let it = generatorFunc();\n    //promise\n    return new Promise((resolve, reject) => {\n      //steppromise\n      //keyval\n      function step(key, val) {\n        //generatorvaluetry\n        let retPromise;\n  \n        try {\n          retPromise = it[key](val); //\n        } catch (e) {\n          return reject(e); //\n        }\n  \n        const { value, done } = retPromise; //generator\n        //valuepromise,done\n  \n        if (done) {\n          //\n          return resolve(value);\n        } else {\n          //generatorpromisethen\n          return value.then(\n            (val) => {\n              //generatorpromiseresolvestep\n              step(\"next\", val);\n            },\n            (err) => {\n              //\n              step(\"throw\", err);\n            }\n          );\n        }\n      }\n      //\n      step(\"next\");\n    });\n  }\n  ```\n\n- \n\n  ![](2.gif)\n\n--\n\n","slug":"wirteMyAsync","published":1,"updated":"2022-04-11T08:31:40.562Z","_id":"ckvhtdmbk0004rgo3djy6h8od","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><p><strong>asyncpromise+generator</strong></p>\n<ul>\n<li>JavaScript</li>\n</ul>\n</li>\n<li><p>promise+generator</p>\n<ul>\n<li><strong>async</strong></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"https://juejin.cn/post/6844904102053281806\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">getData</span> = (<span class=\"params\"></span>) =&gt; <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> <span class=\"title function_\">resolve</span>(<span class=\"string\">&quot;data&quot;</span>), <span class=\"number\">1000</span>))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">test</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data = <span class=\"keyword\">await</span> <span class=\"title function_\">getData</span>()</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;data: &#x27;</span>, data);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data2 = <span class=\"keyword\">await</span> <span class=\"title function_\">getData</span>()</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;data2: &#x27;</span>, data2);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">&#x27;success&#x27;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  1data data2 success</span></span><br><span class=\"line\"><span class=\"title function_\">test</span>().<span class=\"title function_\">then</span>(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(res))</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><img src=\"/1.gif\"></p>\n<ul>\n<li>asyncawaitjsasync<ul>\n<li>async<a href=\"https://es6.ruanyifeng.com/#docs/async\"></a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"generator\"><a href=\"#generator\" class=\"headerlink\" title=\"generator\"></a>generator</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">getData</span> = (<span class=\"params\"></span>) =&gt;</span><br><span class=\"line\">  <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"title function_\">resolve</span>(<span class=\"string\">&quot;haha&quot;</span>);</span><br><span class=\"line\">    &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span>* <span class=\"title function_\">testG</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data = <span class=\"keyword\">yield</span> <span class=\"title function_\">getData</span>();</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;data:&quot;</span>, data);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data2 = <span class=\"keyword\">yield</span> <span class=\"title function_\">getData</span>();</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;data2:&quot;</span>, data2);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">&quot;success&quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>getData</li>\n<li><strong>testasyncgenerator*awaityield</strong></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> gen = <span class=\"title function_\">testG</span>()<span class=\"comment\">//</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> dataPromise = gen.<span class=\"title function_\">next</span>()<span class=\"comment\">//promise</span></span><br><span class=\"line\"></span><br><span class=\"line\">dataPromise.<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">value1</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// data1value nextdata promise</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> data2Promise = gen.<span class=\"title function_\">next</span>(value1)</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// console.log(&#x27;data: &#x27;, data);</span></span><br><span class=\"line\">    <span class=\"comment\">// data</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    data2Promise.<span class=\"property\">value</span>.<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">value2</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// data2value nextvalue2</span></span><br><span class=\"line\">         gen.<span class=\"title function_\">next</span>(value2)</span><br><span class=\"line\">         </span><br><span class=\"line\">        <span class=\"comment\">// console.log(&#x27;data2: &#x27;, data2);</span></span><br><span class=\"line\">        <span class=\"comment\">// data2</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>generator</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">asyncToGenerator</span>(testG).<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(res));</span><br><span class=\"line\"><span class=\"comment\">//asyncToGeneratorpromise</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>asyncToGeneratorpromise</li>\n</ul>\n</li>\n<li><p><strong>promise</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span>* <span class=\"title function_\">testG</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data = <span class=\"keyword\">yield</span> <span class=\"title function_\">getData</span>();</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;data:&quot;</span>, data);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data2 = <span class=\"keyword\">yield</span> <span class=\"title function_\">getData</span>();</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;data2:&quot;</span>, data2);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">&quot;success&quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>generatorpromise</p>\n</li>\n<li><p></p>\n</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//retPromisegeneratorpromise</span></span><br><span class=\"line\">retPromise.<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">res</span>)=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//it promiseresolvepromise</span></span><br><span class=\"line\">    it.<span class=\"title function_\">next</span>(res);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li></li>\n</ul>\n</li>\n<li><p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">asyncToGenerator</span>(<span class=\"params\">generatorFunc</span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">//generator</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> it = <span class=\"title function_\">generatorFunc</span>();</span><br><span class=\"line\">  <span class=\"comment\">//promise</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//steppromise</span></span><br><span class=\"line\">    <span class=\"comment\">//keyval</span></span><br><span class=\"line\">    <span class=\"keyword\">function</span> <span class=\"title function_\">step</span>(<span class=\"params\">key, val</span>) &#123;</span><br><span class=\"line\">      <span class=\"comment\">//generatorvaluetry</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> retPromise;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        retPromise = it[key](val); <span class=\"comment\">//</span></span><br><span class=\"line\">      &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"title function_\">reject</span>(e); <span class=\"comment\">//</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">const</span> &#123; value, done &#125; = retPromise; <span class=\"comment\">//generator</span></span><br><span class=\"line\">      <span class=\"comment\">//valuepromise,done</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (done) &#123;</span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"title function_\">resolve</span>(value);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//generatorpromisethen</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> value.<span class=\"title function_\">then</span>(</span><br><span class=\"line\">          <span class=\"function\">(<span class=\"params\">val</span>) =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//generatorpromiseresolvestep</span></span><br><span class=\"line\">            <span class=\"title function_\">step</span>(<span class=\"string\">&quot;next&quot;</span>, val);</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          <span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//</span></span><br><span class=\"line\">            <span class=\"title function_\">step</span>(<span class=\"string\">&quot;throw&quot;</span>, err);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        );</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"title function_\">step</span>(<span class=\"string\">&quot;next&quot;</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n<p><img src=\"/2.gif\"></p>\n</li>\n</ul>\n<p></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><p><strong>asyncpromise+generator</strong></p>\n<ul>\n<li>JavaScript</li>\n</ul>\n</li>\n<li><p>promise+generator</p>\n<ul>\n<li><strong>async</strong></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"https://juejin.cn/post/6844904102053281806\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">getData</span> = (<span class=\"params\"></span>) =&gt; <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> <span class=\"title function_\">resolve</span>(<span class=\"string\">&quot;data&quot;</span>), <span class=\"number\">1000</span>))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">test</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data = <span class=\"keyword\">await</span> <span class=\"title function_\">getData</span>()</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;data: &#x27;</span>, data);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data2 = <span class=\"keyword\">await</span> <span class=\"title function_\">getData</span>()</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;data2: &#x27;</span>, data2);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">&#x27;success&#x27;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  1data data2 success</span></span><br><span class=\"line\"><span class=\"title function_\">test</span>().<span class=\"title function_\">then</span>(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(res))</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><img src=\"/1.gif\"></p>\n<ul>\n<li>asyncawaitjsasync<ul>\n<li>async<a href=\"https://es6.ruanyifeng.com/#docs/async\"></a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"generator\"><a href=\"#generator\" class=\"headerlink\" title=\"generator\"></a>generator</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">getData</span> = (<span class=\"params\"></span>) =&gt;</span><br><span class=\"line\">  <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"title function_\">resolve</span>(<span class=\"string\">&quot;haha&quot;</span>);</span><br><span class=\"line\">    &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span>* <span class=\"title function_\">testG</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data = <span class=\"keyword\">yield</span> <span class=\"title function_\">getData</span>();</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;data:&quot;</span>, data);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data2 = <span class=\"keyword\">yield</span> <span class=\"title function_\">getData</span>();</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;data2:&quot;</span>, data2);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">&quot;success&quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>getData</li>\n<li><strong>testasyncgenerator*awaityield</strong></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> gen = <span class=\"title function_\">testG</span>()<span class=\"comment\">//</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> dataPromise = gen.<span class=\"title function_\">next</span>()<span class=\"comment\">//promise</span></span><br><span class=\"line\"></span><br><span class=\"line\">dataPromise.<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">value1</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// data1value nextdata promise</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> data2Promise = gen.<span class=\"title function_\">next</span>(value1)</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// console.log(&#x27;data: &#x27;, data);</span></span><br><span class=\"line\">    <span class=\"comment\">// data</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    data2Promise.<span class=\"property\">value</span>.<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">value2</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// data2value nextvalue2</span></span><br><span class=\"line\">         gen.<span class=\"title function_\">next</span>(value2)</span><br><span class=\"line\">         </span><br><span class=\"line\">        <span class=\"comment\">// console.log(&#x27;data2: &#x27;, data2);</span></span><br><span class=\"line\">        <span class=\"comment\">// data2</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>generator</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">asyncToGenerator</span>(testG).<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(res));</span><br><span class=\"line\"><span class=\"comment\">//asyncToGeneratorpromise</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>asyncToGeneratorpromise</li>\n</ul>\n</li>\n<li><p><strong>promise</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span>* <span class=\"title function_\">testG</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data = <span class=\"keyword\">yield</span> <span class=\"title function_\">getData</span>();</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;data:&quot;</span>, data);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data2 = <span class=\"keyword\">yield</span> <span class=\"title function_\">getData</span>();</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;data2:&quot;</span>, data2);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">&quot;success&quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>generatorpromise</p>\n</li>\n<li><p></p>\n</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//retPromisegeneratorpromise</span></span><br><span class=\"line\">retPromise.<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">res</span>)=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//it promiseresolvepromise</span></span><br><span class=\"line\">    it.<span class=\"title function_\">next</span>(res);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li></li>\n</ul>\n</li>\n<li><p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">asyncToGenerator</span>(<span class=\"params\">generatorFunc</span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">//generator</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> it = <span class=\"title function_\">generatorFunc</span>();</span><br><span class=\"line\">  <span class=\"comment\">//promise</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//steppromise</span></span><br><span class=\"line\">    <span class=\"comment\">//keyval</span></span><br><span class=\"line\">    <span class=\"keyword\">function</span> <span class=\"title function_\">step</span>(<span class=\"params\">key, val</span>) &#123;</span><br><span class=\"line\">      <span class=\"comment\">//generatorvaluetry</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> retPromise;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        retPromise = it[key](val); <span class=\"comment\">//</span></span><br><span class=\"line\">      &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"title function_\">reject</span>(e); <span class=\"comment\">//</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">const</span> &#123; value, done &#125; = retPromise; <span class=\"comment\">//generator</span></span><br><span class=\"line\">      <span class=\"comment\">//valuepromise,done</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (done) &#123;</span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"title function_\">resolve</span>(value);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//generatorpromisethen</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> value.<span class=\"title function_\">then</span>(</span><br><span class=\"line\">          <span class=\"function\">(<span class=\"params\">val</span>) =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//generatorpromiseresolvestep</span></span><br><span class=\"line\">            <span class=\"title function_\">step</span>(<span class=\"string\">&quot;next&quot;</span>, val);</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          <span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//</span></span><br><span class=\"line\">            <span class=\"title function_\">step</span>(<span class=\"string\">&quot;throw&quot;</span>, err);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        );</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"title function_\">step</span>(<span class=\"string\">&quot;next&quot;</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n<p><img src=\"/2.gif\"></p>\n</li>\n</ul>\n<p></p>\n"},{"title":"Promise","date":"2021-05-19T04:26:11.000Z","description":"ES6PromisePromise","cover":"img/cover_3.webp","_content":"- promise\n\n  ```javascript\n  function myPromise(fn) {\n      this.state = 'pending'; //pending resolved rejected\n      this.val = null; //promise\n      this.onResolvedCallback = []; //pendingthen \n      this.onRejectedCallback = [];\n  \n      this.resolve = (val) => {\n          if (this.state === 'pending') { //\n              this.state = 'resolved';\n              this.val = val;\n              //then\n              for (let i = 0; i < this.onResolvedCallback.length; i++) {\n                  this.onResolvedCallback[i](val);\n              }\n          }\n      }\n  \n      this.reject = (reason) => {\n          if (this.state === 'pending') { //\n              this.state = 'rejected';\n              this.val = reason;\n              //resolve\n              for (let i = 0; i < this.onRejectedCallback.length; i++) {\n                  this.onRejectedCallback[i](reason);\n              }\n          }\n      }\n  \n      this.then = (resolveFn, rejectFn) => {\n          //promise\n          resolveFn = typeof resolveFn === 'function' ? resolveFn : function (v) { return v };\n          rejectFn = typeof rejectFn === 'function' ? rejectFn : function (r) { return r };\n  \n          if (this.state === 'resolved') { //thenresolved\n              return new myPromise((resolve, reject) => { //thenpromise\n                  try { //tryreject\n                      let next = resolveFn(this.val); //resolve\n                      if (next instanceof myPromise) { //resolvepromisethen\n                          next.then(resolve, reject)\n                          //thenpromiseresolveresolvepromisepromiseresolvepromisethen new promise promise\n                      }\n                      else {\n                          resolve(next) //resolve\n                      }\n                  } catch (e) {\n                      rejectFn(e)\n                  }\n              })\n          }\n  \n          if (this.state === 'rejected') { //reject\n              return new myPromise((resolve, reject) => {\n                  try {\n                      let next = rejectFn(this.val);\n                      if (next instanceof myPromise) {\n                          next.then(resolve, reject)\n                      }\n                  } catch (e) {\n                      rejectFn(e)\n                  }\n              })\n          }\n  \n          if (this.state === 'pending') { //then\n              return new myPromise((resolve, reject) => {\n                  //\n                  this.onResolvedCallback.push(function (val) { //resolved\n                      try {\n                          let next = resolveFn(val);\n                          if (next instanceof myPromise) {\n                              next.then(resolve, reject)\n                          };\n                          resolve(next);\n                      } catch (e) {\n                          reject(e)\n                      }\n                  })\n  \n                  this.onRejectedCallback.push(function (reason) { //reject\n                      try {\n                          let next = rejectFn(reason);\n                          if (next instanceof myPromise) {\n                              next.then(resolve, reject)\n                          }\n                          reject(next)\n                      } catch (e) {\n                          reject(e)\n                      }\n                  })\n              })\n          }\n      }\n  \n      try { //promiseresolve,reject\n          fn(this.resolve, this.reject);\n      } catch (e) {\n          this.reject(e)\n      }\n  }\n  ```\n  \n  \n  \n  ```javascript\n  new myPromise((resolve, reject) => {\n      resolve(1)\n  }).then((val) => {\n      console.log(val);\n      return new myPromise((resolve) => {\n          setTimeout(() => {\n              resolve(2)\n          }, 1000);\n      })\n  }).then((val) => {\n      console.log(val);\n  })\n  ```\n  \n  + throw\n  + thispromise\n  \n- all,race\n\n  ```javascript\n  Promise.myAll = (promiseArr) => {\n      return new Promise((resolve, reject) => {\n          let count = 0, all = promiseArr.length;\n          let resArr = [];\n          for (let i = 0; i < all; i++) {\n              promiseArr[i].then((val) => {\n                  count++;\n                  resArr[i] = val;\n                  if (count === all) { //promise\n                      resolve(resArr)\n                  }\n              }, (err) => {\n                  reject(err)\n              })\n          }\n      })\n  }\n  ```\n\n  ```javascript\n  //race ....\n  ```\n\n  \n","source":"_posts/wirteMyPromise.md","raw":"---\ntitle: Promise\ndate: 2021-05-19 12:26:11\ntags: \n - javascript\n - promise\ncategories:\n - javascript\ndescription: ES6PromisePromise\ncover: img/cover_3.webp\n\n---\n- promise\n\n  ```javascript\n  function myPromise(fn) {\n      this.state = 'pending'; //pending resolved rejected\n      this.val = null; //promise\n      this.onResolvedCallback = []; //pendingthen \n      this.onRejectedCallback = [];\n  \n      this.resolve = (val) => {\n          if (this.state === 'pending') { //\n              this.state = 'resolved';\n              this.val = val;\n              //then\n              for (let i = 0; i < this.onResolvedCallback.length; i++) {\n                  this.onResolvedCallback[i](val);\n              }\n          }\n      }\n  \n      this.reject = (reason) => {\n          if (this.state === 'pending') { //\n              this.state = 'rejected';\n              this.val = reason;\n              //resolve\n              for (let i = 0; i < this.onRejectedCallback.length; i++) {\n                  this.onRejectedCallback[i](reason);\n              }\n          }\n      }\n  \n      this.then = (resolveFn, rejectFn) => {\n          //promise\n          resolveFn = typeof resolveFn === 'function' ? resolveFn : function (v) { return v };\n          rejectFn = typeof rejectFn === 'function' ? rejectFn : function (r) { return r };\n  \n          if (this.state === 'resolved') { //thenresolved\n              return new myPromise((resolve, reject) => { //thenpromise\n                  try { //tryreject\n                      let next = resolveFn(this.val); //resolve\n                      if (next instanceof myPromise) { //resolvepromisethen\n                          next.then(resolve, reject)\n                          //thenpromiseresolveresolvepromisepromiseresolvepromisethen new promise promise\n                      }\n                      else {\n                          resolve(next) //resolve\n                      }\n                  } catch (e) {\n                      rejectFn(e)\n                  }\n              })\n          }\n  \n          if (this.state === 'rejected') { //reject\n              return new myPromise((resolve, reject) => {\n                  try {\n                      let next = rejectFn(this.val);\n                      if (next instanceof myPromise) {\n                          next.then(resolve, reject)\n                      }\n                  } catch (e) {\n                      rejectFn(e)\n                  }\n              })\n          }\n  \n          if (this.state === 'pending') { //then\n              return new myPromise((resolve, reject) => {\n                  //\n                  this.onResolvedCallback.push(function (val) { //resolved\n                      try {\n                          let next = resolveFn(val);\n                          if (next instanceof myPromise) {\n                              next.then(resolve, reject)\n                          };\n                          resolve(next);\n                      } catch (e) {\n                          reject(e)\n                      }\n                  })\n  \n                  this.onRejectedCallback.push(function (reason) { //reject\n                      try {\n                          let next = rejectFn(reason);\n                          if (next instanceof myPromise) {\n                              next.then(resolve, reject)\n                          }\n                          reject(next)\n                      } catch (e) {\n                          reject(e)\n                      }\n                  })\n              })\n          }\n      }\n  \n      try { //promiseresolve,reject\n          fn(this.resolve, this.reject);\n      } catch (e) {\n          this.reject(e)\n      }\n  }\n  ```\n  \n  \n  \n  ```javascript\n  new myPromise((resolve, reject) => {\n      resolve(1)\n  }).then((val) => {\n      console.log(val);\n      return new myPromise((resolve) => {\n          setTimeout(() => {\n              resolve(2)\n          }, 1000);\n      })\n  }).then((val) => {\n      console.log(val);\n  })\n  ```\n  \n  + throw\n  + thispromise\n  \n- all,race\n\n  ```javascript\n  Promise.myAll = (promiseArr) => {\n      return new Promise((resolve, reject) => {\n          let count = 0, all = promiseArr.length;\n          let resArr = [];\n          for (let i = 0; i < all; i++) {\n              promiseArr[i].then((val) => {\n                  count++;\n                  resArr[i] = val;\n                  if (count === all) { //promise\n                      resolve(resArr)\n                  }\n              }, (err) => {\n                  reject(err)\n              })\n          }\n      })\n  }\n  ```\n\n  ```javascript\n  //race ....\n  ```\n\n  \n","slug":"wirteMyPromise","published":1,"updated":"2022-04-11T08:32:28.906Z","_id":"ckvhtdmbl0005rgo3fymy7ldv","comments":1,"layout":"post","photos":[],"link":"","content":"<ul>\n<li><p>promise</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">myPromise</span>(<span class=\"params\">fn</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">state</span> = <span class=\"string\">&#x27;pending&#x27;</span>; <span class=\"comment\">//pending resolved rejected</span></span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">val</span> = <span class=\"literal\">null</span>; <span class=\"comment\">//promise</span></span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">onResolvedCallback</span> = []; <span class=\"comment\">//pendingthen </span></span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">onRejectedCallback</span> = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">resolve</span> = <span class=\"function\">(<span class=\"params\">val</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable language_\">this</span>.<span class=\"property\">state</span> === <span class=\"string\">&#x27;pending&#x27;</span>) &#123; <span class=\"comment\">//</span></span><br><span class=\"line\">            <span class=\"variable language_\">this</span>.<span class=\"property\">state</span> = <span class=\"string\">&#x27;resolved&#x27;</span>;</span><br><span class=\"line\">            <span class=\"variable language_\">this</span>.<span class=\"property\">val</span> = val;</span><br><span class=\"line\">            <span class=\"comment\">//then</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"variable language_\">this</span>.<span class=\"property\">onResolvedCallback</span>.<span class=\"property\">length</span>; i++) &#123;</span><br><span class=\"line\">                <span class=\"variable language_\">this</span>.<span class=\"property\">onResolvedCallback</span>[i](val);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">reject</span> = <span class=\"function\">(<span class=\"params\">reason</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable language_\">this</span>.<span class=\"property\">state</span> === <span class=\"string\">&#x27;pending&#x27;</span>) &#123; <span class=\"comment\">//</span></span><br><span class=\"line\">            <span class=\"variable language_\">this</span>.<span class=\"property\">state</span> = <span class=\"string\">&#x27;rejected&#x27;</span>;</span><br><span class=\"line\">            <span class=\"variable language_\">this</span>.<span class=\"property\">val</span> = reason;</span><br><span class=\"line\">            <span class=\"comment\">//resolve</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"variable language_\">this</span>.<span class=\"property\">onRejectedCallback</span>.<span class=\"property\">length</span>; i++) &#123;</span><br><span class=\"line\">                <span class=\"variable language_\">this</span>.<span class=\"property\">onRejectedCallback</span>[i](reason);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">then</span> = <span class=\"function\">(<span class=\"params\">resolveFn, rejectFn</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//promise</span></span><br><span class=\"line\">        resolveFn = <span class=\"keyword\">typeof</span> resolveFn === <span class=\"string\">&#x27;function&#x27;</span> ? resolveFn : <span class=\"keyword\">function</span> (<span class=\"params\">v</span>) &#123; <span class=\"keyword\">return</span> v &#125;;</span><br><span class=\"line\">        rejectFn = <span class=\"keyword\">typeof</span> rejectFn === <span class=\"string\">&#x27;function&#x27;</span> ? rejectFn : <span class=\"keyword\">function</span> (<span class=\"params\">r</span>) &#123; <span class=\"keyword\">return</span> r &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable language_\">this</span>.<span class=\"property\">state</span> === <span class=\"string\">&#x27;resolved&#x27;</span>) &#123; <span class=\"comment\">//thenresolved</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title function_\">myPromise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123; <span class=\"comment\">//thenpromise</span></span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123; <span class=\"comment\">//tryreject</span></span><br><span class=\"line\">                    <span class=\"keyword\">let</span> next = <span class=\"title function_\">resolveFn</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">val</span>); <span class=\"comment\">//resolve</span></span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (next <span class=\"keyword\">instanceof</span> myPromise) &#123; <span class=\"comment\">//resolvepromisethen</span></span><br><span class=\"line\">                        next.<span class=\"title function_\">then</span>(resolve, reject)</span><br><span class=\"line\">                        <span class=\"comment\">//thenpromiseresolveresolvepromisepromiseresolvepromisethen new promise promise</span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                        <span class=\"title function_\">resolve</span>(next) <span class=\"comment\">//resolve</span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">                    <span class=\"title function_\">rejectFn</span>(e)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable language_\">this</span>.<span class=\"property\">state</span> === <span class=\"string\">&#x27;rejected&#x27;</span>) &#123; <span class=\"comment\">//reject</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title function_\">myPromise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">let</span> next = <span class=\"title function_\">rejectFn</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">val</span>);</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (next <span class=\"keyword\">instanceof</span> myPromise) &#123;</span><br><span class=\"line\">                        next.<span class=\"title function_\">then</span>(resolve, reject)</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">                    <span class=\"title function_\">rejectFn</span>(e)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable language_\">this</span>.<span class=\"property\">state</span> === <span class=\"string\">&#x27;pending&#x27;</span>) &#123; <span class=\"comment\">//then</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title function_\">myPromise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">//</span></span><br><span class=\"line\">                <span class=\"variable language_\">this</span>.<span class=\"property\">onResolvedCallback</span>.<span class=\"title function_\">push</span>(<span class=\"keyword\">function</span> (<span class=\"params\">val</span>) &#123; <span class=\"comment\">//resolved</span></span><br><span class=\"line\">                    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">let</span> next = <span class=\"title function_\">resolveFn</span>(val);</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (next <span class=\"keyword\">instanceof</span> myPromise) &#123;</span><br><span class=\"line\">                            next.<span class=\"title function_\">then</span>(resolve, reject)</span><br><span class=\"line\">                        &#125;;</span><br><span class=\"line\">                        <span class=\"title function_\">resolve</span>(next);</span><br><span class=\"line\">                    &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">                        <span class=\"title function_\">reject</span>(e)</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"variable language_\">this</span>.<span class=\"property\">onRejectedCallback</span>.<span class=\"title function_\">push</span>(<span class=\"keyword\">function</span> (<span class=\"params\">reason</span>) &#123; <span class=\"comment\">//reject</span></span><br><span class=\"line\">                    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">let</span> next = <span class=\"title function_\">rejectFn</span>(reason);</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (next <span class=\"keyword\">instanceof</span> myPromise) &#123;</span><br><span class=\"line\">                            next.<span class=\"title function_\">then</span>(resolve, reject)</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                        <span class=\"title function_\">reject</span>(next)</span><br><span class=\"line\">                    &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">                        <span class=\"title function_\">reject</span>(e)</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;)</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123; <span class=\"comment\">//promiseresolve,reject</span></span><br><span class=\"line\">        <span class=\"title function_\">fn</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">resolve</span>, <span class=\"variable language_\">this</span>.<span class=\"property\">reject</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"title function_\">reject</span>(e)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"title function_\">myPromise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"title function_\">resolve</span>(<span class=\"number\">1</span>)</span><br><span class=\"line\">&#125;).<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">val</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(val);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title function_\">myPromise</span>(<span class=\"function\">(<span class=\"params\">resolve</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"title function_\">resolve</span>(<span class=\"number\">2</span>)</span><br><span class=\"line\">        &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;).<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">val</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(val);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>throw</li>\n<li>thispromise</li>\n</ul>\n</li>\n<li><p>all,race</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title class_\">Promise</span>.<span class=\"property\">myAll</span> = <span class=\"function\">(<span class=\"params\">promiseArr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> count = <span class=\"number\">0</span>, all = promiseArr.<span class=\"property\">length</span>;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> resArr = [];</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; all; i++) &#123;</span><br><span class=\"line\">            promiseArr[i].<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">val</span>) =&gt;</span> &#123;</span><br><span class=\"line\">                count++;</span><br><span class=\"line\">                resArr[i] = val;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (count === all) &#123; <span class=\"comment\">//promise</span></span><br><span class=\"line\">                    <span class=\"title function_\">resolve</span>(resArr)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;, <span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">                <span class=\"title function_\">reject</span>(err)</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//race ....</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<ul>\n<li><p>promise</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">myPromise</span>(<span class=\"params\">fn</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">state</span> = <span class=\"string\">&#x27;pending&#x27;</span>; <span class=\"comment\">//pending resolved rejected</span></span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">val</span> = <span class=\"literal\">null</span>; <span class=\"comment\">//promise</span></span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">onResolvedCallback</span> = []; <span class=\"comment\">//pendingthen </span></span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">onRejectedCallback</span> = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">resolve</span> = <span class=\"function\">(<span class=\"params\">val</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable language_\">this</span>.<span class=\"property\">state</span> === <span class=\"string\">&#x27;pending&#x27;</span>) &#123; <span class=\"comment\">//</span></span><br><span class=\"line\">            <span class=\"variable language_\">this</span>.<span class=\"property\">state</span> = <span class=\"string\">&#x27;resolved&#x27;</span>;</span><br><span class=\"line\">            <span class=\"variable language_\">this</span>.<span class=\"property\">val</span> = val;</span><br><span class=\"line\">            <span class=\"comment\">//then</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"variable language_\">this</span>.<span class=\"property\">onResolvedCallback</span>.<span class=\"property\">length</span>; i++) &#123;</span><br><span class=\"line\">                <span class=\"variable language_\">this</span>.<span class=\"property\">onResolvedCallback</span>[i](val);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">reject</span> = <span class=\"function\">(<span class=\"params\">reason</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable language_\">this</span>.<span class=\"property\">state</span> === <span class=\"string\">&#x27;pending&#x27;</span>) &#123; <span class=\"comment\">//</span></span><br><span class=\"line\">            <span class=\"variable language_\">this</span>.<span class=\"property\">state</span> = <span class=\"string\">&#x27;rejected&#x27;</span>;</span><br><span class=\"line\">            <span class=\"variable language_\">this</span>.<span class=\"property\">val</span> = reason;</span><br><span class=\"line\">            <span class=\"comment\">//resolve</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"variable language_\">this</span>.<span class=\"property\">onRejectedCallback</span>.<span class=\"property\">length</span>; i++) &#123;</span><br><span class=\"line\">                <span class=\"variable language_\">this</span>.<span class=\"property\">onRejectedCallback</span>[i](reason);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">then</span> = <span class=\"function\">(<span class=\"params\">resolveFn, rejectFn</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//promise</span></span><br><span class=\"line\">        resolveFn = <span class=\"keyword\">typeof</span> resolveFn === <span class=\"string\">&#x27;function&#x27;</span> ? resolveFn : <span class=\"keyword\">function</span> (<span class=\"params\">v</span>) &#123; <span class=\"keyword\">return</span> v &#125;;</span><br><span class=\"line\">        rejectFn = <span class=\"keyword\">typeof</span> rejectFn === <span class=\"string\">&#x27;function&#x27;</span> ? rejectFn : <span class=\"keyword\">function</span> (<span class=\"params\">r</span>) &#123; <span class=\"keyword\">return</span> r &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable language_\">this</span>.<span class=\"property\">state</span> === <span class=\"string\">&#x27;resolved&#x27;</span>) &#123; <span class=\"comment\">//thenresolved</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title function_\">myPromise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123; <span class=\"comment\">//thenpromise</span></span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123; <span class=\"comment\">//tryreject</span></span><br><span class=\"line\">                    <span class=\"keyword\">let</span> next = <span class=\"title function_\">resolveFn</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">val</span>); <span class=\"comment\">//resolve</span></span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (next <span class=\"keyword\">instanceof</span> myPromise) &#123; <span class=\"comment\">//resolvepromisethen</span></span><br><span class=\"line\">                        next.<span class=\"title function_\">then</span>(resolve, reject)</span><br><span class=\"line\">                        <span class=\"comment\">//thenpromiseresolveresolvepromisepromiseresolvepromisethen new promise promise</span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                        <span class=\"title function_\">resolve</span>(next) <span class=\"comment\">//resolve</span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">                    <span class=\"title function_\">rejectFn</span>(e)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable language_\">this</span>.<span class=\"property\">state</span> === <span class=\"string\">&#x27;rejected&#x27;</span>) &#123; <span class=\"comment\">//reject</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title function_\">myPromise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">let</span> next = <span class=\"title function_\">rejectFn</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">val</span>);</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (next <span class=\"keyword\">instanceof</span> myPromise) &#123;</span><br><span class=\"line\">                        next.<span class=\"title function_\">then</span>(resolve, reject)</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">                    <span class=\"title function_\">rejectFn</span>(e)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable language_\">this</span>.<span class=\"property\">state</span> === <span class=\"string\">&#x27;pending&#x27;</span>) &#123; <span class=\"comment\">//then</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title function_\">myPromise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">//</span></span><br><span class=\"line\">                <span class=\"variable language_\">this</span>.<span class=\"property\">onResolvedCallback</span>.<span class=\"title function_\">push</span>(<span class=\"keyword\">function</span> (<span class=\"params\">val</span>) &#123; <span class=\"comment\">//resolved</span></span><br><span class=\"line\">                    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">let</span> next = <span class=\"title function_\">resolveFn</span>(val);</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (next <span class=\"keyword\">instanceof</span> myPromise) &#123;</span><br><span class=\"line\">                            next.<span class=\"title function_\">then</span>(resolve, reject)</span><br><span class=\"line\">                        &#125;;</span><br><span class=\"line\">                        <span class=\"title function_\">resolve</span>(next);</span><br><span class=\"line\">                    &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">                        <span class=\"title function_\">reject</span>(e)</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"variable language_\">this</span>.<span class=\"property\">onRejectedCallback</span>.<span class=\"title function_\">push</span>(<span class=\"keyword\">function</span> (<span class=\"params\">reason</span>) &#123; <span class=\"comment\">//reject</span></span><br><span class=\"line\">                    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">let</span> next = <span class=\"title function_\">rejectFn</span>(reason);</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (next <span class=\"keyword\">instanceof</span> myPromise) &#123;</span><br><span class=\"line\">                            next.<span class=\"title function_\">then</span>(resolve, reject)</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                        <span class=\"title function_\">reject</span>(next)</span><br><span class=\"line\">                    &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">                        <span class=\"title function_\">reject</span>(e)</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;)</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123; <span class=\"comment\">//promiseresolve,reject</span></span><br><span class=\"line\">        <span class=\"title function_\">fn</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">resolve</span>, <span class=\"variable language_\">this</span>.<span class=\"property\">reject</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"title function_\">reject</span>(e)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"title function_\">myPromise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"title function_\">resolve</span>(<span class=\"number\">1</span>)</span><br><span class=\"line\">&#125;).<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">val</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(val);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title function_\">myPromise</span>(<span class=\"function\">(<span class=\"params\">resolve</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"title function_\">resolve</span>(<span class=\"number\">2</span>)</span><br><span class=\"line\">        &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;).<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">val</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(val);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>throw</li>\n<li>thispromise</li>\n</ul>\n</li>\n<li><p>all,race</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title class_\">Promise</span>.<span class=\"property\">myAll</span> = <span class=\"function\">(<span class=\"params\">promiseArr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> count = <span class=\"number\">0</span>, all = promiseArr.<span class=\"property\">length</span>;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> resArr = [];</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; all; i++) &#123;</span><br><span class=\"line\">            promiseArr[i].<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">val</span>) =&gt;</span> &#123;</span><br><span class=\"line\">                count++;</span><br><span class=\"line\">                resArr[i] = val;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (count === all) &#123; <span class=\"comment\">//promise</span></span><br><span class=\"line\">                    <span class=\"title function_\">resolve</span>(resArr)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;, <span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">                <span class=\"title function_\">reject</span>(err)</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//race ....</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n"},{"title":"vue2SourceDebug","date":"2021-11-15T01:29:39.000Z","description":"Vue2debug","cover":"/img/cover_6.webp","top_image":"https://pic2.zhimg.com/v2-db7221c0d7ca752b2f88d7ca94939976_1440w.jpg?source=172ae18b","_content":"## \n\nVuedebugVue\n\n****\n\n- Vue2.6.14\n- webpackdebug\n- \n\n```javascript\n/* index.js */\nimport Vue from \"vue\";\nimport Header from \"./components/Header/index.js\";\n\ndebugger; //debug\n\nexport default new Vue({\n  el: \"#app\",\n  data() { // data\n    return {\n      text: \"123\",\n      ifFlag: true,\n      inputValue: \"input something\",\n    };\n  },\n  methods: { // methods\n    hello() {\n      console.log(\"==app hello\");\n    },\n  },\n  computed: { // computed\n    reversedText() {\n      return this.text.split(\"\").reverse().join(\"\");\n    },\n  },\n  // lifeCycle\n  beforeCreate() {\n    console.log(\"==app before create\");\n  },\n  created() {\n    console.log(\"==app created\");\n  },\n  beforeMount() {\n    console.log(\"==app before mount\");\n  },\n  mounted() {\n    console.log(\"==app mounted\");\n  },\n  beforeUpdate() {\n    console.log(\"==app before update\");\n  },\n  updated() {\n    console.log(\"==app updated\");\n  },\n  // component\n  components: {\n    Header,\n  },\n  // template\n  template: `\n    <div id=\"app\" @click=\"hello\">\n      <div>{{reversedText}}</div>\n      <div v-if=\"ifFlag\">ifFlag is true then I will show</div>\n      <input v-model=\"inputValue\" />\n      <p>what you input is:{{inputValue}}</p>\n      <Header :propValue=\"'from app'\" />\n    </div>\n  `,\n});\n```\n\n- Header\n\n```javascript\n/* Header.js */\nimport Vue from \"vue\";\n\nexport default Vue.component(\"Header\", {\n  template: `\n  <div @click=\"showMsg\" class=\"header\">\n    text:{{text}}\n    propValue:{{propValue}}\n  </div>\n  `,\n  data() {\n    return {\n      text: \"i am header\",\n    };\n  },\n  props: [\"propValue\"], // props\n  methods: {\n    showMsg() {\n      console.log(\"==from header\");\n    },\n  },\n  created() {\n    console.log(\"==Header components created\");\n  },\n  mounted() {\n    console.log(\"==Header components mounted\");\n  },\n});\n```\n\n## Vue2debug\n\n**debug**\n\n`export default new Vue({...})`Vue\n\n```javascript\nfunction Vue (options) {\n  if (process.env.NODE_ENV !== 'production' &&\n    !(this instanceof Vue)\n  ) {\n    warn('Vue is a constructor and should be called with the `new` keyword');\n  }\n  this._init(options);\n}\n```\n\n- Vueoptions`_init`\n\n### __init\n\n_initmixinVue\n\n```javascript\nVue.prototype._init = function (options) {\n    var vm = this;\n\n    // a flag to avoid this being observed\n    vm._isVue = true;\n    // merge options\n    if (options && options._isComponent) {\n        // optimize internal component instantiation\n        // since dynamic options merging is pretty slow, and none of the\n        // internal component options needs special treatment.\n        initInternalComponent(vm, options);\n    } else {\n        vm.$options = mergeOptions(\n            resolveConstructorOptions(vm.constructor),\n            options || {},\n            vm\n        );\n    }\n    // expose real self\n    vm._self = vm;\n    initLifecycle(vm);\n    initEvents(vm);\n    initRender(vm);\n    callHook(vm, 'beforeCreate');\n    initInjections(vm); // resolve injections before data/props\n    initState(vm);\n    initProvide(vm); // resolve provide after data/props\n    callHook(vm, 'created');\n\n    if (vm.$options.el) {\n        vm.$mount(vm.$options.el);\n    }\n};\n```\n\n-  vm = Vue\n- Vue`_isVue = true`\n- ****\n- **VueDOM**\n- ****\n\n#### initInternalComponent\n\n- VnodeDOM\n\n```javascript\nfunction initInternalComponent (vm, options) {\n    var opts = vm.$options = Object.create(vm.constructor.options);\n    // doing this because it's faster than dynamic enumeration.\n    var parentVnode = options._parentVnode;\n    opts.parent = options.parent;\n    opts._parentVnode = parentVnode;\n\n    var vnodeComponentOptions = parentVnode.componentOptions;\n    opts.propsData = vnodeComponentOptions.propsData;\n    opts._parentListeners = vnodeComponentOptions.listeners;\n    opts._renderChildren = vnodeComponentOptions.children;\n    opts._componentTag = vnodeComponentOptions.tag;\n\n    if (options.render) {\n        opts.render = options.render;\n        opts.staticRenderFns = options.staticRenderFns;\n    }\n}\n```\n\n- `options.__parentVnode`VNode`options.parentVnode`Vue\n\n#### mergeOptoins\n\n- option\n\n- resolveConstructorOptions`Vue.constructor`\n\n```javascript\n  function mergeOptions (\n    parent, // Vue.constructor\n    child, // option\n    vm // Vue\n  ) {\n    if (process.env.NODE_ENV !== 'production') {\n      checkComponents(child);\n    }\n  \n    normalizeProps(child, vm);\n    normalizeInject(child, vm);\n    normalizeDirectives(child);\n  \n    // Apply extends and mixins on the child options,\n    // but only if it is a raw options object that isn't\n    // the result of another mergeOptions call.\n    // Only merged options has the _base property.\n    if (!child._base) {\n      if (child.extends) {\n        parent = mergeOptions(parent, child.extends, vm);\n      }\n      if (child.mixins) {\n        for (var i = 0, l = child.mixins.length; i < l; i++) {\n          parent = mergeOptions(parent, child.mixins[i], vm);\n        }\n      }\n    }\n  \n    var options = {};\n    var key;\n    for (key in parent) {\n      mergeField(key);\n    }\n    for (key in child) {\n      if (!hasOwn(parent, key)) {\n        mergeField(key);\n      }\n    }\n    function mergeField (key) {\n      var strat = strats[key] || defaultStrat;\n      options[key] = strat(parent[key], child[key], vm, key);\n    }\n    return options\n  }\n  ```\n\n  - `checkComponents`****divhtmldiv\n  - `normalizeProps`**`props`**arrayplainObject\n    - \n  - normalizeInjectnormalizeDirectives\n  - extendsmixins\n  - option****\n    - option\n    - option\n    - option\n\n#### initProxy\n\n- es6proxyVuelog\n\n#### initLifecycle\n\n```javascript\nfunction initLifecycle (vm) {\n  var options = vm.$options;\n\n  // locate first non-abstract parent\n  var parent = options.parent;\n  if (parent && !options.abstract) {\n    while (parent.$options.abstract && parent.$parent) {\n      parent = parent.$parent;\n    }\n    parent.$children.push(vm);\n  }\n\n  vm.$parent = parent;\n  vm.$root = parent ? parent.$root : vm; //  Vue \n\n  vm.$children = []; // \n  vm.$refs = {};\n\n  vm._watcher = null;\n  // lifeCycleflag\n  vm._inactive = null;\n  vm._directInactive = false;\n  vm._isMounted = false;\n  vm._isDestroyed = false;\n  vm._isBeingDestroyed = false;\n}\n```\n\n- keep-alive\n- vm\n\n#### initEvents\n\n```javascript\nfunction initEvents (vm) {\n  vm._events = Object.create(null);\n  vm._hasHookEvent = false;\n  // init parent attached events\n  var listeners = vm.$options._parentListeners;\n  if (listeners) {\n    updateComponentListeners(vm, listeners);\n  }\n}\n```\n\n- Vueevents\n  - ****\n  - **`this.$on`**\n  - **`this.$emit`**\n\n#### initRender\n\n```javascript\nfunction initRender (vm) {\n  vm._vnode = null; // the root of the child tree\n  vm._staticTrees = null; // v-once cached trees\n  var options = vm.$options;\n  var parentVnode = vm.$vnode = options._parentVnode; // the placeholder node in parent tree\n  var renderContext = parentVnode && parentVnode.context;\n  vm.$slots = resolveSlots(options._renderChildren, renderContext);\n  vm.$scopedSlots = emptyObject;\n  // bind the createElement fn to this instance\n  // so that we get proper render context inside it.\n  // args order: tag, data, children, normalizationType, alwaysNormalize\n  // internal version is used by render functions compiled from templates\n  vm._c = function (a, b, c, d) { return createElement(vm, a, b, c, d, false); };\n  // normalization is always applied for the public version, used in\n  // user-written render functions.\n  vm.$createElement = function (a, b, c, d) { return createElement(vm, a, b, c, d, true); };\n\n  // $attrs & $listeners are exposed for easier HOC creation.\n  // they need to be reactive so that HOCs using them are always updated\n  var parentData = parentVnode && parentVnode.data;\n\n  /* istanbul ignore else */\n  if (process.env.NODE_ENV !== 'production') {\n    defineReactive$$1(vm, '$attrs', parentData && parentData.attrs || emptyObject, function () {\n      !isUpdatingChildComponent && warn(\"$attrs is readonly.\", vm);\n    }, true);\n    defineReactive$$1(vm, '$listeners', options._parentListeners || emptyObject, function () {\n      !isUpdatingChildComponent && warn(\"$listeners is readonly.\", vm);\n    }, true);\n  } else {\n    defineReactive$$1(vm, '$attrs', parentData && parentData.attrs || emptyObject, null, true);\n    defineReactive$$1(vm, '$listeners', options._parentListeners || emptyObject, null, true);\n  }\n}\n```\n\n- vm\n\n  - _vnodeVueDOMVNode\n  - $vnodeVueparenttemplatenode\n\n- resolveSlotsslot$slot\n\n  \n\n  ```javascript\n  function resolveSlots (\n    children,\n    context\n  ) {\n    if (!children || !children.length) {\n      return {}\n    }\n    var slots = {};\n    for (var i = 0, l = children.length; i < l; i++) {\n      var child = children[i];\n      var data = child.data;\n      // remove slot attribute if the node is resolved as a Vue slot node\n      if (data && data.attrs && data.attrs.slot) {\n        delete data.attrs.slot;\n      }\n      // named slots should only be respected if the vnode was rendered in the\n      // same context.\n      if ((child.context === context || child.fnContext === context) &&\n        data && data.slot != null\n      ) {\n        var name = data.slot;\n        var slot = (slots[name] || (slots[name] = []));\n        if (child.tag === 'template') { // template\n          slot.push.apply(slot, child.children || []);\n        } else {\n          slot.push(child);\n        }\n      } else {\n        (slots.default || (slots.default = [])).push(child);\n      }\n    }\n    // ignore slots that contains only whitespace\n    for (var name$1 in slots) {\n      if (slots[name$1].every(isWhitespace)) {\n        delete slots[name$1];\n      }\n    }\n    return slots\n  }\n  ```\n\n- $createElement_cVDOMDOM\n\n- `$attrs``$listeners`\n\n#### callHook('beforeCreated')\n\n`beforeCreated`\n\n```javascript\nfunction callHook (vm, hook) {\n  // #7573 disable dep collection when invoking lifecycle hooks\n  pushTarget();\n  var handlers = vm.$options[hook];\n  var info = hook + \" hook\";\n  if (handlers) {\n    for (var i = 0, j = handlers.length; i < j; i++) {\n      invokeWithErrorHandling(handlers[i], vm, null, vm, info);\n    }\n  }\n  if (vm._hasHookEvent) {\n    vm.$emit('hook:' + hook);\n  }\n  popTarget();\n}\n```\n\n- Dep\n- `handlers`\n- **invokeWithErrorHandling**\n\n#### initInjections\n\n```javascript\nfunction initInjections (vm) {\n  var result = resolveInject(vm.$options.inject, vm);\n  if (result) {\n    toggleObserving(false);\n    Object.keys(result).forEach(function (key) {\n      /* istanbul ignore else */\n      if (process.env.NODE_ENV !== 'production') {\n        defineReactive$$1(vm, key, result[key], function () {\n          warn(\n            \"Avoid mutating an injected value directly since the changes will be \" +\n            \"overwritten whenever the provided component re-renders. \" +\n            \"injection being mutated: \\\"\" + key + \"\\\"\",\n            vm\n          );\n        });\n      } else {\n        defineReactive$$1(vm, key, result[key]);\n      }\n    });\n    toggleObserving(true);\n  }\n}\n```\n\n- provide\n\n  ```javascript\n  function resolveInject (inject, vm) {\n    if (inject) {\n      // inject is :any because flow is not smart enough to figure out cached\n      var result = Object.create(null);\n      var keys = hasSymbol\n        ? Reflect.ownKeys(inject)\n        : Object.keys(inject);\n  \n      for (var i = 0; i < keys.length; i++) {\n        var key = keys[i];\n        // #6574 in case the inject object is observed...\n        if (key === '__ob__') { continue }\n        var provideKey = inject[key].from;\n        var source = vm;\n        while (source) {\n          if (source._provided && hasOwn(source._provided, provideKey)) {\n            result[key] = source._provided[provideKey];\n            break\n          }\n          source = source.$parent;\n        }\n        if (!source) {\n          if ('default' in inject[key]) {\n            var provideDefault = inject[key].default;\n            result[key] = typeof provideDefault === 'function'\n              ? provideDefault.call(vm)\n              : provideDefault;\n          } else if (process.env.NODE_ENV !== 'production') {\n            warn((\"Injection \\\"\" + key + \"\\\" not found\"), vm);\n          }\n        }\n      }\n      return result\n    }\n  }\n  ```\n\n  - injectkeyprovide\n\n- **injectdefineReactive$$1**\n\n#### initState\n\n```javascript\nfunction initState (vm) {\n  vm._watchers = [];\n  var opts = vm.$options;\n  if (opts.props) { initProps(vm, opts.props); }\n  if (opts.methods) { initMethods(vm, opts.methods); }\n  if (opts.data) {\n    initData(vm);\n  } else {\n    observe(vm._data = {}, true /* asRootData */);\n  }\n  if (opts.computed) { initComputed(vm, opts.computed); }\n  if (opts.watch && opts.watch !== nativeWatch) {\n    initWatch(vm, opts.watch);\n  }\n}\n```\n\n- initStateoption\n  - props\n  - methods\n  - data\n  - computed\n  - watch\n\n##### initProps\n\n```javascript\nfunction initProps (vm, propsOptions) {\n  var propsData = vm.$options.propsData || {};\n  var props = vm._props = {};\n  // cache prop keys so that future props updates can iterate using Array\n  // instead of dynamic object key enumeration.\n  var keys = vm.$options._propKeys = [];\n  var isRoot = !vm.$parent;\n  // root instance props should be converted\n  if (!isRoot) {\n    toggleObserving(false);\n  }\n  var loop = function ( key ) {\n    keys.push(key);\n    var value = validateProp(key, propsOptions, propsData, vm);\n    /* istanbul ignore else */\n    if (process.env.NODE_ENV !== 'production') {\n      var hyphenatedKey = hyphenate(key);\n      if (isReservedAttribute(hyphenatedKey) ||\n          config.isReservedAttr(hyphenatedKey)) {\n        warn(\n          (\"\\\"\" + hyphenatedKey + \"\\\" is a reserved attribute and cannot be used as component prop.\"),\n          vm\n        );\n      }\n      defineReactive$$1(props, key, value, function () {\n        if (!isRoot && !isUpdatingChildComponent) {\n          warn(\n            \"Avoid mutating a prop directly since the value will be \" +\n            \"overwritten whenever the parent component re-renders. \" +\n            \"Instead, use a data or computed property based on the prop's \" +\n            \"value. Prop being mutated: \\\"\" + key + \"\\\"\",\n            vm\n          );\n        }\n      });\n    } else {\n      defineReactive$$1(props, key, value);\n    }\n    // static props are already proxied on the component's prototype\n    // during Vue.extend(). We only need to proxy props defined at\n    // instantiation here.\n    if (!(key in vm)) {\n      proxy(vm, \"_props\", key);\n    }\n  };\n\n  for (var key in propsOptions) loop( key );\n  toggleObserving(true);\n}\n```\n\n- props\n\n- validatePropprops\n\n  ```javascript\n  function validateProp (\n    key,\n    propOptions,\n    propsData,\n    vm\n  ) {\n    var prop = propOptions[key];\n    var absent = !hasOwn(propsData, key);\n    var value = propsData[key];\n    // boolean casting\n    var booleanIndex = getTypeIndex(Boolean, prop.type);\n    if (booleanIndex > -1) {\n      if (absent && !hasOwn(prop, 'default')) {\n        value = false;\n      } else if (value === '' || value === hyphenate(key)) {\n        // only cast empty string / same name to boolean if\n        // boolean has higher priority\n        var stringIndex = getTypeIndex(String, prop.type);\n        if (stringIndex < 0 || booleanIndex < stringIndex) {\n          value = true;\n        }\n      }\n    }\n    // check default value\n    if (value === undefined) {\n      value = getPropDefaultValue(vm, prop, key);\n      // since the default value is a fresh copy,\n      // make sure to observe it.\n      var prevShouldObserve = shouldObserve;\n      toggleObserving(true);\n      observe(value);\n      toggleObserving(prevShouldObserve);\n    }\n    if (\n      process.env.NODE_ENV !== 'production' &&\n      // skip validation for weex recycle-list child component props\n      !(false)\n    ) {\n      assertProp(prop, key, value, vm, absent);\n    }\n    return value\n  }\n  ```\n\n  - **propstype**\n  - **props**\n  - **props**\n\n- \n\n##### initMethods\n\n```javascript\nfunction initMethods (vm, methods) {\n  var props = vm.$options.props;\n  for (var key in methods) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof methods[key] !== 'function') {\n        warn(\n          \"Method \\\"\" + key + \"\\\" has type \\\"\" + (typeof methods[key]) + \"\\\" in the component definition. \" +\n          \"Did you reference the function correctly?\",\n          vm\n        );\n      }\n      if (props && hasOwn(props, key)) {\n        warn(\n          (\"Method \\\"\" + key + \"\\\" has already been defined as a prop.\"),\n          vm\n        );\n      }\n      if ((key in vm) && isReserved(key)) {\n        warn(\n          \"Method \\\"\" + key + \"\\\" conflicts with an existing Vue instance method. \" +\n          \"Avoid defining component methods that start with _ or $.\"\n        );\n      }\n    }\n    vm[key] = typeof methods[key] !== 'function' ? noop : bind(methods[key], vm);\n  }\n}\n```\n\n- bindthisvmVue\n\n##### initData\n\n```javascript\nfunction initData (vm) {\n  var data = vm.$options.data;\n  data = vm._data = typeof data === 'function'\n    ? getData(data, vm)\n    : data || {};\n  if (!isPlainObject(data)) {\n    data = {};\n    process.env.NODE_ENV !== 'production' && warn(\n      'data functions should return an object:\\n' +\n      'https://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function',\n      vm\n    );\n  }\n  // proxy data on instance\n  var keys = Object.keys(data);\n  var props = vm.$options.props;\n  var methods = vm.$options.methods;\n  var i = keys.length;\n  while (i--) {\n    var key = keys[i];\n    if (process.env.NODE_ENV !== 'production') {\n      if (methods && hasOwn(methods, key)) {\n        warn(\n          (\"Method \\\"\" + key + \"\\\" has already been defined as a data property.\"),\n          vm\n        );\n      }\n    }\n    if (props && hasOwn(props, key)) {\n      process.env.NODE_ENV !== 'production' && warn(\n        \"The data property \\\"\" + key + \"\\\" is already declared as a prop. \" +\n        \"Use prop default value instead.\",\n        vm\n      );\n    } else if (!isReserved(key)) {\n      proxy(vm, \"_data\", key);\n    }\n  }\n  // observe data\n  observe(data, true /* asRootData */);\n}\n```\n\n- datagetData\n- \n  - propsdataplainObje\n- proxy`_data`\n- **data**\n\n##### initComputed\n\n```javascript\nfunction initComputed (vm, computed) {\n  // $flow-disable-line\n  var watchers = vm._computedWatchers = Object.create(null);\n  // computed properties are just getters during SSR\n  var isSSR = isServerRendering();\n\n  for (var key in computed) {\n    var userDef = computed[key];\n    var getter = typeof userDef === 'function' ? userDef : userDef.get;\n    if (process.env.NODE_ENV !== 'production' && getter == null) {\n      warn(\n        (\"Getter is missing for computed property \\\"\" + key + \"\\\".\"),\n        vm\n      );\n    }\n\n    if (!isSSR) {\n      // create internal watcher for the computed property.\n      watchers[key] = new Watcher(\n        vm,\n        getter || noop,\n        noop,\n        computedWatcherOptions\n      );\n    }\n\n    // component-defined computed properties are already defined on the\n    // component prototype. We only need to define computed properties defined\n    // at instantiation here.\n    if (!(key in vm)) {\n      defineComputed(vm, key, userDef);\n    } else if (process.env.NODE_ENV !== 'production') {\n      if (key in vm.$data) {\n        warn((\"The computed property \\\"\" + key + \"\\\" is already defined in data.\"), vm);\n      } else if (vm.$options.props && key in vm.$options.props) {\n        warn((\"The computed property \\\"\" + key + \"\\\" is already defined as a prop.\"), vm);\n      } else if (vm.$options.methods && key in vm.$options.methods) {\n        warn((\"The computed property \\\"\" + key + \"\\\" is already defined as a method.\"), vm);\n      }\n    }\n  }\n}\n```\n\n- computedwatcher\n- computedwatcher\n- defineComputedcomputedvmwatcher\n\n##### initWatch\n\n```javascript\nfunction initWatch (vm, watch) {\n  for (var key in watch) {\n    var handler = watch[key];\n    if (Array.isArray(handler)) {\n      for (var i = 0; i < handler.length; i++) {\n        createWatcher(vm, key, handler[i]);\n      }\n    } else {\n      createWatcher(vm, key, handler);\n    }\n  }\n}\n```\n\n- watcher`Vue.$watch`\n- `Vue.$watch`watcher\n\n#### initProvide\n\n```javascript\nfunction initProvide (vm) {\n  var provide = vm.$options.provide;\n  if (provide) {\n    vm._provided = typeof provide === 'function'\n      ? provide.call(vm)\n      : provide;\n  }\n}\n```\n\n- providevm\n\n#### callHook('created')\n\n- `created`\n\n### $mount\n\n- `_init`el\n\n```javascript\nVue.prototype.$mount = function (\n  el,\n  hydrating\n) {\n  el = el && query(el);\n\n  /* istanbul ignore if */\n  if (el === document.body || el === document.documentElement) {\n    process.env.NODE_ENV !== 'production' && warn(\n      \"Do not mount Vue to <html> or <body> - mount to normal elements instead.\"\n    );\n    return this\n  }\n\n  var options = this.$options;\n  // resolve template/el and convert to render function\n  if (!options.render) {\n    var template = options.template;\n    if (template) {\n      if (typeof template === 'string') {\n        if (template.charAt(0) === '#') {\n          template = idToTemplate(template);\n          /* istanbul ignore if */\n          if (process.env.NODE_ENV !== 'production' && !template) {\n            warn(\n              (\"Template element not found or is empty: \" + (options.template)),\n              this\n            );\n          }\n        }\n      } else if (template.nodeType) {\n        template = template.innerHTML;\n      } else {\n        if (process.env.NODE_ENV !== 'production') {\n          warn('invalid template option:' + template, this);\n        }\n        return this\n      }\n    } else if (el) {\n      template = getOuterHTML(el);\n    }\n    if (template) {\n      /* istanbul ignore if */\n      if (process.env.NODE_ENV !== 'production' && config.performance && mark) {\n        mark('compile');\n      }\n\n      var ref = compileToFunctions(template, {\n        outputSourceRange: process.env.NODE_ENV !== 'production',\n        shouldDecodeNewlines: shouldDecodeNewlines,\n        shouldDecodeNewlinesForHref: shouldDecodeNewlinesForHref,\n        delimiters: options.delimiters,\n        comments: options.comments\n      }, this);\n      var render = ref.render;\n      var staticRenderFns = ref.staticRenderFns;\n      options.render = render;\n      options.staticRenderFns = staticRenderFns;\n\n      /* istanbul ignore if */\n      if (process.env.NODE_ENV !== 'production' && config.performance && mark) {\n        mark('compile end');\n        measure((\"vue \" + (this._name) + \" compile\"), 'compile', 'compile end');\n      }\n    }\n  }\n  return mount.call(this, el, hydrating)\n};\n```\n\n- `query``el`DOM\n\n- **`template`render**\n\n  - **compileToFunctions**\n    - **templateast`$createElement`VDOM`$createElement`VNode**\n  - **VueJSX**\n\n- mount\n\n  ```javascript\n  // public mount method\n  Vue.prototype.$mount = function (\n    el,\n    hydrating\n  ) {\n    el = el && inBrowser ? query(el) : undefined;\n    return mountComponent(this, el, hydrating)\n  };\n  ```\n\n  - mount$mount\n\n### mountComponent\n\n```javascript\nfunction mountComponent (\n  vm,\n  el,\n  hydrating\n) {\n  vm.$el = el;\n  if (!vm.$options.render) {\n    vm.$options.render = createEmptyVNode;\n    if (process.env.NODE_ENV !== 'production') {\n      /* istanbul ignore if */\n      if ((vm.$options.template && vm.$options.template.charAt(0) !== '#') ||\n        vm.$options.el || el) {\n        warn(\n          'You are using the runtime-only build of Vue where the template ' +\n          'compiler is not available. Either pre-compile the templates into ' +\n          'render functions, or use the compiler-included build.',\n          vm\n        );\n      } else {\n        warn(\n          'Failed to mount component: template or render function not defined.',\n          vm\n        );\n      }\n    }\n  }\n  callHook(vm, 'beforeMount');\n\n  var updateComponent;\n  /* istanbul ignore if */\n  if (process.env.NODE_ENV !== 'production' && config.performance && mark) {\n    updateComponent = function () {\n      var name = vm._name;\n      var id = vm._uid;\n      var startTag = \"vue-perf-start:\" + id;\n      var endTag = \"vue-perf-end:\" + id;\n\n      mark(startTag);\n      var vnode = vm._render();\n      mark(endTag);\n      measure((\"vue \" + name + \" render\"), startTag, endTag);\n\n      mark(startTag);\n      vm._update(vnode, hydrating);\n      mark(endTag);\n      measure((\"vue \" + name + \" patch\"), startTag, endTag);\n    };\n  } else {\n    updateComponent = function () {\n      vm._update(vm._render(), hydrating);\n    };\n  }\n\n  // we set this to vm._watcher inside the watcher's constructor\n  // since the watcher's initial patch may call $forceUpdate (e.g. inside child\n  // component's mounted hook), which relies on vm._watcher being already defined\n  new Watcher(vm, updateComponent, noop, {\n    before: function before () {\n      if (vm._isMounted && !vm._isDestroyed) {\n        callHook(vm, 'beforeUpdate');\n      }\n    }\n  }, true /* isRenderWatcher */);\n  hydrating = false;\n\n  // manually mounted instance, call mounted on self\n  // mounted is called for render-created child components in its inserted hook\n  if (vm.$vnode == null) {\n    vm._isMounted = true;\n    callHook(vm, 'mounted');\n  }\n  return vm\n}\n```\n\n- optionrendertemplateJSX\n- **`beforeMounted`**\n- **`updateComponent``vm._udpate(vm._render)`**\n- `updateComponent``exprOrFn`watcher\n- `mounted`\n\n#### Watcher\n\n```javascript\nvar Watcher = function Watcher (\n  vm,\n  expOrFn,\n  cb,\n  options,\n  isRenderWatcher\n) {\n  this.vm = vm;\n  if (isRenderWatcher) {\n    vm._watcher = this;\n  }\n  vm._watchers.push(this);\n  // options\n  if (options) {\n    this.deep = !!options.deep;\n    this.user = !!options.user;\n    this.lazy = !!options.lazy;\n    this.sync = !!options.sync;\n    this.before = options.before;\n  } else {\n    this.deep = this.user = this.lazy = this.sync = false;\n  }\n  this.cb = cb;\n  this.id = ++uid$2; // uid for batching\n  this.active = true;\n  this.dirty = this.lazy; // for lazy watchers\n  this.deps = [];\n  this.newDeps = [];\n  this.depIds = new _Set();\n  this.newDepIds = new _Set();\n  this.expression = process.env.NODE_ENV !== 'production'\n    ? expOrFn.toString()\n    : '';\n  // parse expression for getter\n  if (typeof expOrFn === 'function') {\n    this.getter = expOrFn;\n  } else {\n    this.getter = parsePath(expOrFn);\n    if (!this.getter) {\n      this.getter = noop;\n      process.env.NODE_ENV !== 'production' && warn(\n        \"Failed watching path: \\\"\" + expOrFn + \"\\\" \" +\n        'Watcher only accepts simple dot-delimited paths. ' +\n        'For full control, use a function instead.',\n        vm\n      );\n    }\n  }\n  this.value = this.lazy\n    ? undefined\n    : this.get();\n};\n```\n\n- Watcher`get`\n\n- **`get`Watchergetter**\n\n  - `mountComponent``updateComponent`\n\n    ```javascript\n    updateComponent = function () {\n        vm._update(vm._render(), hydrating);\n    };\n    ```\n\n#### _render\n\n```javascript\nVue.prototype._render = function () {\n    var vm = this;\n    var ref = vm.$options;\n    var render = ref.render;\n    var _parentVnode = ref._parentVnode;\n\n    if (_parentVnode) {\n        vm.$scopedSlots = normalizeScopedSlots(\n            _parentVnode.data.scopedSlots,\n            vm.$slots,\n            vm.$scopedSlots\n        );\n    }\n\n    // set parent vnode. this allows render functions to have access\n    // to the data on the placeholder node.\n    vm.$vnode = _parentVnode;\n    // render self\n    var vnode;\n    try {\n        // There's no need to maintain a stack because all render fns are called\n        // separately from one another. Nested component's render fns are called\n        // when parent component is patched.\n        currentRenderingInstance = vm;\n        vnode = render.call(vm._renderProxy, vm.$createElement);\n    } catch (e) {\n        handleError(e, vm, \"render\");\n        // return error render result,\n        // or previous vnode to prevent render error causing blank component\n        /* istanbul ignore else */\n        if (process.env.NODE_ENV !== 'production' && vm.$options.renderError) {\n            try {\n                vnode = vm.$options.renderError.call(vm._renderProxy, vm.$createElement, e);\n            } catch (e) {\n                handleError(e, vm, \"renderError\");\n                vnode = vm._vnode;\n            }\n        } else {\n            vnode = vm._vnode;\n        }\n    } finally {\n        currentRenderingInstance = null;\n    }\n    // if the returned array contains only a single node, allow it\n    if (Array.isArray(vnode) && vnode.length === 1) {\n        vnode = vnode[0];\n    }\n    // return empty vnode in case the render function errored out\n    if (!(vnode instanceof VNode)) {\n        if (process.env.NODE_ENV !== 'production' && Array.isArray(vnode)) {\n            warn(\n                'Multiple root nodes returned from render function. Render function ' +\n                'should return a single root node.',\n                vm\n            );\n        }\n        vnode = createEmptyVNode();\n    }\n    // set parent\n    vnode.parent = _parentVnode;\n    return vnode\n};\n```\n\n- **`_render``$createElement`VNode**\n\n#### _update\n\n```javascript\n  Vue.prototype._update = function (vnode, hydrating) {\n    var vm = this;\n    var prevEl = vm.$el;\n    var prevVnode = vm._vnode;\n    var restoreActiveInstance = setActiveInstance(vm);\n    vm._vnode = vnode;\n    // Vue.prototype.__patch__ is injected in entry points\n    // based on the rendering backend used.\n    if (!prevVnode) {\n      // initial render\n      vm.$el = vm.__patch__(vm.$el, vnode, hydrating, false /* removeOnly */);\n    } else {\n      // updates\n      vm.$el = vm.__patch__(prevVnode, vnode);\n    }\n    restoreActiveInstance();\n    // update __vue__ reference\n    if (prevEl) {\n      prevEl.__vue__ = null;\n    }\n    if (vm.$el) {\n      vm.$el.__vue__ = vm;\n    }\n    // if parent is an HOC, update its $el as well\n    if (vm.$vnode && vm.$parent && vm.$vnode === vm.$parent._vnode) {\n      vm.$parent.$el = vm.$el;\n    }\n    // updated hook is called by the scheduler to ensure that children are\n    // updated in a parent's updated hook.\n  };\n```\n\n- **`_update`patchVNodeDOM**\n\n#### patch\n\n```javascript\nfunction patch (oldVnode, vnode, hydrating, removeOnly) {\n    if (isUndef(vnode)) {\n        // VNodeVNodeVNode\n        if (isDef(oldVnode)) { invokeDestroyHook(oldVnode); }\n        return\n    }\n\n    var isInitialPatch = false;\n    var insertedVnodeQueue = [];\n\n    if (isUndef(oldVnode)) {\n        // VNode\n        // empty mount (likely as component), create new root element\n        isInitialPatch = true;\n        createElm(vnode, insertedVnodeQueue);\n    } else {\n        var isRealElement = isDef(oldVnode.nodeType);\n        if (!isRealElement && sameVnode(oldVnode, vnode)) {\n            // patch existing root node\n            patchVnode(oldVnode, vnode, insertedVnodeQueue, null, null, removeOnly);\n        } else {\n            if (isRealElement) {\n                // mounting to a real element\n                // check if this is server-rendered content and if we can perform\n                // a successful hydration.\n                if (oldVnode.nodeType === 1 && oldVnode.hasAttribute(SSR_ATTR)) {\n                    oldVnode.removeAttribute(SSR_ATTR);\n                    hydrating = true;\n                }\n                if (isTrue(hydrating)) {\n                    if (hydrate(oldVnode, vnode, insertedVnodeQueue)) {\n                        invokeInsertHook(vnode, insertedVnodeQueue, true);\n                        return oldVnode\n                    } else if (process.env.NODE_ENV !== 'production') {\n                        warn(\n                            'The client-side rendered virtual DOM tree is not matching ' +\n                            'server-rendered content. This is likely caused by incorrect ' +\n                            'HTML markup, for example nesting block-level elements inside ' +\n                            '<p>, or missing <tbody>. Bailing hydration and performing ' +\n                            'full client-side render.'\n                        );\n                    }\n                }\n                // either not server-rendered, or hydration failed.\n                // create an empty node and replace it\n                oldVnode = emptyNodeAt(oldVnode);\n            }\n\n            // replacing existing element\n            var oldElm = oldVnode.elm;\n            var parentElm = nodeOps.parentNode(oldElm);\n\n            // create new node\n            createElm(\n                vnode,\n                insertedVnodeQueue,\n                // extremely rare edge case: do not insert if old element is in a\n                // leaving transition. Only happens when combining transition +\n                // keep-alive + HOCs. (#4590)\n                oldElm._leaveCb ? null : parentElm,\n                nodeOps.nextSibling(oldElm)\n            );\n\n            // update parent placeholder node element, recursively\n            if (isDef(vnode.parent)) {\n                var ancestor = vnode.parent;\n                var patchable = isPatchable(vnode);\n                while (ancestor) {\n                    for (var i = 0; i < cbs.destroy.length; ++i) {\n                        cbs.destroy[i](ancestor);\n                    }\n                    ancestor.elm = vnode.elm;\n                    if (patchable) {\n                        for (var i$1 = 0; i$1 < cbs.create.length; ++i$1) {\n                            cbs.create[i$1](emptyNode, ancestor);\n                        }\n                        // #6513\n                        // invoke insert hooks that may have been merged by create hooks.\n                        // e.g. for directives that uses the \"inserted\" hook.\n                        var insert = ancestor.data.hook.insert;\n                        if (insert.merged) {\n                            // start at index 1 to avoid re-invoking component mounted hook\n                            for (var i$2 = 1; i$2 < insert.fns.length; i$2++) {\n                                insert.fns[i$2]();\n                            }\n                        }\n                    } else {\n                        registerRef(ancestor);\n                    }\n                    ancestor = ancestor.parent;\n                }\n            }\n\n            // destroy old node\n            if (isDef(parentElm)) {\n                removeVnodes([oldVnode], 0, 0);\n            } else if (isDef(oldVnode.tag)) {\n                invokeDestroyHook(oldVnode);\n            }\n        }\n    }\n\n    invokeInsertHook(vnode, insertedVnodeQueue, isInitialPatch);\n    return vnode.elm\n}\n```\n\n- **`patch`DOM**\n  - **`patchVnode`DOMDIFF**\n\n- **`createElm`VNodeDOMDOM**\n  - **oldDOM**\n\n#### createElm\n\n```javascript\nfunction createElm (\nvnode,\n insertedVnodeQueue,\n parentElm,\n refElm,\n nested,\n ownerArray,\n index\n) {\n    if (isDef(vnode.elm) && isDef(ownerArray)) {\n        // This vnode was used in a previous render!\n        // now it's used as a new node, overwriting its elm would cause\n        // potential patch errors down the road when it's used as an insertion\n        // reference node. Instead, we clone the node on-demand before creating\n        // associated DOM element for it.\n        vnode = ownerArray[index] = cloneVNode(vnode);\n    }\n\n    vnode.isRootInsert = !nested; // for transition enter check\n    if (createComponent(vnode, insertedVnodeQueue, parentElm, refElm)) {\n        return\n    }\n\n    var data = vnode.data;\n    var children = vnode.children;\n    var tag = vnode.tag;\n    if (isDef(tag)) {\n        if (process.env.NODE_ENV !== 'production') {\n            if (data && data.pre) {\n                creatingElmInVPre++;\n            }\n            if (isUnknownElement$$1(vnode, creatingElmInVPre)) {\n                warn(\n                    'Unknown custom element: <' + tag + '> - did you ' +\n                    'register the component correctly? For recursive components, ' +\n                    'make sure to provide the \"name\" option.',\n                    vnode.context\n                );\n            }\n        }\n\n        vnode.elm = vnode.ns\n            ? nodeOps.createElementNS(vnode.ns, tag)\n        : nodeOps.createElement(tag, vnode);\n        setScope(vnode);\n\n        /* istanbul ignore if */\n        {\n            createChildren(vnode, children, insertedVnodeQueue);\n            if (isDef(data)) {\n                invokeCreateHooks(vnode, insertedVnodeQueue);\n            }\n            insert(parentElm, vnode.elm, refElm);\n        }\n\n        if (process.env.NODE_ENV !== 'production' && data && data.pre) {\n            creatingElmInVPre--;\n        }\n    } else if (isTrue(vnode.isComment)) {\n        vnode.elm = nodeOps.createComment(vnode.text);\n        insert(parentElm, vnode.elm, refElm);\n    } else {\n        vnode.elm = nodeOps.createTextNode(vnode.text);\n        insert(parentElm, vnode.elm, refElm);\n    }\n}\n```\n\n- **`createComponent`**\n\n- **HTML`nodeOps.createElement`**\n\n  - **`nodeOps.createElement`DOM**\n\n    ```javascript\n    function createElement$1 (tagName, vnode) {\n      var elm = document.createElement(tagName);\n      if (tagName !== 'select') {\n        return elm\n      }\n      // false or null will remove the attribute but undefined will not\n      if (vnode.data && vnode.data.attrs && vnode.data.attrs.multiple !== undefined) {\n        elm.setAttribute('multiple', 'multiple');\n      }\n      return elm\n    }\n    ```\n\n- **`createChildren`**\n\n  ```javascript\n  function createChildren (vnode, children, insertedVnodeQueue) {\n      if (Array.isArray(children)) {\n          if (process.env.NODE_ENV !== 'production') {\n              checkDuplicateKeys(children);\n          }\n          for (var i = 0; i < children.length; ++i) {\n              createElm(children[i], insertedVnodeQueue, vnode.elm, null, true, children, i);\n          }\n      } else if (isPrimitive(vnode.text)) {\n          nodeOps.appendChild(vnode.elm, nodeOps.createTextNode(String(vnode.text)));\n      }\n  }\n  ```\n\n  - **`createElm`DOM**\n\n- **DOM**\n\n- **`insert`**\n\n  ```javascript\n  function insert (parent, elm, ref$$1) {\n      if (isDef(parent)) {\n          if (isDef(ref$$1)) {\n              if (nodeOps.parentNode(ref$$1) === parent) {\n                  nodeOps.insertBefore(parent, elm, ref$$1);\n              }\n          } else {\n              nodeOps.appendChild(parent, elm);\n          }\n      }\n  }\n  ```\n\n  - **Vue**\n\n#### createComponent\n\n```javascript\nfunction createComponent (vnode, insertedVnodeQueue, parentElm, refElm) {\n    var i = vnode.data;\n    if (isDef(i)) {\n        var isReactivated = isDef(vnode.componentInstance) && i.keepAlive;\n        if (isDef(i = i.hook) && isDef(i = i.init)) {\n            i(vnode, false /* hydrating */);\n        }\n        // after calling the init hook, if the vnode is a child component\n        // it should've created a child instance and mounted it. the child\n        // component also has set the placeholder vnode's elm.\n        // in that case we can just return the element and be done.\n        if (isDef(vnode.componentInstance)) {\n            initComponent(vnode, insertedVnodeQueue);\n            insert(parentElm, vnode.elm, refElm);\n            if (isTrue(isReactivated)) {\n                reactivateComponent(vnode, insertedVnodeQueue, parentElm, refElm);\n            }\n            return true\n        }\n    }\n}\n```\n\n- VNodedatahook`render`componentOptions`propstaglistenersCtor`CtorVueComponenttag\n\n- `init`hook\n\n  ```javascript\n  function init (vnode, hydrating) {\n      if (\n          vnode.componentInstance &&\n          !vnode.componentInstance._isDestroyed &&\n          vnode.data.keepAlive\n      ) {\n          // kept-alive components, treat as a patch\n          var mountedNode = vnode; // work around flow\n          componentVNodeHooks.prepatch(mountedNode, mountedNode);\n      } else {\n          var child = vnode.componentInstance = createComponentInstanceForVnode(\n              vnode,\n              activeInstance\n          );\n          child.$mount(hydrating ? vnode.elm : undefined, hydrating);\n      }\n  },\n  ```\n\n  - **`createComponentInstanceForVnode`VueComponentVue.__init**\n  - **`el``init``VueComponent``init`$mount**\n    - `init`\n\n#### invokeInsertHook\n\n```javascript\nfunction invokeInsertHook (vnode, queue, initial) {\n    // delay insert hooks for component root nodes, invoke them after the\n    // element is really inserted\n    if (isTrue(initial) && isDef(vnode.parent)) {\n        vnode.parent.data.pendingInsert = queue;\n    } else {\n        for (var i = 0; i < queue.length; ++i) {\n            queue[i].data.hook.insert(queue[i]);\n        }\n    }\n}\n```\n\n- **`insert`hook`patch`**\n  - **`mounted`**\n  - **`v-model`DOM**\n\n\n","source":"_posts/vue2SourceDebug.md","raw":"---\ntitle: vue2SourceDebug\ndate: 2021-11-15 09:29:39\ntags:\n- Vue\n- source\ncategories:\n- Vue\ndescription: Vue2debug\ncover: /img/cover_6.webp\ntop_image: https://pic2.zhimg.com/v2-db7221c0d7ca752b2f88d7ca94939976_1440w.jpg?source=172ae18b\n\n---\n## \n\nVuedebugVue\n\n****\n\n- Vue2.6.14\n- webpackdebug\n- \n\n```javascript\n/* index.js */\nimport Vue from \"vue\";\nimport Header from \"./components/Header/index.js\";\n\ndebugger; //debug\n\nexport default new Vue({\n  el: \"#app\",\n  data() { // data\n    return {\n      text: \"123\",\n      ifFlag: true,\n      inputValue: \"input something\",\n    };\n  },\n  methods: { // methods\n    hello() {\n      console.log(\"==app hello\");\n    },\n  },\n  computed: { // computed\n    reversedText() {\n      return this.text.split(\"\").reverse().join(\"\");\n    },\n  },\n  // lifeCycle\n  beforeCreate() {\n    console.log(\"==app before create\");\n  },\n  created() {\n    console.log(\"==app created\");\n  },\n  beforeMount() {\n    console.log(\"==app before mount\");\n  },\n  mounted() {\n    console.log(\"==app mounted\");\n  },\n  beforeUpdate() {\n    console.log(\"==app before update\");\n  },\n  updated() {\n    console.log(\"==app updated\");\n  },\n  // component\n  components: {\n    Header,\n  },\n  // template\n  template: `\n    <div id=\"app\" @click=\"hello\">\n      <div>{{reversedText}}</div>\n      <div v-if=\"ifFlag\">ifFlag is true then I will show</div>\n      <input v-model=\"inputValue\" />\n      <p>what you input is:{{inputValue}}</p>\n      <Header :propValue=\"'from app'\" />\n    </div>\n  `,\n});\n```\n\n- Header\n\n```javascript\n/* Header.js */\nimport Vue from \"vue\";\n\nexport default Vue.component(\"Header\", {\n  template: `\n  <div @click=\"showMsg\" class=\"header\">\n    text:{{text}}\n    propValue:{{propValue}}\n  </div>\n  `,\n  data() {\n    return {\n      text: \"i am header\",\n    };\n  },\n  props: [\"propValue\"], // props\n  methods: {\n    showMsg() {\n      console.log(\"==from header\");\n    },\n  },\n  created() {\n    console.log(\"==Header components created\");\n  },\n  mounted() {\n    console.log(\"==Header components mounted\");\n  },\n});\n```\n\n## Vue2debug\n\n**debug**\n\n`export default new Vue({...})`Vue\n\n```javascript\nfunction Vue (options) {\n  if (process.env.NODE_ENV !== 'production' &&\n    !(this instanceof Vue)\n  ) {\n    warn('Vue is a constructor and should be called with the `new` keyword');\n  }\n  this._init(options);\n}\n```\n\n- Vueoptions`_init`\n\n### __init\n\n_initmixinVue\n\n```javascript\nVue.prototype._init = function (options) {\n    var vm = this;\n\n    // a flag to avoid this being observed\n    vm._isVue = true;\n    // merge options\n    if (options && options._isComponent) {\n        // optimize internal component instantiation\n        // since dynamic options merging is pretty slow, and none of the\n        // internal component options needs special treatment.\n        initInternalComponent(vm, options);\n    } else {\n        vm.$options = mergeOptions(\n            resolveConstructorOptions(vm.constructor),\n            options || {},\n            vm\n        );\n    }\n    // expose real self\n    vm._self = vm;\n    initLifecycle(vm);\n    initEvents(vm);\n    initRender(vm);\n    callHook(vm, 'beforeCreate');\n    initInjections(vm); // resolve injections before data/props\n    initState(vm);\n    initProvide(vm); // resolve provide after data/props\n    callHook(vm, 'created');\n\n    if (vm.$options.el) {\n        vm.$mount(vm.$options.el);\n    }\n};\n```\n\n-  vm = Vue\n- Vue`_isVue = true`\n- ****\n- **VueDOM**\n- ****\n\n#### initInternalComponent\n\n- VnodeDOM\n\n```javascript\nfunction initInternalComponent (vm, options) {\n    var opts = vm.$options = Object.create(vm.constructor.options);\n    // doing this because it's faster than dynamic enumeration.\n    var parentVnode = options._parentVnode;\n    opts.parent = options.parent;\n    opts._parentVnode = parentVnode;\n\n    var vnodeComponentOptions = parentVnode.componentOptions;\n    opts.propsData = vnodeComponentOptions.propsData;\n    opts._parentListeners = vnodeComponentOptions.listeners;\n    opts._renderChildren = vnodeComponentOptions.children;\n    opts._componentTag = vnodeComponentOptions.tag;\n\n    if (options.render) {\n        opts.render = options.render;\n        opts.staticRenderFns = options.staticRenderFns;\n    }\n}\n```\n\n- `options.__parentVnode`VNode`options.parentVnode`Vue\n\n#### mergeOptoins\n\n- option\n\n- resolveConstructorOptions`Vue.constructor`\n\n```javascript\n  function mergeOptions (\n    parent, // Vue.constructor\n    child, // option\n    vm // Vue\n  ) {\n    if (process.env.NODE_ENV !== 'production') {\n      checkComponents(child);\n    }\n  \n    normalizeProps(child, vm);\n    normalizeInject(child, vm);\n    normalizeDirectives(child);\n  \n    // Apply extends and mixins on the child options,\n    // but only if it is a raw options object that isn't\n    // the result of another mergeOptions call.\n    // Only merged options has the _base property.\n    if (!child._base) {\n      if (child.extends) {\n        parent = mergeOptions(parent, child.extends, vm);\n      }\n      if (child.mixins) {\n        for (var i = 0, l = child.mixins.length; i < l; i++) {\n          parent = mergeOptions(parent, child.mixins[i], vm);\n        }\n      }\n    }\n  \n    var options = {};\n    var key;\n    for (key in parent) {\n      mergeField(key);\n    }\n    for (key in child) {\n      if (!hasOwn(parent, key)) {\n        mergeField(key);\n      }\n    }\n    function mergeField (key) {\n      var strat = strats[key] || defaultStrat;\n      options[key] = strat(parent[key], child[key], vm, key);\n    }\n    return options\n  }\n  ```\n\n  - `checkComponents`****divhtmldiv\n  - `normalizeProps`**`props`**arrayplainObject\n    - \n  - normalizeInjectnormalizeDirectives\n  - extendsmixins\n  - option****\n    - option\n    - option\n    - option\n\n#### initProxy\n\n- es6proxyVuelog\n\n#### initLifecycle\n\n```javascript\nfunction initLifecycle (vm) {\n  var options = vm.$options;\n\n  // locate first non-abstract parent\n  var parent = options.parent;\n  if (parent && !options.abstract) {\n    while (parent.$options.abstract && parent.$parent) {\n      parent = parent.$parent;\n    }\n    parent.$children.push(vm);\n  }\n\n  vm.$parent = parent;\n  vm.$root = parent ? parent.$root : vm; //  Vue \n\n  vm.$children = []; // \n  vm.$refs = {};\n\n  vm._watcher = null;\n  // lifeCycleflag\n  vm._inactive = null;\n  vm._directInactive = false;\n  vm._isMounted = false;\n  vm._isDestroyed = false;\n  vm._isBeingDestroyed = false;\n}\n```\n\n- keep-alive\n- vm\n\n#### initEvents\n\n```javascript\nfunction initEvents (vm) {\n  vm._events = Object.create(null);\n  vm._hasHookEvent = false;\n  // init parent attached events\n  var listeners = vm.$options._parentListeners;\n  if (listeners) {\n    updateComponentListeners(vm, listeners);\n  }\n}\n```\n\n- Vueevents\n  - ****\n  - **`this.$on`**\n  - **`this.$emit`**\n\n#### initRender\n\n```javascript\nfunction initRender (vm) {\n  vm._vnode = null; // the root of the child tree\n  vm._staticTrees = null; // v-once cached trees\n  var options = vm.$options;\n  var parentVnode = vm.$vnode = options._parentVnode; // the placeholder node in parent tree\n  var renderContext = parentVnode && parentVnode.context;\n  vm.$slots = resolveSlots(options._renderChildren, renderContext);\n  vm.$scopedSlots = emptyObject;\n  // bind the createElement fn to this instance\n  // so that we get proper render context inside it.\n  // args order: tag, data, children, normalizationType, alwaysNormalize\n  // internal version is used by render functions compiled from templates\n  vm._c = function (a, b, c, d) { return createElement(vm, a, b, c, d, false); };\n  // normalization is always applied for the public version, used in\n  // user-written render functions.\n  vm.$createElement = function (a, b, c, d) { return createElement(vm, a, b, c, d, true); };\n\n  // $attrs & $listeners are exposed for easier HOC creation.\n  // they need to be reactive so that HOCs using them are always updated\n  var parentData = parentVnode && parentVnode.data;\n\n  /* istanbul ignore else */\n  if (process.env.NODE_ENV !== 'production') {\n    defineReactive$$1(vm, '$attrs', parentData && parentData.attrs || emptyObject, function () {\n      !isUpdatingChildComponent && warn(\"$attrs is readonly.\", vm);\n    }, true);\n    defineReactive$$1(vm, '$listeners', options._parentListeners || emptyObject, function () {\n      !isUpdatingChildComponent && warn(\"$listeners is readonly.\", vm);\n    }, true);\n  } else {\n    defineReactive$$1(vm, '$attrs', parentData && parentData.attrs || emptyObject, null, true);\n    defineReactive$$1(vm, '$listeners', options._parentListeners || emptyObject, null, true);\n  }\n}\n```\n\n- vm\n\n  - _vnodeVueDOMVNode\n  - $vnodeVueparenttemplatenode\n\n- resolveSlotsslot$slot\n\n  \n\n  ```javascript\n  function resolveSlots (\n    children,\n    context\n  ) {\n    if (!children || !children.length) {\n      return {}\n    }\n    var slots = {};\n    for (var i = 0, l = children.length; i < l; i++) {\n      var child = children[i];\n      var data = child.data;\n      // remove slot attribute if the node is resolved as a Vue slot node\n      if (data && data.attrs && data.attrs.slot) {\n        delete data.attrs.slot;\n      }\n      // named slots should only be respected if the vnode was rendered in the\n      // same context.\n      if ((child.context === context || child.fnContext === context) &&\n        data && data.slot != null\n      ) {\n        var name = data.slot;\n        var slot = (slots[name] || (slots[name] = []));\n        if (child.tag === 'template') { // template\n          slot.push.apply(slot, child.children || []);\n        } else {\n          slot.push(child);\n        }\n      } else {\n        (slots.default || (slots.default = [])).push(child);\n      }\n    }\n    // ignore slots that contains only whitespace\n    for (var name$1 in slots) {\n      if (slots[name$1].every(isWhitespace)) {\n        delete slots[name$1];\n      }\n    }\n    return slots\n  }\n  ```\n\n- $createElement_cVDOMDOM\n\n- `$attrs``$listeners`\n\n#### callHook('beforeCreated')\n\n`beforeCreated`\n\n```javascript\nfunction callHook (vm, hook) {\n  // #7573 disable dep collection when invoking lifecycle hooks\n  pushTarget();\n  var handlers = vm.$options[hook];\n  var info = hook + \" hook\";\n  if (handlers) {\n    for (var i = 0, j = handlers.length; i < j; i++) {\n      invokeWithErrorHandling(handlers[i], vm, null, vm, info);\n    }\n  }\n  if (vm._hasHookEvent) {\n    vm.$emit('hook:' + hook);\n  }\n  popTarget();\n}\n```\n\n- Dep\n- `handlers`\n- **invokeWithErrorHandling**\n\n#### initInjections\n\n```javascript\nfunction initInjections (vm) {\n  var result = resolveInject(vm.$options.inject, vm);\n  if (result) {\n    toggleObserving(false);\n    Object.keys(result).forEach(function (key) {\n      /* istanbul ignore else */\n      if (process.env.NODE_ENV !== 'production') {\n        defineReactive$$1(vm, key, result[key], function () {\n          warn(\n            \"Avoid mutating an injected value directly since the changes will be \" +\n            \"overwritten whenever the provided component re-renders. \" +\n            \"injection being mutated: \\\"\" + key + \"\\\"\",\n            vm\n          );\n        });\n      } else {\n        defineReactive$$1(vm, key, result[key]);\n      }\n    });\n    toggleObserving(true);\n  }\n}\n```\n\n- provide\n\n  ```javascript\n  function resolveInject (inject, vm) {\n    if (inject) {\n      // inject is :any because flow is not smart enough to figure out cached\n      var result = Object.create(null);\n      var keys = hasSymbol\n        ? Reflect.ownKeys(inject)\n        : Object.keys(inject);\n  \n      for (var i = 0; i < keys.length; i++) {\n        var key = keys[i];\n        // #6574 in case the inject object is observed...\n        if (key === '__ob__') { continue }\n        var provideKey = inject[key].from;\n        var source = vm;\n        while (source) {\n          if (source._provided && hasOwn(source._provided, provideKey)) {\n            result[key] = source._provided[provideKey];\n            break\n          }\n          source = source.$parent;\n        }\n        if (!source) {\n          if ('default' in inject[key]) {\n            var provideDefault = inject[key].default;\n            result[key] = typeof provideDefault === 'function'\n              ? provideDefault.call(vm)\n              : provideDefault;\n          } else if (process.env.NODE_ENV !== 'production') {\n            warn((\"Injection \\\"\" + key + \"\\\" not found\"), vm);\n          }\n        }\n      }\n      return result\n    }\n  }\n  ```\n\n  - injectkeyprovide\n\n- **injectdefineReactive$$1**\n\n#### initState\n\n```javascript\nfunction initState (vm) {\n  vm._watchers = [];\n  var opts = vm.$options;\n  if (opts.props) { initProps(vm, opts.props); }\n  if (opts.methods) { initMethods(vm, opts.methods); }\n  if (opts.data) {\n    initData(vm);\n  } else {\n    observe(vm._data = {}, true /* asRootData */);\n  }\n  if (opts.computed) { initComputed(vm, opts.computed); }\n  if (opts.watch && opts.watch !== nativeWatch) {\n    initWatch(vm, opts.watch);\n  }\n}\n```\n\n- initStateoption\n  - props\n  - methods\n  - data\n  - computed\n  - watch\n\n##### initProps\n\n```javascript\nfunction initProps (vm, propsOptions) {\n  var propsData = vm.$options.propsData || {};\n  var props = vm._props = {};\n  // cache prop keys so that future props updates can iterate using Array\n  // instead of dynamic object key enumeration.\n  var keys = vm.$options._propKeys = [];\n  var isRoot = !vm.$parent;\n  // root instance props should be converted\n  if (!isRoot) {\n    toggleObserving(false);\n  }\n  var loop = function ( key ) {\n    keys.push(key);\n    var value = validateProp(key, propsOptions, propsData, vm);\n    /* istanbul ignore else */\n    if (process.env.NODE_ENV !== 'production') {\n      var hyphenatedKey = hyphenate(key);\n      if (isReservedAttribute(hyphenatedKey) ||\n          config.isReservedAttr(hyphenatedKey)) {\n        warn(\n          (\"\\\"\" + hyphenatedKey + \"\\\" is a reserved attribute and cannot be used as component prop.\"),\n          vm\n        );\n      }\n      defineReactive$$1(props, key, value, function () {\n        if (!isRoot && !isUpdatingChildComponent) {\n          warn(\n            \"Avoid mutating a prop directly since the value will be \" +\n            \"overwritten whenever the parent component re-renders. \" +\n            \"Instead, use a data or computed property based on the prop's \" +\n            \"value. Prop being mutated: \\\"\" + key + \"\\\"\",\n            vm\n          );\n        }\n      });\n    } else {\n      defineReactive$$1(props, key, value);\n    }\n    // static props are already proxied on the component's prototype\n    // during Vue.extend(). We only need to proxy props defined at\n    // instantiation here.\n    if (!(key in vm)) {\n      proxy(vm, \"_props\", key);\n    }\n  };\n\n  for (var key in propsOptions) loop( key );\n  toggleObserving(true);\n}\n```\n\n- props\n\n- validatePropprops\n\n  ```javascript\n  function validateProp (\n    key,\n    propOptions,\n    propsData,\n    vm\n  ) {\n    var prop = propOptions[key];\n    var absent = !hasOwn(propsData, key);\n    var value = propsData[key];\n    // boolean casting\n    var booleanIndex = getTypeIndex(Boolean, prop.type);\n    if (booleanIndex > -1) {\n      if (absent && !hasOwn(prop, 'default')) {\n        value = false;\n      } else if (value === '' || value === hyphenate(key)) {\n        // only cast empty string / same name to boolean if\n        // boolean has higher priority\n        var stringIndex = getTypeIndex(String, prop.type);\n        if (stringIndex < 0 || booleanIndex < stringIndex) {\n          value = true;\n        }\n      }\n    }\n    // check default value\n    if (value === undefined) {\n      value = getPropDefaultValue(vm, prop, key);\n      // since the default value is a fresh copy,\n      // make sure to observe it.\n      var prevShouldObserve = shouldObserve;\n      toggleObserving(true);\n      observe(value);\n      toggleObserving(prevShouldObserve);\n    }\n    if (\n      process.env.NODE_ENV !== 'production' &&\n      // skip validation for weex recycle-list child component props\n      !(false)\n    ) {\n      assertProp(prop, key, value, vm, absent);\n    }\n    return value\n  }\n  ```\n\n  - **propstype**\n  - **props**\n  - **props**\n\n- \n\n##### initMethods\n\n```javascript\nfunction initMethods (vm, methods) {\n  var props = vm.$options.props;\n  for (var key in methods) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof methods[key] !== 'function') {\n        warn(\n          \"Method \\\"\" + key + \"\\\" has type \\\"\" + (typeof methods[key]) + \"\\\" in the component definition. \" +\n          \"Did you reference the function correctly?\",\n          vm\n        );\n      }\n      if (props && hasOwn(props, key)) {\n        warn(\n          (\"Method \\\"\" + key + \"\\\" has already been defined as a prop.\"),\n          vm\n        );\n      }\n      if ((key in vm) && isReserved(key)) {\n        warn(\n          \"Method \\\"\" + key + \"\\\" conflicts with an existing Vue instance method. \" +\n          \"Avoid defining component methods that start with _ or $.\"\n        );\n      }\n    }\n    vm[key] = typeof methods[key] !== 'function' ? noop : bind(methods[key], vm);\n  }\n}\n```\n\n- bindthisvmVue\n\n##### initData\n\n```javascript\nfunction initData (vm) {\n  var data = vm.$options.data;\n  data = vm._data = typeof data === 'function'\n    ? getData(data, vm)\n    : data || {};\n  if (!isPlainObject(data)) {\n    data = {};\n    process.env.NODE_ENV !== 'production' && warn(\n      'data functions should return an object:\\n' +\n      'https://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function',\n      vm\n    );\n  }\n  // proxy data on instance\n  var keys = Object.keys(data);\n  var props = vm.$options.props;\n  var methods = vm.$options.methods;\n  var i = keys.length;\n  while (i--) {\n    var key = keys[i];\n    if (process.env.NODE_ENV !== 'production') {\n      if (methods && hasOwn(methods, key)) {\n        warn(\n          (\"Method \\\"\" + key + \"\\\" has already been defined as a data property.\"),\n          vm\n        );\n      }\n    }\n    if (props && hasOwn(props, key)) {\n      process.env.NODE_ENV !== 'production' && warn(\n        \"The data property \\\"\" + key + \"\\\" is already declared as a prop. \" +\n        \"Use prop default value instead.\",\n        vm\n      );\n    } else if (!isReserved(key)) {\n      proxy(vm, \"_data\", key);\n    }\n  }\n  // observe data\n  observe(data, true /* asRootData */);\n}\n```\n\n- datagetData\n- \n  - propsdataplainObje\n- proxy`_data`\n- **data**\n\n##### initComputed\n\n```javascript\nfunction initComputed (vm, computed) {\n  // $flow-disable-line\n  var watchers = vm._computedWatchers = Object.create(null);\n  // computed properties are just getters during SSR\n  var isSSR = isServerRendering();\n\n  for (var key in computed) {\n    var userDef = computed[key];\n    var getter = typeof userDef === 'function' ? userDef : userDef.get;\n    if (process.env.NODE_ENV !== 'production' && getter == null) {\n      warn(\n        (\"Getter is missing for computed property \\\"\" + key + \"\\\".\"),\n        vm\n      );\n    }\n\n    if (!isSSR) {\n      // create internal watcher for the computed property.\n      watchers[key] = new Watcher(\n        vm,\n        getter || noop,\n        noop,\n        computedWatcherOptions\n      );\n    }\n\n    // component-defined computed properties are already defined on the\n    // component prototype. We only need to define computed properties defined\n    // at instantiation here.\n    if (!(key in vm)) {\n      defineComputed(vm, key, userDef);\n    } else if (process.env.NODE_ENV !== 'production') {\n      if (key in vm.$data) {\n        warn((\"The computed property \\\"\" + key + \"\\\" is already defined in data.\"), vm);\n      } else if (vm.$options.props && key in vm.$options.props) {\n        warn((\"The computed property \\\"\" + key + \"\\\" is already defined as a prop.\"), vm);\n      } else if (vm.$options.methods && key in vm.$options.methods) {\n        warn((\"The computed property \\\"\" + key + \"\\\" is already defined as a method.\"), vm);\n      }\n    }\n  }\n}\n```\n\n- computedwatcher\n- computedwatcher\n- defineComputedcomputedvmwatcher\n\n##### initWatch\n\n```javascript\nfunction initWatch (vm, watch) {\n  for (var key in watch) {\n    var handler = watch[key];\n    if (Array.isArray(handler)) {\n      for (var i = 0; i < handler.length; i++) {\n        createWatcher(vm, key, handler[i]);\n      }\n    } else {\n      createWatcher(vm, key, handler);\n    }\n  }\n}\n```\n\n- watcher`Vue.$watch`\n- `Vue.$watch`watcher\n\n#### initProvide\n\n```javascript\nfunction initProvide (vm) {\n  var provide = vm.$options.provide;\n  if (provide) {\n    vm._provided = typeof provide === 'function'\n      ? provide.call(vm)\n      : provide;\n  }\n}\n```\n\n- providevm\n\n#### callHook('created')\n\n- `created`\n\n### $mount\n\n- `_init`el\n\n```javascript\nVue.prototype.$mount = function (\n  el,\n  hydrating\n) {\n  el = el && query(el);\n\n  /* istanbul ignore if */\n  if (el === document.body || el === document.documentElement) {\n    process.env.NODE_ENV !== 'production' && warn(\n      \"Do not mount Vue to <html> or <body> - mount to normal elements instead.\"\n    );\n    return this\n  }\n\n  var options = this.$options;\n  // resolve template/el and convert to render function\n  if (!options.render) {\n    var template = options.template;\n    if (template) {\n      if (typeof template === 'string') {\n        if (template.charAt(0) === '#') {\n          template = idToTemplate(template);\n          /* istanbul ignore if */\n          if (process.env.NODE_ENV !== 'production' && !template) {\n            warn(\n              (\"Template element not found or is empty: \" + (options.template)),\n              this\n            );\n          }\n        }\n      } else if (template.nodeType) {\n        template = template.innerHTML;\n      } else {\n        if (process.env.NODE_ENV !== 'production') {\n          warn('invalid template option:' + template, this);\n        }\n        return this\n      }\n    } else if (el) {\n      template = getOuterHTML(el);\n    }\n    if (template) {\n      /* istanbul ignore if */\n      if (process.env.NODE_ENV !== 'production' && config.performance && mark) {\n        mark('compile');\n      }\n\n      var ref = compileToFunctions(template, {\n        outputSourceRange: process.env.NODE_ENV !== 'production',\n        shouldDecodeNewlines: shouldDecodeNewlines,\n        shouldDecodeNewlinesForHref: shouldDecodeNewlinesForHref,\n        delimiters: options.delimiters,\n        comments: options.comments\n      }, this);\n      var render = ref.render;\n      var staticRenderFns = ref.staticRenderFns;\n      options.render = render;\n      options.staticRenderFns = staticRenderFns;\n\n      /* istanbul ignore if */\n      if (process.env.NODE_ENV !== 'production' && config.performance && mark) {\n        mark('compile end');\n        measure((\"vue \" + (this._name) + \" compile\"), 'compile', 'compile end');\n      }\n    }\n  }\n  return mount.call(this, el, hydrating)\n};\n```\n\n- `query``el`DOM\n\n- **`template`render**\n\n  - **compileToFunctions**\n    - **templateast`$createElement`VDOM`$createElement`VNode**\n  - **VueJSX**\n\n- mount\n\n  ```javascript\n  // public mount method\n  Vue.prototype.$mount = function (\n    el,\n    hydrating\n  ) {\n    el = el && inBrowser ? query(el) : undefined;\n    return mountComponent(this, el, hydrating)\n  };\n  ```\n\n  - mount$mount\n\n### mountComponent\n\n```javascript\nfunction mountComponent (\n  vm,\n  el,\n  hydrating\n) {\n  vm.$el = el;\n  if (!vm.$options.render) {\n    vm.$options.render = createEmptyVNode;\n    if (process.env.NODE_ENV !== 'production') {\n      /* istanbul ignore if */\n      if ((vm.$options.template && vm.$options.template.charAt(0) !== '#') ||\n        vm.$options.el || el) {\n        warn(\n          'You are using the runtime-only build of Vue where the template ' +\n          'compiler is not available. Either pre-compile the templates into ' +\n          'render functions, or use the compiler-included build.',\n          vm\n        );\n      } else {\n        warn(\n          'Failed to mount component: template or render function not defined.',\n          vm\n        );\n      }\n    }\n  }\n  callHook(vm, 'beforeMount');\n\n  var updateComponent;\n  /* istanbul ignore if */\n  if (process.env.NODE_ENV !== 'production' && config.performance && mark) {\n    updateComponent = function () {\n      var name = vm._name;\n      var id = vm._uid;\n      var startTag = \"vue-perf-start:\" + id;\n      var endTag = \"vue-perf-end:\" + id;\n\n      mark(startTag);\n      var vnode = vm._render();\n      mark(endTag);\n      measure((\"vue \" + name + \" render\"), startTag, endTag);\n\n      mark(startTag);\n      vm._update(vnode, hydrating);\n      mark(endTag);\n      measure((\"vue \" + name + \" patch\"), startTag, endTag);\n    };\n  } else {\n    updateComponent = function () {\n      vm._update(vm._render(), hydrating);\n    };\n  }\n\n  // we set this to vm._watcher inside the watcher's constructor\n  // since the watcher's initial patch may call $forceUpdate (e.g. inside child\n  // component's mounted hook), which relies on vm._watcher being already defined\n  new Watcher(vm, updateComponent, noop, {\n    before: function before () {\n      if (vm._isMounted && !vm._isDestroyed) {\n        callHook(vm, 'beforeUpdate');\n      }\n    }\n  }, true /* isRenderWatcher */);\n  hydrating = false;\n\n  // manually mounted instance, call mounted on self\n  // mounted is called for render-created child components in its inserted hook\n  if (vm.$vnode == null) {\n    vm._isMounted = true;\n    callHook(vm, 'mounted');\n  }\n  return vm\n}\n```\n\n- optionrendertemplateJSX\n- **`beforeMounted`**\n- **`updateComponent``vm._udpate(vm._render)`**\n- `updateComponent``exprOrFn`watcher\n- `mounted`\n\n#### Watcher\n\n```javascript\nvar Watcher = function Watcher (\n  vm,\n  expOrFn,\n  cb,\n  options,\n  isRenderWatcher\n) {\n  this.vm = vm;\n  if (isRenderWatcher) {\n    vm._watcher = this;\n  }\n  vm._watchers.push(this);\n  // options\n  if (options) {\n    this.deep = !!options.deep;\n    this.user = !!options.user;\n    this.lazy = !!options.lazy;\n    this.sync = !!options.sync;\n    this.before = options.before;\n  } else {\n    this.deep = this.user = this.lazy = this.sync = false;\n  }\n  this.cb = cb;\n  this.id = ++uid$2; // uid for batching\n  this.active = true;\n  this.dirty = this.lazy; // for lazy watchers\n  this.deps = [];\n  this.newDeps = [];\n  this.depIds = new _Set();\n  this.newDepIds = new _Set();\n  this.expression = process.env.NODE_ENV !== 'production'\n    ? expOrFn.toString()\n    : '';\n  // parse expression for getter\n  if (typeof expOrFn === 'function') {\n    this.getter = expOrFn;\n  } else {\n    this.getter = parsePath(expOrFn);\n    if (!this.getter) {\n      this.getter = noop;\n      process.env.NODE_ENV !== 'production' && warn(\n        \"Failed watching path: \\\"\" + expOrFn + \"\\\" \" +\n        'Watcher only accepts simple dot-delimited paths. ' +\n        'For full control, use a function instead.',\n        vm\n      );\n    }\n  }\n  this.value = this.lazy\n    ? undefined\n    : this.get();\n};\n```\n\n- Watcher`get`\n\n- **`get`Watchergetter**\n\n  - `mountComponent``updateComponent`\n\n    ```javascript\n    updateComponent = function () {\n        vm._update(vm._render(), hydrating);\n    };\n    ```\n\n#### _render\n\n```javascript\nVue.prototype._render = function () {\n    var vm = this;\n    var ref = vm.$options;\n    var render = ref.render;\n    var _parentVnode = ref._parentVnode;\n\n    if (_parentVnode) {\n        vm.$scopedSlots = normalizeScopedSlots(\n            _parentVnode.data.scopedSlots,\n            vm.$slots,\n            vm.$scopedSlots\n        );\n    }\n\n    // set parent vnode. this allows render functions to have access\n    // to the data on the placeholder node.\n    vm.$vnode = _parentVnode;\n    // render self\n    var vnode;\n    try {\n        // There's no need to maintain a stack because all render fns are called\n        // separately from one another. Nested component's render fns are called\n        // when parent component is patched.\n        currentRenderingInstance = vm;\n        vnode = render.call(vm._renderProxy, vm.$createElement);\n    } catch (e) {\n        handleError(e, vm, \"render\");\n        // return error render result,\n        // or previous vnode to prevent render error causing blank component\n        /* istanbul ignore else */\n        if (process.env.NODE_ENV !== 'production' && vm.$options.renderError) {\n            try {\n                vnode = vm.$options.renderError.call(vm._renderProxy, vm.$createElement, e);\n            } catch (e) {\n                handleError(e, vm, \"renderError\");\n                vnode = vm._vnode;\n            }\n        } else {\n            vnode = vm._vnode;\n        }\n    } finally {\n        currentRenderingInstance = null;\n    }\n    // if the returned array contains only a single node, allow it\n    if (Array.isArray(vnode) && vnode.length === 1) {\n        vnode = vnode[0];\n    }\n    // return empty vnode in case the render function errored out\n    if (!(vnode instanceof VNode)) {\n        if (process.env.NODE_ENV !== 'production' && Array.isArray(vnode)) {\n            warn(\n                'Multiple root nodes returned from render function. Render function ' +\n                'should return a single root node.',\n                vm\n            );\n        }\n        vnode = createEmptyVNode();\n    }\n    // set parent\n    vnode.parent = _parentVnode;\n    return vnode\n};\n```\n\n- **`_render``$createElement`VNode**\n\n#### _update\n\n```javascript\n  Vue.prototype._update = function (vnode, hydrating) {\n    var vm = this;\n    var prevEl = vm.$el;\n    var prevVnode = vm._vnode;\n    var restoreActiveInstance = setActiveInstance(vm);\n    vm._vnode = vnode;\n    // Vue.prototype.__patch__ is injected in entry points\n    // based on the rendering backend used.\n    if (!prevVnode) {\n      // initial render\n      vm.$el = vm.__patch__(vm.$el, vnode, hydrating, false /* removeOnly */);\n    } else {\n      // updates\n      vm.$el = vm.__patch__(prevVnode, vnode);\n    }\n    restoreActiveInstance();\n    // update __vue__ reference\n    if (prevEl) {\n      prevEl.__vue__ = null;\n    }\n    if (vm.$el) {\n      vm.$el.__vue__ = vm;\n    }\n    // if parent is an HOC, update its $el as well\n    if (vm.$vnode && vm.$parent && vm.$vnode === vm.$parent._vnode) {\n      vm.$parent.$el = vm.$el;\n    }\n    // updated hook is called by the scheduler to ensure that children are\n    // updated in a parent's updated hook.\n  };\n```\n\n- **`_update`patchVNodeDOM**\n\n#### patch\n\n```javascript\nfunction patch (oldVnode, vnode, hydrating, removeOnly) {\n    if (isUndef(vnode)) {\n        // VNodeVNodeVNode\n        if (isDef(oldVnode)) { invokeDestroyHook(oldVnode); }\n        return\n    }\n\n    var isInitialPatch = false;\n    var insertedVnodeQueue = [];\n\n    if (isUndef(oldVnode)) {\n        // VNode\n        // empty mount (likely as component), create new root element\n        isInitialPatch = true;\n        createElm(vnode, insertedVnodeQueue);\n    } else {\n        var isRealElement = isDef(oldVnode.nodeType);\n        if (!isRealElement && sameVnode(oldVnode, vnode)) {\n            // patch existing root node\n            patchVnode(oldVnode, vnode, insertedVnodeQueue, null, null, removeOnly);\n        } else {\n            if (isRealElement) {\n                // mounting to a real element\n                // check if this is server-rendered content and if we can perform\n                // a successful hydration.\n                if (oldVnode.nodeType === 1 && oldVnode.hasAttribute(SSR_ATTR)) {\n                    oldVnode.removeAttribute(SSR_ATTR);\n                    hydrating = true;\n                }\n                if (isTrue(hydrating)) {\n                    if (hydrate(oldVnode, vnode, insertedVnodeQueue)) {\n                        invokeInsertHook(vnode, insertedVnodeQueue, true);\n                        return oldVnode\n                    } else if (process.env.NODE_ENV !== 'production') {\n                        warn(\n                            'The client-side rendered virtual DOM tree is not matching ' +\n                            'server-rendered content. This is likely caused by incorrect ' +\n                            'HTML markup, for example nesting block-level elements inside ' +\n                            '<p>, or missing <tbody>. Bailing hydration and performing ' +\n                            'full client-side render.'\n                        );\n                    }\n                }\n                // either not server-rendered, or hydration failed.\n                // create an empty node and replace it\n                oldVnode = emptyNodeAt(oldVnode);\n            }\n\n            // replacing existing element\n            var oldElm = oldVnode.elm;\n            var parentElm = nodeOps.parentNode(oldElm);\n\n            // create new node\n            createElm(\n                vnode,\n                insertedVnodeQueue,\n                // extremely rare edge case: do not insert if old element is in a\n                // leaving transition. Only happens when combining transition +\n                // keep-alive + HOCs. (#4590)\n                oldElm._leaveCb ? null : parentElm,\n                nodeOps.nextSibling(oldElm)\n            );\n\n            // update parent placeholder node element, recursively\n            if (isDef(vnode.parent)) {\n                var ancestor = vnode.parent;\n                var patchable = isPatchable(vnode);\n                while (ancestor) {\n                    for (var i = 0; i < cbs.destroy.length; ++i) {\n                        cbs.destroy[i](ancestor);\n                    }\n                    ancestor.elm = vnode.elm;\n                    if (patchable) {\n                        for (var i$1 = 0; i$1 < cbs.create.length; ++i$1) {\n                            cbs.create[i$1](emptyNode, ancestor);\n                        }\n                        // #6513\n                        // invoke insert hooks that may have been merged by create hooks.\n                        // e.g. for directives that uses the \"inserted\" hook.\n                        var insert = ancestor.data.hook.insert;\n                        if (insert.merged) {\n                            // start at index 1 to avoid re-invoking component mounted hook\n                            for (var i$2 = 1; i$2 < insert.fns.length; i$2++) {\n                                insert.fns[i$2]();\n                            }\n                        }\n                    } else {\n                        registerRef(ancestor);\n                    }\n                    ancestor = ancestor.parent;\n                }\n            }\n\n            // destroy old node\n            if (isDef(parentElm)) {\n                removeVnodes([oldVnode], 0, 0);\n            } else if (isDef(oldVnode.tag)) {\n                invokeDestroyHook(oldVnode);\n            }\n        }\n    }\n\n    invokeInsertHook(vnode, insertedVnodeQueue, isInitialPatch);\n    return vnode.elm\n}\n```\n\n- **`patch`DOM**\n  - **`patchVnode`DOMDIFF**\n\n- **`createElm`VNodeDOMDOM**\n  - **oldDOM**\n\n#### createElm\n\n```javascript\nfunction createElm (\nvnode,\n insertedVnodeQueue,\n parentElm,\n refElm,\n nested,\n ownerArray,\n index\n) {\n    if (isDef(vnode.elm) && isDef(ownerArray)) {\n        // This vnode was used in a previous render!\n        // now it's used as a new node, overwriting its elm would cause\n        // potential patch errors down the road when it's used as an insertion\n        // reference node. Instead, we clone the node on-demand before creating\n        // associated DOM element for it.\n        vnode = ownerArray[index] = cloneVNode(vnode);\n    }\n\n    vnode.isRootInsert = !nested; // for transition enter check\n    if (createComponent(vnode, insertedVnodeQueue, parentElm, refElm)) {\n        return\n    }\n\n    var data = vnode.data;\n    var children = vnode.children;\n    var tag = vnode.tag;\n    if (isDef(tag)) {\n        if (process.env.NODE_ENV !== 'production') {\n            if (data && data.pre) {\n                creatingElmInVPre++;\n            }\n            if (isUnknownElement$$1(vnode, creatingElmInVPre)) {\n                warn(\n                    'Unknown custom element: <' + tag + '> - did you ' +\n                    'register the component correctly? For recursive components, ' +\n                    'make sure to provide the \"name\" option.',\n                    vnode.context\n                );\n            }\n        }\n\n        vnode.elm = vnode.ns\n            ? nodeOps.createElementNS(vnode.ns, tag)\n        : nodeOps.createElement(tag, vnode);\n        setScope(vnode);\n\n        /* istanbul ignore if */\n        {\n            createChildren(vnode, children, insertedVnodeQueue);\n            if (isDef(data)) {\n                invokeCreateHooks(vnode, insertedVnodeQueue);\n            }\n            insert(parentElm, vnode.elm, refElm);\n        }\n\n        if (process.env.NODE_ENV !== 'production' && data && data.pre) {\n            creatingElmInVPre--;\n        }\n    } else if (isTrue(vnode.isComment)) {\n        vnode.elm = nodeOps.createComment(vnode.text);\n        insert(parentElm, vnode.elm, refElm);\n    } else {\n        vnode.elm = nodeOps.createTextNode(vnode.text);\n        insert(parentElm, vnode.elm, refElm);\n    }\n}\n```\n\n- **`createComponent`**\n\n- **HTML`nodeOps.createElement`**\n\n  - **`nodeOps.createElement`DOM**\n\n    ```javascript\n    function createElement$1 (tagName, vnode) {\n      var elm = document.createElement(tagName);\n      if (tagName !== 'select') {\n        return elm\n      }\n      // false or null will remove the attribute but undefined will not\n      if (vnode.data && vnode.data.attrs && vnode.data.attrs.multiple !== undefined) {\n        elm.setAttribute('multiple', 'multiple');\n      }\n      return elm\n    }\n    ```\n\n- **`createChildren`**\n\n  ```javascript\n  function createChildren (vnode, children, insertedVnodeQueue) {\n      if (Array.isArray(children)) {\n          if (process.env.NODE_ENV !== 'production') {\n              checkDuplicateKeys(children);\n          }\n          for (var i = 0; i < children.length; ++i) {\n              createElm(children[i], insertedVnodeQueue, vnode.elm, null, true, children, i);\n          }\n      } else if (isPrimitive(vnode.text)) {\n          nodeOps.appendChild(vnode.elm, nodeOps.createTextNode(String(vnode.text)));\n      }\n  }\n  ```\n\n  - **`createElm`DOM**\n\n- **DOM**\n\n- **`insert`**\n\n  ```javascript\n  function insert (parent, elm, ref$$1) {\n      if (isDef(parent)) {\n          if (isDef(ref$$1)) {\n              if (nodeOps.parentNode(ref$$1) === parent) {\n                  nodeOps.insertBefore(parent, elm, ref$$1);\n              }\n          } else {\n              nodeOps.appendChild(parent, elm);\n          }\n      }\n  }\n  ```\n\n  - **Vue**\n\n#### createComponent\n\n```javascript\nfunction createComponent (vnode, insertedVnodeQueue, parentElm, refElm) {\n    var i = vnode.data;\n    if (isDef(i)) {\n        var isReactivated = isDef(vnode.componentInstance) && i.keepAlive;\n        if (isDef(i = i.hook) && isDef(i = i.init)) {\n            i(vnode, false /* hydrating */);\n        }\n        // after calling the init hook, if the vnode is a child component\n        // it should've created a child instance and mounted it. the child\n        // component also has set the placeholder vnode's elm.\n        // in that case we can just return the element and be done.\n        if (isDef(vnode.componentInstance)) {\n            initComponent(vnode, insertedVnodeQueue);\n            insert(parentElm, vnode.elm, refElm);\n            if (isTrue(isReactivated)) {\n                reactivateComponent(vnode, insertedVnodeQueue, parentElm, refElm);\n            }\n            return true\n        }\n    }\n}\n```\n\n- VNodedatahook`render`componentOptions`propstaglistenersCtor`CtorVueComponenttag\n\n- `init`hook\n\n  ```javascript\n  function init (vnode, hydrating) {\n      if (\n          vnode.componentInstance &&\n          !vnode.componentInstance._isDestroyed &&\n          vnode.data.keepAlive\n      ) {\n          // kept-alive components, treat as a patch\n          var mountedNode = vnode; // work around flow\n          componentVNodeHooks.prepatch(mountedNode, mountedNode);\n      } else {\n          var child = vnode.componentInstance = createComponentInstanceForVnode(\n              vnode,\n              activeInstance\n          );\n          child.$mount(hydrating ? vnode.elm : undefined, hydrating);\n      }\n  },\n  ```\n\n  - **`createComponentInstanceForVnode`VueComponentVue.__init**\n  - **`el``init``VueComponent``init`$mount**\n    - `init`\n\n#### invokeInsertHook\n\n```javascript\nfunction invokeInsertHook (vnode, queue, initial) {\n    // delay insert hooks for component root nodes, invoke them after the\n    // element is really inserted\n    if (isTrue(initial) && isDef(vnode.parent)) {\n        vnode.parent.data.pendingInsert = queue;\n    } else {\n        for (var i = 0; i < queue.length; ++i) {\n            queue[i].data.hook.insert(queue[i]);\n        }\n    }\n}\n```\n\n- **`insert`hook`patch`**\n  - **`mounted`**\n  - **`v-model`DOM**\n\n\n","slug":"vue2SourceDebug","published":1,"updated":"2022-04-11T08:31:50.830Z","_id":"ckw0gwfcc0000u3o3dgw5f1d4","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>VuedebugVue</p>\n<p><strong></strong></p>\n<ul>\n<li>Vue2.6.14</li>\n<li>webpackdebug</li>\n<li></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* index.js */</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">Vue</span> <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">Header</span> <span class=\"keyword\">from</span> <span class=\"string\">&quot;./components/Header/index.js&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">debugger</span>; <span class=\"comment\">//debug</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Vue</span>(&#123;</span><br><span class=\"line\">  <span class=\"attr\">el</span>: <span class=\"string\">&quot;#app&quot;</span>,</span><br><span class=\"line\">  <span class=\"title function_\">data</span>(<span class=\"params\"></span>) &#123; <span class=\"comment\">// data</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      <span class=\"attr\">text</span>: <span class=\"string\">&quot;123&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">ifFlag</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      <span class=\"attr\">inputValue</span>: <span class=\"string\">&quot;input something&quot;</span>,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">methods</span>: &#123; <span class=\"comment\">// methods</span></span><br><span class=\"line\">    <span class=\"title function_\">hello</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;==app hello&quot;</span>);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">computed</span>: &#123; <span class=\"comment\">// computed</span></span><br><span class=\"line\">    <span class=\"title function_\">reversedText</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"variable language_\">this</span>.<span class=\"property\">text</span>.<span class=\"title function_\">split</span>(<span class=\"string\">&quot;&quot;</span>).<span class=\"title function_\">reverse</span>().<span class=\"title function_\">join</span>(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">// lifeCycle</span></span><br><span class=\"line\">  <span class=\"title function_\">beforeCreate</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;==app before create&quot;</span>);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"title function_\">created</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;==app created&quot;</span>);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"title function_\">beforeMount</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;==app before mount&quot;</span>);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"title function_\">mounted</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;==app mounted&quot;</span>);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"title function_\">beforeUpdate</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;==app before update&quot;</span>);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"title function_\">updated</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;==app updated&quot;</span>);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">// component</span></span><br><span class=\"line\">  <span class=\"attr\">components</span>: &#123;</span><br><span class=\"line\">    <span class=\"title class_\">Header</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">// template</span></span><br><span class=\"line\">  <span class=\"attr\">template</span>: <span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">    &lt;div id=&quot;app&quot; @click=&quot;hello&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">      &lt;div&gt;&#123;&#123;reversedText&#125;&#125;&lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">      &lt;div v-if=&quot;ifFlag&quot;&gt;ifFlag is true then I will show&lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">      &lt;input v-model=&quot;inputValue&quot; /&gt;</span></span><br><span class=\"line\"><span class=\"string\">      &lt;p&gt;what you input is:&#123;&#123;inputValue&#125;&#125;&lt;/p&gt;</span></span><br><span class=\"line\"><span class=\"string\">      &lt;Header :propValue=&quot;&#x27;from app&#x27;&quot; /&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">  `</span>,</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Header</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* Header.js */</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">Vue</span> <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title class_\">Vue</span>.<span class=\"title function_\">component</span>(<span class=\"string\">&quot;Header&quot;</span>, &#123;</span><br><span class=\"line\">  <span class=\"attr\">template</span>: <span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  &lt;div @click=&quot;showMsg&quot; class=&quot;header&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">    text:&#123;&#123;text&#125;&#125;</span></span><br><span class=\"line\"><span class=\"string\">    propValue:&#123;&#123;propValue&#125;&#125;</span></span><br><span class=\"line\"><span class=\"string\">  &lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">  `</span>,</span><br><span class=\"line\">  <span class=\"title function_\">data</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      <span class=\"attr\">text</span>: <span class=\"string\">&quot;i am header&quot;</span>,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">props</span>: [<span class=\"string\">&quot;propValue&quot;</span>], <span class=\"comment\">// props</span></span><br><span class=\"line\">  <span class=\"attr\">methods</span>: &#123;</span><br><span class=\"line\">    <span class=\"title function_\">showMsg</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;==from header&quot;</span>);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"title function_\">created</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;==Header components created&quot;</span>);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"title function_\">mounted</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;==Header components mounted&quot;</span>);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Vue2debug\"><a href=\"#Vue2debug\" class=\"headerlink\" title=\"Vue2debug\"></a>Vue2debug</h2><p><strong>debug</strong></p>\n<p><code>export default new Vue(&#123;...&#125;)</code>Vue</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Vue</span> (options) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span> &amp;&amp;</span><br><span class=\"line\">    !(<span class=\"variable language_\">this</span> <span class=\"keyword\">instanceof</span> <span class=\"title class_\">Vue</span>)</span><br><span class=\"line\">  ) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">warn</span>(<span class=\"string\">&#x27;Vue is a constructor and should be called with the `new` keyword&#x27;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"title function_\">_init</span>(options);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Vueoptions<code>_init</code></li>\n</ul>\n<h3 id=\"init\"><a href=\"#init\" class=\"headerlink\" title=\"__init\"></a>__init</h3><p>_initmixinVue</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title class_\">Vue</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">_init</span> = <span class=\"keyword\">function</span> (<span class=\"params\">options</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> vm = <span class=\"variable language_\">this</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// a flag to avoid this being observed</span></span><br><span class=\"line\">    vm.<span class=\"property\">_isVue</span> = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    <span class=\"comment\">// merge options</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (options &amp;&amp; options.<span class=\"property\">_isComponent</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// optimize internal component instantiation</span></span><br><span class=\"line\">        <span class=\"comment\">// since dynamic options merging is pretty slow, and none of the</span></span><br><span class=\"line\">        <span class=\"comment\">// internal component options needs special treatment.</span></span><br><span class=\"line\">        <span class=\"title function_\">initInternalComponent</span>(vm, options);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        vm.<span class=\"property\">$options</span> = <span class=\"title function_\">mergeOptions</span>(</span><br><span class=\"line\">            <span class=\"title function_\">resolveConstructorOptions</span>(vm.<span class=\"property\">constructor</span>),</span><br><span class=\"line\">            options || &#123;&#125;,</span><br><span class=\"line\">            vm</span><br><span class=\"line\">        );</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// expose real self</span></span><br><span class=\"line\">    vm.<span class=\"property\">_self</span> = vm;</span><br><span class=\"line\">    <span class=\"title function_\">initLifecycle</span>(vm);</span><br><span class=\"line\">    <span class=\"title function_\">initEvents</span>(vm);</span><br><span class=\"line\">    <span class=\"title function_\">initRender</span>(vm);</span><br><span class=\"line\">    <span class=\"title function_\">callHook</span>(vm, <span class=\"string\">&#x27;beforeCreate&#x27;</span>);</span><br><span class=\"line\">    <span class=\"title function_\">initInjections</span>(vm); <span class=\"comment\">// resolve injections before data/props</span></span><br><span class=\"line\">    <span class=\"title function_\">initState</span>(vm);</span><br><span class=\"line\">    <span class=\"title function_\">initProvide</span>(vm); <span class=\"comment\">// resolve provide after data/props</span></span><br><span class=\"line\">    <span class=\"title function_\">callHook</span>(vm, <span class=\"string\">&#x27;created&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (vm.<span class=\"property\">$options</span>.<span class=\"property\">el</span>) &#123;</span><br><span class=\"line\">        vm.$mount(vm.<span class=\"property\">$options</span>.<span class=\"property\">el</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li> vm &#x3D; Vue</li>\n<li>Vue<code>_isVue = true</code></li>\n<li><strong></strong></li>\n<li><strong>VueDOM</strong></li>\n<li><strong></strong></li>\n</ul>\n<h4 id=\"initInternalComponent\"><a href=\"#initInternalComponent\" class=\"headerlink\" title=\"initInternalComponent\"></a>initInternalComponent</h4><ul>\n<li>VnodeDOM</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">initInternalComponent</span> (vm, options) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> opts = vm.<span class=\"property\">$options</span> = <span class=\"title class_\">Object</span>.<span class=\"title function_\">create</span>(vm.<span class=\"property\">constructor</span>.<span class=\"property\">options</span>);</span><br><span class=\"line\">    <span class=\"comment\">// doing this because it&#x27;s faster than dynamic enumeration.</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> parentVnode = options.<span class=\"property\">_parentVnode</span>;</span><br><span class=\"line\">    opts.<span class=\"property\">parent</span> = options.<span class=\"property\">parent</span>;</span><br><span class=\"line\">    opts.<span class=\"property\">_parentVnode</span> = parentVnode;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> vnodeComponentOptions = parentVnode.<span class=\"property\">componentOptions</span>;</span><br><span class=\"line\">    opts.<span class=\"property\">propsData</span> = vnodeComponentOptions.<span class=\"property\">propsData</span>;</span><br><span class=\"line\">    opts.<span class=\"property\">_parentListeners</span> = vnodeComponentOptions.<span class=\"property\">listeners</span>;</span><br><span class=\"line\">    opts.<span class=\"property\">_renderChildren</span> = vnodeComponentOptions.<span class=\"property\">children</span>;</span><br><span class=\"line\">    opts.<span class=\"property\">_componentTag</span> = vnodeComponentOptions.<span class=\"property\">tag</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (options.<span class=\"property\">render</span>) &#123;</span><br><span class=\"line\">        opts.<span class=\"property\">render</span> = options.<span class=\"property\">render</span>;</span><br><span class=\"line\">        opts.<span class=\"property\">staticRenderFns</span> = options.<span class=\"property\">staticRenderFns</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>options.__parentVnode</code>VNode<code>options.parentVnode</code>Vue</li>\n</ul>\n<h4 id=\"mergeOptoins\"><a href=\"#mergeOptoins\" class=\"headerlink\" title=\"mergeOptoins\"></a>mergeOptoins</h4><ul>\n<li><p>option</p>\n</li>\n<li><p>resolveConstructorOptions<code>Vue.constructor</code></p>\n</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">mergeOptions</span> (</span><br><span class=\"line\">  parent, <span class=\"comment\">// Vue.constructor</span></span><br><span class=\"line\">  child, <span class=\"comment\">// option</span></span><br><span class=\"line\">  vm <span class=\"comment\">// Vue</span></span><br><span class=\"line\">) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span>) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">checkComponents</span>(child);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"title function_\">normalizeProps</span>(child, vm);</span><br><span class=\"line\">  <span class=\"title function_\">normalizeInject</span>(child, vm);</span><br><span class=\"line\">  <span class=\"title function_\">normalizeDirectives</span>(child);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// Apply extends and mixins on the child options,</span></span><br><span class=\"line\">  <span class=\"comment\">// but only if it is a raw options object that isn&#x27;t</span></span><br><span class=\"line\">  <span class=\"comment\">// the result of another mergeOptions call.</span></span><br><span class=\"line\">  <span class=\"comment\">// Only merged options has the _base property.</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!child.<span class=\"property\">_base</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (child.<span class=\"property\">extends</span>) &#123;</span><br><span class=\"line\">      parent = <span class=\"title function_\">mergeOptions</span>(parent, child.<span class=\"property\">extends</span>, vm);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (child.<span class=\"property\">mixins</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, l = child.<span class=\"property\">mixins</span>.<span class=\"property\">length</span>; i &lt; l; i++) &#123;</span><br><span class=\"line\">        parent = <span class=\"title function_\">mergeOptions</span>(parent, child.<span class=\"property\">mixins</span>[i], vm);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">var</span> options = &#123;&#125;;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> key;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (key <span class=\"keyword\">in</span> parent) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">mergeField</span>(key);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (key <span class=\"keyword\">in</span> child) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"title function_\">hasOwn</span>(parent, key)) &#123;</span><br><span class=\"line\">      <span class=\"title function_\">mergeField</span>(key);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">function</span> <span class=\"title function_\">mergeField</span> (key) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> strat = strats[key] || defaultStrat;</span><br><span class=\"line\">    options[key] = <span class=\"title function_\">strat</span>(parent[key], child[key], vm, key);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> options</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>checkComponents</code><strong></strong>divhtmldiv</li>\n<li><code>normalizeProps</code>**<code>props</code>**arrayplainObject<ul>\n<li></li>\n</ul>\n</li>\n<li>normalizeInjectnormalizeDirectives</li>\n<li>extendsmixins</li>\n<li>option<strong></strong><ul>\n<li>option</li>\n<li>option</li>\n<li>option</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"initProxy\"><a href=\"#initProxy\" class=\"headerlink\" title=\"initProxy\"></a>initProxy</h4><ul>\n<li>es6proxyVuelog</li>\n</ul>\n<h4 id=\"initLifecycle\"><a href=\"#initLifecycle\" class=\"headerlink\" title=\"initLifecycle\"></a>initLifecycle</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">initLifecycle</span> (vm) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> options = vm.<span class=\"property\">$options</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// locate first non-abstract parent</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> parent = options.<span class=\"property\">parent</span>;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (parent &amp;&amp; !options.<span class=\"property\">abstract</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (parent.<span class=\"property\">$options</span>.<span class=\"property\">abstract</span> &amp;&amp; parent.<span class=\"property\">$parent</span>) &#123;</span><br><span class=\"line\">      parent = parent.<span class=\"property\">$parent</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    parent.<span class=\"property\">$children</span>.<span class=\"title function_\">push</span>(vm);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  vm.<span class=\"property\">$parent</span> = parent;</span><br><span class=\"line\">  vm.<span class=\"property\">$root</span> = parent ? parent.<span class=\"property\">$root</span> : vm; <span class=\"comment\">//  Vue </span></span><br><span class=\"line\"></span><br><span class=\"line\">  vm.<span class=\"property\">$children</span> = []; <span class=\"comment\">// </span></span><br><span class=\"line\">  vm.<span class=\"property\">$refs</span> = &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  vm.<span class=\"property\">_watcher</span> = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"comment\">// lifeCycleflag</span></span><br><span class=\"line\">  vm.<span class=\"property\">_inactive</span> = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  vm.<span class=\"property\">_directInactive</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  vm.<span class=\"property\">_isMounted</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  vm.<span class=\"property\">_isDestroyed</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  vm.<span class=\"property\">_isBeingDestroyed</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>keep-alive</li>\n<li>vm</li>\n</ul>\n<h4 id=\"initEvents\"><a href=\"#initEvents\" class=\"headerlink\" title=\"initEvents\"></a>initEvents</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">initEvents</span> (vm) &#123;</span><br><span class=\"line\">  vm.<span class=\"property\">_events</span> = <span class=\"title class_\">Object</span>.<span class=\"title function_\">create</span>(<span class=\"literal\">null</span>);</span><br><span class=\"line\">  vm.<span class=\"property\">_hasHookEvent</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  <span class=\"comment\">// init parent attached events</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> listeners = vm.<span class=\"property\">$options</span>.<span class=\"property\">_parentListeners</span>;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (listeners) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">updateComponentListeners</span>(vm, listeners);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Vueevents<ul>\n<li><strong></strong></li>\n<li><strong><code>this.$on</code></strong></li>\n<li><strong><code>this.$emit</code></strong></li>\n</ul>\n</li>\n</ul>\n<h4 id=\"initRender\"><a href=\"#initRender\" class=\"headerlink\" title=\"initRender\"></a>initRender</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">initRender</span> (vm) &#123;</span><br><span class=\"line\">  vm.<span class=\"property\">_vnode</span> = <span class=\"literal\">null</span>; <span class=\"comment\">// the root of the child tree</span></span><br><span class=\"line\">  vm.<span class=\"property\">_staticTrees</span> = <span class=\"literal\">null</span>; <span class=\"comment\">// v-once cached trees</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> options = vm.<span class=\"property\">$options</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> parentVnode = vm.<span class=\"property\">$vnode</span> = options.<span class=\"property\">_parentVnode</span>; <span class=\"comment\">// the placeholder node in parent tree</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> renderContext = parentVnode &amp;&amp; parentVnode.<span class=\"property\">context</span>;</span><br><span class=\"line\">  vm.<span class=\"property\">$slots</span> = <span class=\"title function_\">resolveSlots</span>(options.<span class=\"property\">_renderChildren</span>, renderContext);</span><br><span class=\"line\">  vm.<span class=\"property\">$scopedSlots</span> = emptyObject;</span><br><span class=\"line\">  <span class=\"comment\">// bind the createElement fn to this instance</span></span><br><span class=\"line\">  <span class=\"comment\">// so that we get proper render context inside it.</span></span><br><span class=\"line\">  <span class=\"comment\">// args order: tag, data, children, normalizationType, alwaysNormalize</span></span><br><span class=\"line\">  <span class=\"comment\">// internal version is used by render functions compiled from templates</span></span><br><span class=\"line\">  vm.<span class=\"property\">_c</span> = <span class=\"keyword\">function</span> (<span class=\"params\">a, b, c, d</span>) &#123; <span class=\"keyword\">return</span> <span class=\"title function_\">createElement</span>(vm, a, b, c, d, <span class=\"literal\">false</span>); &#125;;</span><br><span class=\"line\">  <span class=\"comment\">// normalization is always applied for the public version, used in</span></span><br><span class=\"line\">  <span class=\"comment\">// user-written render functions.</span></span><br><span class=\"line\">  vm.<span class=\"property\">$createElement</span> = <span class=\"keyword\">function</span> (<span class=\"params\">a, b, c, d</span>) &#123; <span class=\"keyword\">return</span> <span class=\"title function_\">createElement</span>(vm, a, b, c, d, <span class=\"literal\">true</span>); &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// $attrs &amp; $listeners are exposed for easier HOC creation.</span></span><br><span class=\"line\">  <span class=\"comment\">// they need to be reactive so that HOCs using them are always updated</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> parentData = parentVnode &amp;&amp; parentVnode.<span class=\"property\">data</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/* istanbul ignore else */</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span>) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">defineReactive$$1</span>(vm, <span class=\"string\">&#x27;$attrs&#x27;</span>, parentData &amp;&amp; parentData.<span class=\"property\">attrs</span> || emptyObject, <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">      !isUpdatingChildComponent &amp;&amp; <span class=\"title function_\">warn</span>(<span class=\"string\">&quot;$attrs is readonly.&quot;</span>, vm);</span><br><span class=\"line\">    &#125;, <span class=\"literal\">true</span>);</span><br><span class=\"line\">    <span class=\"title function_\">defineReactive$$1</span>(vm, <span class=\"string\">&#x27;$listeners&#x27;</span>, options.<span class=\"property\">_parentListeners</span> || emptyObject, <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">      !isUpdatingChildComponent &amp;&amp; <span class=\"title function_\">warn</span>(<span class=\"string\">&quot;$listeners is readonly.&quot;</span>, vm);</span><br><span class=\"line\">    &#125;, <span class=\"literal\">true</span>);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"title function_\">defineReactive$$1</span>(vm, <span class=\"string\">&#x27;$attrs&#x27;</span>, parentData &amp;&amp; parentData.<span class=\"property\">attrs</span> || emptyObject, <span class=\"literal\">null</span>, <span class=\"literal\">true</span>);</span><br><span class=\"line\">    <span class=\"title function_\">defineReactive$$1</span>(vm, <span class=\"string\">&#x27;$listeners&#x27;</span>, options.<span class=\"property\">_parentListeners</span> || emptyObject, <span class=\"literal\">null</span>, <span class=\"literal\">true</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>vm</p>\n<ul>\n<li>_vnodeVueDOMVNode</li>\n<li>$vnodeVueparenttemplatenode</li>\n</ul>\n</li>\n<li><p>resolveSlotsslot$slot</p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">resolveSlots</span> (</span><br><span class=\"line\">  children,</span><br><span class=\"line\">  context</span><br><span class=\"line\">) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!children || !children.<span class=\"property\">length</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;&#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> slots = &#123;&#125;;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, l = children.<span class=\"property\">length</span>; i &lt; l; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> child = children[i];</span><br><span class=\"line\">    <span class=\"keyword\">var</span> data = child.<span class=\"property\">data</span>;</span><br><span class=\"line\">    <span class=\"comment\">// remove slot attribute if the node is resolved as a Vue slot node</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (data &amp;&amp; data.<span class=\"property\">attrs</span> &amp;&amp; data.<span class=\"property\">attrs</span>.<span class=\"property\">slot</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">delete</span> data.<span class=\"property\">attrs</span>.<span class=\"property\">slot</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// named slots should only be respected if the vnode was rendered in the</span></span><br><span class=\"line\">    <span class=\"comment\">// same context.</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> ((child.<span class=\"property\">context</span> === context || child.<span class=\"property\">fnContext</span> === context) &amp;&amp;</span><br><span class=\"line\">      data &amp;&amp; data.<span class=\"property\">slot</span> != <span class=\"literal\">null</span></span><br><span class=\"line\">    ) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> name = data.<span class=\"property\">slot</span>;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> slot = (slots[name] || (slots[name] = []));</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (child.<span class=\"property\">tag</span> === <span class=\"string\">&#x27;template&#x27;</span>) &#123; <span class=\"comment\">// template</span></span><br><span class=\"line\">        slot.<span class=\"property\">push</span>.<span class=\"title function_\">apply</span>(slot, child.<span class=\"property\">children</span> || []);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        slot.<span class=\"title function_\">push</span>(child);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      (slots.<span class=\"property\">default</span> || (slots.<span class=\"property\">default</span> = [])).<span class=\"title function_\">push</span>(child);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// ignore slots that contains only whitespace</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> name$<span class=\"number\">1</span> <span class=\"keyword\">in</span> slots) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (slots[name$<span class=\"number\">1</span>].<span class=\"title function_\">every</span>(isWhitespace)) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">delete</span> slots[name$<span class=\"number\">1</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> slots</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>$createElement_cVDOMDOM</p>\n</li>\n<li><p><code>$attrs</code><code>$listeners</code></p>\n</li>\n</ul>\n<h4 id=\"callHook-beforeCreated\"><a href=\"#callHook-beforeCreated\" class=\"headerlink\" title=\"callHook(beforeCreated)\"></a>callHook(beforeCreated)</h4><p><code>beforeCreated</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">callHook</span> (vm, hook) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// #7573 disable dep collection when invoking lifecycle hooks</span></span><br><span class=\"line\">  <span class=\"title function_\">pushTarget</span>();</span><br><span class=\"line\">  <span class=\"keyword\">var</span> handlers = vm.<span class=\"property\">$options</span>[hook];</span><br><span class=\"line\">  <span class=\"keyword\">var</span> info = hook + <span class=\"string\">&quot; hook&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (handlers) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, j = handlers.<span class=\"property\">length</span>; i &lt; j; i++) &#123;</span><br><span class=\"line\">      <span class=\"title function_\">invokeWithErrorHandling</span>(handlers[i], vm, <span class=\"literal\">null</span>, vm, info);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (vm.<span class=\"property\">_hasHookEvent</span>) &#123;</span><br><span class=\"line\">    vm.$emit(<span class=\"string\">&#x27;hook:&#x27;</span> + hook);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"title function_\">popTarget</span>();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Dep</li>\n<li><code>handlers</code></li>\n<li><strong>invokeWithErrorHandling</strong></li>\n</ul>\n<h4 id=\"initInjections\"><a href=\"#initInjections\" class=\"headerlink\" title=\"initInjections\"></a>initInjections</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">initInjections</span> (vm) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> result = <span class=\"title function_\">resolveInject</span>(vm.<span class=\"property\">$options</span>.<span class=\"property\">inject</span>, vm);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (result) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">toggleObserving</span>(<span class=\"literal\">false</span>);</span><br><span class=\"line\">    <span class=\"title class_\">Object</span>.<span class=\"title function_\">keys</span>(result).<span class=\"title function_\">forEach</span>(<span class=\"keyword\">function</span> (<span class=\"params\">key</span>) &#123;</span><br><span class=\"line\">      <span class=\"comment\">/* istanbul ignore else */</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span>) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">defineReactive$$1</span>(vm, key, result[key], <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">          <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">            <span class=\"string\">&quot;Avoid mutating an injected value directly since the changes will be &quot;</span> +</span><br><span class=\"line\">            <span class=\"string\">&quot;overwritten whenever the provided component re-renders. &quot;</span> +</span><br><span class=\"line\">            <span class=\"string\">&quot;injection being mutated: \\&quot;&quot;</span> + key + <span class=\"string\">&quot;\\&quot;&quot;</span>,</span><br><span class=\"line\">            vm</span><br><span class=\"line\">          );</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"title function_\">defineReactive$$1</span>(vm, key, result[key]);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"title function_\">toggleObserving</span>(<span class=\"literal\">true</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>provide</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">resolveInject</span> (inject, vm) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (inject) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// inject is :any because flow is not smart enough to figure out cached</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> result = <span class=\"title class_\">Object</span>.<span class=\"title function_\">create</span>(<span class=\"literal\">null</span>);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> keys = hasSymbol</span><br><span class=\"line\">      ? <span class=\"title class_\">Reflect</span>.<span class=\"title function_\">ownKeys</span>(inject)</span><br><span class=\"line\">      : <span class=\"title class_\">Object</span>.<span class=\"title function_\">keys</span>(inject);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; keys.<span class=\"property\">length</span>; i++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> key = keys[i];</span><br><span class=\"line\">      <span class=\"comment\">// #6574 in case the inject object is observed...</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (key === <span class=\"string\">&#x27;__ob__&#x27;</span>) &#123; <span class=\"keyword\">continue</span> &#125;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> provideKey = inject[key].<span class=\"property\">from</span>;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> source = vm;</span><br><span class=\"line\">      <span class=\"keyword\">while</span> (source) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (source.<span class=\"property\">_provided</span> &amp;&amp; <span class=\"title function_\">hasOwn</span>(source.<span class=\"property\">_provided</span>, provideKey)) &#123;</span><br><span class=\"line\">          result[key] = source.<span class=\"property\">_provided</span>[provideKey];</span><br><span class=\"line\">          <span class=\"keyword\">break</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        source = source.<span class=\"property\">$parent</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!source) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"string\">&#x27;default&#x27;</span> <span class=\"keyword\">in</span> inject[key]) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">var</span> provideDefault = inject[key].<span class=\"property\">default</span>;</span><br><span class=\"line\">          result[key] = <span class=\"keyword\">typeof</span> provideDefault === <span class=\"string\">&#x27;function&#x27;</span></span><br><span class=\"line\">            ? provideDefault.<span class=\"title function_\">call</span>(vm)</span><br><span class=\"line\">            : provideDefault;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span>) &#123;</span><br><span class=\"line\">          <span class=\"title function_\">warn</span>((<span class=\"string\">&quot;Injection \\&quot;&quot;</span> + key + <span class=\"string\">&quot;\\&quot; not found&quot;</span>), vm);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> result</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>injectkeyprovide</li>\n</ul>\n</li>\n<li><p><strong>injectdefineReactive$$1</strong></p>\n</li>\n</ul>\n<h4 id=\"initState\"><a href=\"#initState\" class=\"headerlink\" title=\"initState\"></a>initState</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">initState</span> (vm) &#123;</span><br><span class=\"line\">  vm.<span class=\"property\">_watchers</span> = [];</span><br><span class=\"line\">  <span class=\"keyword\">var</span> opts = vm.<span class=\"property\">$options</span>;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (opts.<span class=\"property\">props</span>) &#123; <span class=\"title function_\">initProps</span>(vm, opts.<span class=\"property\">props</span>); &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (opts.<span class=\"property\">methods</span>) &#123; <span class=\"title function_\">initMethods</span>(vm, opts.<span class=\"property\">methods</span>); &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (opts.<span class=\"property\">data</span>) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">initData</span>(vm);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"title function_\">observe</span>(vm.<span class=\"property\">_data</span> = &#123;&#125;, <span class=\"literal\">true</span> <span class=\"comment\">/* asRootData */</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (opts.<span class=\"property\">computed</span>) &#123; <span class=\"title function_\">initComputed</span>(vm, opts.<span class=\"property\">computed</span>); &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (opts.<span class=\"property\">watch</span> &amp;&amp; opts.<span class=\"property\">watch</span> !== nativeWatch) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">initWatch</span>(vm, opts.<span class=\"property\">watch</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>initStateoption<ul>\n<li>props</li>\n<li>methods</li>\n<li>data</li>\n<li>computed</li>\n<li>watch</li>\n</ul>\n</li>\n</ul>\n<h5 id=\"initProps\"><a href=\"#initProps\" class=\"headerlink\" title=\"initProps\"></a>initProps</h5><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">initProps</span> (vm, propsOptions) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> propsData = vm.<span class=\"property\">$options</span>.<span class=\"property\">propsData</span> || &#123;&#125;;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> props = vm.<span class=\"property\">_props</span> = &#123;&#125;;</span><br><span class=\"line\">  <span class=\"comment\">// cache prop keys so that future props updates can iterate using Array</span></span><br><span class=\"line\">  <span class=\"comment\">// instead of dynamic object key enumeration.</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> keys = vm.<span class=\"property\">$options</span>.<span class=\"property\">_propKeys</span> = [];</span><br><span class=\"line\">  <span class=\"keyword\">var</span> isRoot = !vm.<span class=\"property\">$parent</span>;</span><br><span class=\"line\">  <span class=\"comment\">// root instance props should be converted</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!isRoot) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">toggleObserving</span>(<span class=\"literal\">false</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> loop = <span class=\"keyword\">function</span> (<span class=\"params\"> key </span>) &#123;</span><br><span class=\"line\">    keys.<span class=\"title function_\">push</span>(key);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> value = <span class=\"title function_\">validateProp</span>(key, propsOptions, propsData, vm);</span><br><span class=\"line\">    <span class=\"comment\">/* istanbul ignore else */</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> hyphenatedKey = <span class=\"title function_\">hyphenate</span>(key);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"title function_\">isReservedAttribute</span>(hyphenatedKey) ||</span><br><span class=\"line\">          config.<span class=\"title function_\">isReservedAttr</span>(hyphenatedKey)) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">          (<span class=\"string\">&quot;\\&quot;&quot;</span> + hyphenatedKey + <span class=\"string\">&quot;\\&quot; is a reserved attribute and cannot be used as component prop.&quot;</span>),</span><br><span class=\"line\">          vm</span><br><span class=\"line\">        );</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"title function_\">defineReactive$$1</span>(props, key, value, <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!isRoot &amp;&amp; !isUpdatingChildComponent) &#123;</span><br><span class=\"line\">          <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">            <span class=\"string\">&quot;Avoid mutating a prop directly since the value will be &quot;</span> +</span><br><span class=\"line\">            <span class=\"string\">&quot;overwritten whenever the parent component re-renders. &quot;</span> +</span><br><span class=\"line\">            <span class=\"string\">&quot;Instead, use a data or computed property based on the prop&#x27;s &quot;</span> +</span><br><span class=\"line\">            <span class=\"string\">&quot;value. Prop being mutated: \\&quot;&quot;</span> + key + <span class=\"string\">&quot;\\&quot;&quot;</span>,</span><br><span class=\"line\">            vm</span><br><span class=\"line\">          );</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"title function_\">defineReactive$$1</span>(props, key, value);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// static props are already proxied on the component&#x27;s prototype</span></span><br><span class=\"line\">    <span class=\"comment\">// during Vue.extend(). We only need to proxy props defined at</span></span><br><span class=\"line\">    <span class=\"comment\">// instantiation here.</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!(key <span class=\"keyword\">in</span> vm)) &#123;</span><br><span class=\"line\">      <span class=\"title function_\">proxy</span>(vm, <span class=\"string\">&quot;_props&quot;</span>, key);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> key <span class=\"keyword\">in</span> propsOptions) <span class=\"title function_\">loop</span>( key );</span><br><span class=\"line\">  <span class=\"title function_\">toggleObserving</span>(<span class=\"literal\">true</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>props</p>\n</li>\n<li><p>validatePropprops</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">validateProp</span> (</span><br><span class=\"line\">  key,</span><br><span class=\"line\">  propOptions,</span><br><span class=\"line\">  propsData,</span><br><span class=\"line\">  vm</span><br><span class=\"line\">) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> prop = propOptions[key];</span><br><span class=\"line\">  <span class=\"keyword\">var</span> absent = !<span class=\"title function_\">hasOwn</span>(propsData, key);</span><br><span class=\"line\">  <span class=\"keyword\">var</span> value = propsData[key];</span><br><span class=\"line\">  <span class=\"comment\">// boolean casting</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> booleanIndex = <span class=\"title function_\">getTypeIndex</span>(<span class=\"title class_\">Boolean</span>, prop.<span class=\"property\">type</span>);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (booleanIndex &gt; -<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (absent &amp;&amp; !<span class=\"title function_\">hasOwn</span>(prop, <span class=\"string\">&#x27;default&#x27;</span>)) &#123;</span><br><span class=\"line\">      value = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (value === <span class=\"string\">&#x27;&#x27;</span> || value === <span class=\"title function_\">hyphenate</span>(key)) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// only cast empty string / same name to boolean if</span></span><br><span class=\"line\">      <span class=\"comment\">// boolean has higher priority</span></span><br><span class=\"line\">      <span class=\"keyword\">var</span> stringIndex = <span class=\"title function_\">getTypeIndex</span>(<span class=\"title class_\">String</span>, prop.<span class=\"property\">type</span>);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (stringIndex &lt; <span class=\"number\">0</span> || booleanIndex &lt; stringIndex) &#123;</span><br><span class=\"line\">        value = <span class=\"literal\">true</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// check default value</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (value === <span class=\"literal\">undefined</span>) &#123;</span><br><span class=\"line\">    value = <span class=\"title function_\">getPropDefaultValue</span>(vm, prop, key);</span><br><span class=\"line\">    <span class=\"comment\">// since the default value is a fresh copy,</span></span><br><span class=\"line\">    <span class=\"comment\">// make sure to observe it.</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> prevShouldObserve = shouldObserve;</span><br><span class=\"line\">    <span class=\"title function_\">toggleObserving</span>(<span class=\"literal\">true</span>);</span><br><span class=\"line\">    <span class=\"title function_\">observe</span>(value);</span><br><span class=\"line\">    <span class=\"title function_\">toggleObserving</span>(prevShouldObserve);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (</span><br><span class=\"line\">    process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span> &amp;&amp;</span><br><span class=\"line\">    <span class=\"comment\">// skip validation for weex recycle-list child component props</span></span><br><span class=\"line\">    !(<span class=\"literal\">false</span>)</span><br><span class=\"line\">  ) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">assertProp</span>(prop, key, value, vm, absent);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>propstype</strong></li>\n<li><strong>props</strong></li>\n<li><strong>props</strong></li>\n</ul>\n</li>\n<li><p></p>\n</li>\n</ul>\n<h5 id=\"initMethods\"><a href=\"#initMethods\" class=\"headerlink\" title=\"initMethods\"></a>initMethods</h5><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">initMethods</span> (vm, methods) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> props = vm.<span class=\"property\">$options</span>.<span class=\"property\">props</span>;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> key <span class=\"keyword\">in</span> methods) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> methods[key] !== <span class=\"string\">&#x27;function&#x27;</span>) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">          <span class=\"string\">&quot;Method \\&quot;&quot;</span> + key + <span class=\"string\">&quot;\\&quot; has type \\&quot;&quot;</span> + (<span class=\"keyword\">typeof</span> methods[key]) + <span class=\"string\">&quot;\\&quot; in the component definition. &quot;</span> +</span><br><span class=\"line\">          <span class=\"string\">&quot;Did you reference the function correctly?&quot;</span>,</span><br><span class=\"line\">          vm</span><br><span class=\"line\">        );</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (props &amp;&amp; <span class=\"title function_\">hasOwn</span>(props, key)) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">          (<span class=\"string\">&quot;Method \\&quot;&quot;</span> + key + <span class=\"string\">&quot;\\&quot; has already been defined as a prop.&quot;</span>),</span><br><span class=\"line\">          vm</span><br><span class=\"line\">        );</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> ((key <span class=\"keyword\">in</span> vm) &amp;&amp; <span class=\"title function_\">isReserved</span>(key)) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">          <span class=\"string\">&quot;Method \\&quot;&quot;</span> + key + <span class=\"string\">&quot;\\&quot; conflicts with an existing Vue instance method. &quot;</span> +</span><br><span class=\"line\">          <span class=\"string\">&quot;Avoid defining component methods that start with _ or $.&quot;</span></span><br><span class=\"line\">        );</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    vm[key] = <span class=\"keyword\">typeof</span> methods[key] !== <span class=\"string\">&#x27;function&#x27;</span> ? noop : <span class=\"title function_\">bind</span>(methods[key], vm);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>bindthisvmVue</li>\n</ul>\n<h5 id=\"initData\"><a href=\"#initData\" class=\"headerlink\" title=\"initData\"></a>initData</h5><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">initData</span> (vm) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> data = vm.<span class=\"property\">$options</span>.<span class=\"property\">data</span>;</span><br><span class=\"line\">  data = vm.<span class=\"property\">_data</span> = <span class=\"keyword\">typeof</span> data === <span class=\"string\">&#x27;function&#x27;</span></span><br><span class=\"line\">    ? <span class=\"title function_\">getData</span>(data, vm)</span><br><span class=\"line\">    : data || &#123;&#125;;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!<span class=\"title function_\">isPlainObject</span>(data)) &#123;</span><br><span class=\"line\">    data = &#123;&#125;;</span><br><span class=\"line\">    process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span> &amp;&amp; <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">      <span class=\"string\">&#x27;data functions should return an object:\\n&#x27;</span> +</span><br><span class=\"line\">      <span class=\"string\">&#x27;https://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function&#x27;</span>,</span><br><span class=\"line\">      vm</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// proxy data on instance</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> keys = <span class=\"title class_\">Object</span>.<span class=\"title function_\">keys</span>(data);</span><br><span class=\"line\">  <span class=\"keyword\">var</span> props = vm.<span class=\"property\">$options</span>.<span class=\"property\">props</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> methods = vm.<span class=\"property\">$options</span>.<span class=\"property\">methods</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> i = keys.<span class=\"property\">length</span>;</span><br><span class=\"line\">  <span class=\"keyword\">while</span> (i--) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> key = keys[i];</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (methods &amp;&amp; <span class=\"title function_\">hasOwn</span>(methods, key)) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">          (<span class=\"string\">&quot;Method \\&quot;&quot;</span> + key + <span class=\"string\">&quot;\\&quot; has already been defined as a data property.&quot;</span>),</span><br><span class=\"line\">          vm</span><br><span class=\"line\">        );</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (props &amp;&amp; <span class=\"title function_\">hasOwn</span>(props, key)) &#123;</span><br><span class=\"line\">      process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span> &amp;&amp; <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">        <span class=\"string\">&quot;The data property \\&quot;&quot;</span> + key + <span class=\"string\">&quot;\\&quot; is already declared as a prop. &quot;</span> +</span><br><span class=\"line\">        <span class=\"string\">&quot;Use prop default value instead.&quot;</span>,</span><br><span class=\"line\">        vm</span><br><span class=\"line\">      );</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!<span class=\"title function_\">isReserved</span>(key)) &#123;</span><br><span class=\"line\">      <span class=\"title function_\">proxy</span>(vm, <span class=\"string\">&quot;_data&quot;</span>, key);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// observe data</span></span><br><span class=\"line\">  <span class=\"title function_\">observe</span>(data, <span class=\"literal\">true</span> <span class=\"comment\">/* asRootData */</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>datagetData</li>\n<li><ul>\n<li>propsdataplainObje</li>\n</ul>\n</li>\n<li>proxy<code>_data</code></li>\n<li><strong>data</strong></li>\n</ul>\n<h5 id=\"initComputed\"><a href=\"#initComputed\" class=\"headerlink\" title=\"initComputed\"></a>initComputed</h5><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">initComputed</span> (vm, computed) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// $flow-disable-line</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> watchers = vm.<span class=\"property\">_computedWatchers</span> = <span class=\"title class_\">Object</span>.<span class=\"title function_\">create</span>(<span class=\"literal\">null</span>);</span><br><span class=\"line\">  <span class=\"comment\">// computed properties are just getters during SSR</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> isSSR = <span class=\"title function_\">isServerRendering</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> key <span class=\"keyword\">in</span> computed) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> userDef = computed[key];</span><br><span class=\"line\">    <span class=\"keyword\">var</span> getter = <span class=\"keyword\">typeof</span> userDef === <span class=\"string\">&#x27;function&#x27;</span> ? userDef : userDef.<span class=\"property\">get</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span> &amp;&amp; getter == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">        (<span class=\"string\">&quot;Getter is missing for computed property \\&quot;&quot;</span> + key + <span class=\"string\">&quot;\\&quot;.&quot;</span>),</span><br><span class=\"line\">        vm</span><br><span class=\"line\">      );</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!isSSR) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// create internal watcher for the computed property.</span></span><br><span class=\"line\">      watchers[key] = <span class=\"keyword\">new</span> <span class=\"title class_\">Watcher</span>(</span><br><span class=\"line\">        vm,</span><br><span class=\"line\">        getter || noop,</span><br><span class=\"line\">        noop,</span><br><span class=\"line\">        computedWatcherOptions</span><br><span class=\"line\">      );</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// component-defined computed properties are already defined on the</span></span><br><span class=\"line\">    <span class=\"comment\">// component prototype. We only need to define computed properties defined</span></span><br><span class=\"line\">    <span class=\"comment\">// at instantiation here.</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!(key <span class=\"keyword\">in</span> vm)) &#123;</span><br><span class=\"line\">      <span class=\"title function_\">defineComputed</span>(vm, key, userDef);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (key <span class=\"keyword\">in</span> vm.<span class=\"property\">$data</span>) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">warn</span>((<span class=\"string\">&quot;The computed property \\&quot;&quot;</span> + key + <span class=\"string\">&quot;\\&quot; is already defined in data.&quot;</span>), vm);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (vm.<span class=\"property\">$options</span>.<span class=\"property\">props</span> &amp;&amp; key <span class=\"keyword\">in</span> vm.<span class=\"property\">$options</span>.<span class=\"property\">props</span>) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">warn</span>((<span class=\"string\">&quot;The computed property \\&quot;&quot;</span> + key + <span class=\"string\">&quot;\\&quot; is already defined as a prop.&quot;</span>), vm);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (vm.<span class=\"property\">$options</span>.<span class=\"property\">methods</span> &amp;&amp; key <span class=\"keyword\">in</span> vm.<span class=\"property\">$options</span>.<span class=\"property\">methods</span>) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">warn</span>((<span class=\"string\">&quot;The computed property \\&quot;&quot;</span> + key + <span class=\"string\">&quot;\\&quot; is already defined as a method.&quot;</span>), vm);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>computedwatcher</li>\n<li>computedwatcher</li>\n<li>defineComputedcomputedvmwatcher</li>\n</ul>\n<h5 id=\"initWatch\"><a href=\"#initWatch\" class=\"headerlink\" title=\"initWatch\"></a>initWatch</h5><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">initWatch</span> (vm, watch) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> key <span class=\"keyword\">in</span> watch) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> handler = watch[key];</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"title class_\">Array</span>.<span class=\"title function_\">isArray</span>(handler)) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; handler.<span class=\"property\">length</span>; i++) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">createWatcher</span>(vm, key, handler[i]);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"title function_\">createWatcher</span>(vm, key, handler);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>watcher<code>Vue.$watch</code></li>\n<li><code>Vue.$watch</code>watcher</li>\n</ul>\n<h4 id=\"initProvide\"><a href=\"#initProvide\" class=\"headerlink\" title=\"initProvide\"></a>initProvide</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">initProvide</span> (vm) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> provide = vm.<span class=\"property\">$options</span>.<span class=\"property\">provide</span>;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (provide) &#123;</span><br><span class=\"line\">    vm.<span class=\"property\">_provided</span> = <span class=\"keyword\">typeof</span> provide === <span class=\"string\">&#x27;function&#x27;</span></span><br><span class=\"line\">      ? provide.<span class=\"title function_\">call</span>(vm)</span><br><span class=\"line\">      : provide;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>providevm</li>\n</ul>\n<h4 id=\"callHook-created\"><a href=\"#callHook-created\" class=\"headerlink\" title=\"callHook(created)\"></a>callHook(created)</h4><ul>\n<li><code>created</code></li>\n</ul>\n<h3 id=\"mount\"><a href=\"#mount\" class=\"headerlink\" title=\"$mount\"></a>$mount</h3><ul>\n<li><code>_init</code>el</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title class_\">Vue</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">$mount</span> = <span class=\"keyword\">function</span> (<span class=\"params\"></span></span><br><span class=\"line\"><span class=\"params\">  el,</span></span><br><span class=\"line\"><span class=\"params\">  hydrating</span></span><br><span class=\"line\"><span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  el = el &amp;&amp; <span class=\"title function_\">query</span>(el);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/* istanbul ignore if */</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (el === <span class=\"variable language_\">document</span>.<span class=\"property\">body</span> || el === <span class=\"variable language_\">document</span>.<span class=\"property\">documentElement</span>) &#123;</span><br><span class=\"line\">    process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span> &amp;&amp; <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">      <span class=\"string\">&quot;Do not mount Vue to &lt;html&gt; or &lt;body&gt; - mount to normal elements instead.&quot;</span></span><br><span class=\"line\">    );</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable language_\">this</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">var</span> options = <span class=\"variable language_\">this</span>.<span class=\"property\">$options</span>;</span><br><span class=\"line\">  <span class=\"comment\">// resolve template/el and convert to render function</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!options.<span class=\"property\">render</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> template = options.<span class=\"property\">template</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (template) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> template === <span class=\"string\">&#x27;string&#x27;</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (template.<span class=\"title function_\">charAt</span>(<span class=\"number\">0</span>) === <span class=\"string\">&#x27;#&#x27;</span>) &#123;</span><br><span class=\"line\">          template = <span class=\"title function_\">idToTemplate</span>(template);</span><br><span class=\"line\">          <span class=\"comment\">/* istanbul ignore if */</span></span><br><span class=\"line\">          <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span> &amp;&amp; !template) &#123;</span><br><span class=\"line\">            <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">              (<span class=\"string\">&quot;Template element not found or is empty: &quot;</span> + (options.<span class=\"property\">template</span>)),</span><br><span class=\"line\">              <span class=\"variable language_\">this</span></span><br><span class=\"line\">            );</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (template.<span class=\"property\">nodeType</span>) &#123;</span><br><span class=\"line\">        template = template.<span class=\"property\">innerHTML</span>;</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span>) &#123;</span><br><span class=\"line\">          <span class=\"title function_\">warn</span>(<span class=\"string\">&#x27;invalid template option:&#x27;</span> + template, <span class=\"variable language_\">this</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">this</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (el) &#123;</span><br><span class=\"line\">      template = <span class=\"title function_\">getOuterHTML</span>(el);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (template) &#123;</span><br><span class=\"line\">      <span class=\"comment\">/* istanbul ignore if */</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span> &amp;&amp; config.<span class=\"property\">performance</span> &amp;&amp; mark) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">mark</span>(<span class=\"string\">&#x27;compile&#x27;</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">var</span> ref = <span class=\"title function_\">compileToFunctions</span>(template, &#123;</span><br><span class=\"line\">        <span class=\"attr\">outputSourceRange</span>: process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">shouldDecodeNewlines</span>: shouldDecodeNewlines,</span><br><span class=\"line\">        <span class=\"attr\">shouldDecodeNewlinesForHref</span>: shouldDecodeNewlinesForHref,</span><br><span class=\"line\">        <span class=\"attr\">delimiters</span>: options.<span class=\"property\">delimiters</span>,</span><br><span class=\"line\">        <span class=\"attr\">comments</span>: options.<span class=\"property\">comments</span></span><br><span class=\"line\">      &#125;, <span class=\"variable language_\">this</span>);</span><br><span class=\"line\">      <span class=\"keyword\">var</span> render = ref.<span class=\"property\">render</span>;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> staticRenderFns = ref.<span class=\"property\">staticRenderFns</span>;</span><br><span class=\"line\">      options.<span class=\"property\">render</span> = render;</span><br><span class=\"line\">      options.<span class=\"property\">staticRenderFns</span> = staticRenderFns;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">/* istanbul ignore if */</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span> &amp;&amp; config.<span class=\"property\">performance</span> &amp;&amp; mark) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">mark</span>(<span class=\"string\">&#x27;compile end&#x27;</span>);</span><br><span class=\"line\">        <span class=\"title function_\">measure</span>((<span class=\"string\">&quot;vue &quot;</span> + (<span class=\"variable language_\">this</span>.<span class=\"property\">_name</span>) + <span class=\"string\">&quot; compile&quot;</span>), <span class=\"string\">&#x27;compile&#x27;</span>, <span class=\"string\">&#x27;compile end&#x27;</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> mount.<span class=\"title function_\">call</span>(<span class=\"variable language_\">this</span>, el, hydrating)</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p><code>query</code><code>el</code>DOM</p>\n</li>\n<li><p><strong><code>template</code>render</strong></p>\n<ul>\n<li><strong>compileToFunctions</strong><ul>\n<li><strong>templateast<code>$createElement</code>VDOM<code>$createElement</code>VNode</strong></li>\n</ul>\n</li>\n<li><strong>VueJSX</strong></li>\n</ul>\n</li>\n<li><p>mount</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// public mount method</span></span><br><span class=\"line\"><span class=\"title class_\">Vue</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">$mount</span> = <span class=\"keyword\">function</span> (<span class=\"params\"></span></span><br><span class=\"line\"><span class=\"params\">  el,</span></span><br><span class=\"line\"><span class=\"params\">  hydrating</span></span><br><span class=\"line\"><span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  el = el &amp;&amp; inBrowser ? <span class=\"title function_\">query</span>(el) : <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"title function_\">mountComponent</span>(<span class=\"variable language_\">this</span>, el, hydrating)</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>mount$mount</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"mountComponent\"><a href=\"#mountComponent\" class=\"headerlink\" title=\"mountComponent\"></a>mountComponent</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">mountComponent</span> (</span><br><span class=\"line\">  vm,</span><br><span class=\"line\">  el,</span><br><span class=\"line\">  hydrating</span><br><span class=\"line\">) &#123;</span><br><span class=\"line\">  vm.<span class=\"property\">$el</span> = el;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!vm.<span class=\"property\">$options</span>.<span class=\"property\">render</span>) &#123;</span><br><span class=\"line\">    vm.<span class=\"property\">$options</span>.<span class=\"property\">render</span> = createEmptyVNode;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span>) &#123;</span><br><span class=\"line\">      <span class=\"comment\">/* istanbul ignore if */</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> ((vm.<span class=\"property\">$options</span>.<span class=\"property\">template</span> &amp;&amp; vm.<span class=\"property\">$options</span>.<span class=\"property\">template</span>.<span class=\"title function_\">charAt</span>(<span class=\"number\">0</span>) !== <span class=\"string\">&#x27;#&#x27;</span>) ||</span><br><span class=\"line\">        vm.<span class=\"property\">$options</span>.<span class=\"property\">el</span> || el) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">          <span class=\"string\">&#x27;You are using the runtime-only build of Vue where the template &#x27;</span> +</span><br><span class=\"line\">          <span class=\"string\">&#x27;compiler is not available. Either pre-compile the templates into &#x27;</span> +</span><br><span class=\"line\">          <span class=\"string\">&#x27;render functions, or use the compiler-included build.&#x27;</span>,</span><br><span class=\"line\">          vm</span><br><span class=\"line\">        );</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">          <span class=\"string\">&#x27;Failed to mount component: template or render function not defined.&#x27;</span>,</span><br><span class=\"line\">          vm</span><br><span class=\"line\">        );</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"title function_\">callHook</span>(vm, <span class=\"string\">&#x27;beforeMount&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">var</span> updateComponent;</span><br><span class=\"line\">  <span class=\"comment\">/* istanbul ignore if */</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span> &amp;&amp; config.<span class=\"property\">performance</span> &amp;&amp; mark) &#123;</span><br><span class=\"line\">    updateComponent = <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> name = vm.<span class=\"property\">_name</span>;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> id = vm.<span class=\"property\">_uid</span>;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> startTag = <span class=\"string\">&quot;vue-perf-start:&quot;</span> + id;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> endTag = <span class=\"string\">&quot;vue-perf-end:&quot;</span> + id;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"title function_\">mark</span>(startTag);</span><br><span class=\"line\">      <span class=\"keyword\">var</span> vnode = vm.<span class=\"title function_\">_render</span>();</span><br><span class=\"line\">      <span class=\"title function_\">mark</span>(endTag);</span><br><span class=\"line\">      <span class=\"title function_\">measure</span>((<span class=\"string\">&quot;vue &quot;</span> + name + <span class=\"string\">&quot; render&quot;</span>), startTag, endTag);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"title function_\">mark</span>(startTag);</span><br><span class=\"line\">      vm.<span class=\"title function_\">_update</span>(vnode, hydrating);</span><br><span class=\"line\">      <span class=\"title function_\">mark</span>(endTag);</span><br><span class=\"line\">      <span class=\"title function_\">measure</span>((<span class=\"string\">&quot;vue &quot;</span> + name + <span class=\"string\">&quot; patch&quot;</span>), startTag, endTag);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    updateComponent = <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">      vm.<span class=\"title function_\">_update</span>(vm.<span class=\"title function_\">_render</span>(), hydrating);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// we set this to vm._watcher inside the watcher&#x27;s constructor</span></span><br><span class=\"line\">  <span class=\"comment\">// since the watcher&#x27;s initial patch may call $forceUpdate (e.g. inside child</span></span><br><span class=\"line\">  <span class=\"comment\">// component&#x27;s mounted hook), which relies on vm._watcher being already defined</span></span><br><span class=\"line\">  <span class=\"keyword\">new</span> <span class=\"title class_\">Watcher</span>(vm, updateComponent, noop, &#123;</span><br><span class=\"line\">    <span class=\"attr\">before</span>: <span class=\"keyword\">function</span> <span class=\"title function_\">before</span> () &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (vm.<span class=\"property\">_isMounted</span> &amp;&amp; !vm.<span class=\"property\">_isDestroyed</span>) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">callHook</span>(vm, <span class=\"string\">&#x27;beforeUpdate&#x27;</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;, <span class=\"literal\">true</span> <span class=\"comment\">/* isRenderWatcher */</span>);</span><br><span class=\"line\">  hydrating = <span class=\"literal\">false</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// manually mounted instance, call mounted on self</span></span><br><span class=\"line\">  <span class=\"comment\">// mounted is called for render-created child components in its inserted hook</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (vm.<span class=\"property\">$vnode</span> == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    vm.<span class=\"property\">_isMounted</span> = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    <span class=\"title function_\">callHook</span>(vm, <span class=\"string\">&#x27;mounted&#x27;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> vm</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>optionrendertemplateJSX</li>\n<li><strong><code>beforeMounted</code></strong></li>\n<li><strong><code>updateComponent</code><code>vm._udpate(vm._render)</code></strong></li>\n<li><code>updateComponent</code><code>exprOrFn</code>watcher</li>\n<li><code>mounted</code></li>\n</ul>\n<h4 id=\"Watcher\"><a href=\"#Watcher\" class=\"headerlink\" title=\"Watcher\"></a>Watcher</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> <span class=\"title class_\">Watcher</span> = <span class=\"keyword\">function</span> <span class=\"title function_\">Watcher</span> (</span><br><span class=\"line\">  vm,</span><br><span class=\"line\">  expOrFn,</span><br><span class=\"line\">  cb,</span><br><span class=\"line\">  options,</span><br><span class=\"line\">  isRenderWatcher</span><br><span class=\"line\">) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">vm</span> = vm;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (isRenderWatcher) &#123;</span><br><span class=\"line\">    vm.<span class=\"property\">_watcher</span> = <span class=\"variable language_\">this</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  vm.<span class=\"property\">_watchers</span>.<span class=\"title function_\">push</span>(<span class=\"variable language_\">this</span>);</span><br><span class=\"line\">  <span class=\"comment\">// options</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (options) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">deep</span> = !!options.<span class=\"property\">deep</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">user</span> = !!options.<span class=\"property\">user</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">lazy</span> = !!options.<span class=\"property\">lazy</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">sync</span> = !!options.<span class=\"property\">sync</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">before</span> = options.<span class=\"property\">before</span>;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">deep</span> = <span class=\"variable language_\">this</span>.<span class=\"property\">user</span> = <span class=\"variable language_\">this</span>.<span class=\"property\">lazy</span> = <span class=\"variable language_\">this</span>.<span class=\"property\">sync</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">cb</span> = cb;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">id</span> = ++uid$<span class=\"number\">2</span>; <span class=\"comment\">// uid for batching</span></span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">active</span> = <span class=\"literal\">true</span>;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">dirty</span> = <span class=\"variable language_\">this</span>.<span class=\"property\">lazy</span>; <span class=\"comment\">// for lazy watchers</span></span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">deps</span> = [];</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">newDeps</span> = [];</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">depIds</span> = <span class=\"keyword\">new</span> <span class=\"title function_\">_Set</span>();</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">newDepIds</span> = <span class=\"keyword\">new</span> <span class=\"title function_\">_Set</span>();</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">expression</span> = process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span></span><br><span class=\"line\">    ? expOrFn.<span class=\"title function_\">toString</span>()</span><br><span class=\"line\">    : <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">  <span class=\"comment\">// parse expression for getter</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> expOrFn === <span class=\"string\">&#x27;function&#x27;</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">getter</span> = expOrFn;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">getter</span> = <span class=\"title function_\">parsePath</span>(expOrFn);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"variable language_\">this</span>.<span class=\"property\">getter</span>) &#123;</span><br><span class=\"line\">      <span class=\"variable language_\">this</span>.<span class=\"property\">getter</span> = noop;</span><br><span class=\"line\">      process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span> &amp;&amp; <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">        <span class=\"string\">&quot;Failed watching path: \\&quot;&quot;</span> + expOrFn + <span class=\"string\">&quot;\\&quot; &quot;</span> +</span><br><span class=\"line\">        <span class=\"string\">&#x27;Watcher only accepts simple dot-delimited paths. &#x27;</span> +</span><br><span class=\"line\">        <span class=\"string\">&#x27;For full control, use a function instead.&#x27;</span>,</span><br><span class=\"line\">        vm</span><br><span class=\"line\">      );</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">value</span> = <span class=\"variable language_\">this</span>.<span class=\"property\">lazy</span></span><br><span class=\"line\">    ? <span class=\"literal\">undefined</span></span><br><span class=\"line\">    : <span class=\"variable language_\">this</span>.<span class=\"title function_\">get</span>();</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>Watcher<code>get</code></p>\n</li>\n<li><p><strong><code>get</code>Watchergetter</strong></p>\n<ul>\n<li><p><code>mountComponent</code><code>updateComponent</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">updateComponent = <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    vm.<span class=\"title function_\">_update</span>(vm.<span class=\"title function_\">_render</span>(), hydrating);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n<h4 id=\"render\"><a href=\"#render\" class=\"headerlink\" title=\"_render\"></a>_render</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title class_\">Vue</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">_render</span> = <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> vm = <span class=\"variable language_\">this</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> ref = vm.<span class=\"property\">$options</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> render = ref.<span class=\"property\">render</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> _parentVnode = ref.<span class=\"property\">_parentVnode</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (_parentVnode) &#123;</span><br><span class=\"line\">        vm.<span class=\"property\">$scopedSlots</span> = <span class=\"title function_\">normalizeScopedSlots</span>(</span><br><span class=\"line\">            _parentVnode.<span class=\"property\">data</span>.<span class=\"property\">scopedSlots</span>,</span><br><span class=\"line\">            vm.<span class=\"property\">$slots</span>,</span><br><span class=\"line\">            vm.<span class=\"property\">$scopedSlots</span></span><br><span class=\"line\">        );</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// set parent vnode. this allows render functions to have access</span></span><br><span class=\"line\">    <span class=\"comment\">// to the data on the placeholder node.</span></span><br><span class=\"line\">    vm.<span class=\"property\">$vnode</span> = _parentVnode;</span><br><span class=\"line\">    <span class=\"comment\">// render self</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> vnode;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// There&#x27;s no need to maintain a stack because all render fns are called</span></span><br><span class=\"line\">        <span class=\"comment\">// separately from one another. Nested component&#x27;s render fns are called</span></span><br><span class=\"line\">        <span class=\"comment\">// when parent component is patched.</span></span><br><span class=\"line\">        currentRenderingInstance = vm;</span><br><span class=\"line\">        vnode = render.<span class=\"title function_\">call</span>(vm.<span class=\"property\">_renderProxy</span>, vm.<span class=\"property\">$createElement</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">handleError</span>(e, vm, <span class=\"string\">&quot;render&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">// return error render result,</span></span><br><span class=\"line\">        <span class=\"comment\">// or previous vnode to prevent render error causing blank component</span></span><br><span class=\"line\">        <span class=\"comment\">/* istanbul ignore else */</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span> &amp;&amp; vm.<span class=\"property\">$options</span>.<span class=\"property\">renderError</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                vnode = vm.<span class=\"property\">$options</span>.<span class=\"property\">renderError</span>.<span class=\"title function_\">call</span>(vm.<span class=\"property\">_renderProxy</span>, vm.<span class=\"property\">$createElement</span>, e);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">                <span class=\"title function_\">handleError</span>(e, vm, <span class=\"string\">&quot;renderError&quot;</span>);</span><br><span class=\"line\">                vnode = vm.<span class=\"property\">_vnode</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            vnode = vm.<span class=\"property\">_vnode</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">        currentRenderingInstance = <span class=\"literal\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// if the returned array contains only a single node, allow it</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"title class_\">Array</span>.<span class=\"title function_\">isArray</span>(vnode) &amp;&amp; vnode.<span class=\"property\">length</span> === <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        vnode = vnode[<span class=\"number\">0</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// return empty vnode in case the render function errored out</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!(vnode <span class=\"keyword\">instanceof</span> <span class=\"title class_\">VNode</span>)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span> &amp;&amp; <span class=\"title class_\">Array</span>.<span class=\"title function_\">isArray</span>(vnode)) &#123;</span><br><span class=\"line\">            <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">                <span class=\"string\">&#x27;Multiple root nodes returned from render function. Render function &#x27;</span> +</span><br><span class=\"line\">                <span class=\"string\">&#x27;should return a single root node.&#x27;</span>,</span><br><span class=\"line\">                vm</span><br><span class=\"line\">            );</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        vnode = <span class=\"title function_\">createEmptyVNode</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// set parent</span></span><br><span class=\"line\">    vnode.<span class=\"property\">parent</span> = _parentVnode;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> vnode</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong><code>_render</code><code>$createElement</code>VNode</strong></li>\n</ul>\n<h4 id=\"update\"><a href=\"#update\" class=\"headerlink\" title=\"_update\"></a>_update</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title class_\">Vue</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">_update</span> = <span class=\"keyword\">function</span> (<span class=\"params\">vnode, hydrating</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> vm = <span class=\"variable language_\">this</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> prevEl = vm.<span class=\"property\">$el</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> prevVnode = vm.<span class=\"property\">_vnode</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> restoreActiveInstance = <span class=\"title function_\">setActiveInstance</span>(vm);</span><br><span class=\"line\">  vm.<span class=\"property\">_vnode</span> = vnode;</span><br><span class=\"line\">  <span class=\"comment\">// Vue.prototype.__patch__ is injected in entry points</span></span><br><span class=\"line\">  <span class=\"comment\">// based on the rendering backend used.</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!prevVnode) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// initial render</span></span><br><span class=\"line\">    vm.<span class=\"property\">$el</span> = vm.<span class=\"title function_\">__patch__</span>(vm.<span class=\"property\">$el</span>, vnode, hydrating, <span class=\"literal\">false</span> <span class=\"comment\">/* removeOnly */</span>);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// updates</span></span><br><span class=\"line\">    vm.<span class=\"property\">$el</span> = vm.<span class=\"title function_\">__patch__</span>(prevVnode, vnode);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"title function_\">restoreActiveInstance</span>();</span><br><span class=\"line\">  <span class=\"comment\">// update __vue__ reference</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (prevEl) &#123;</span><br><span class=\"line\">    prevEl.<span class=\"property\">__vue__</span> = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (vm.<span class=\"property\">$el</span>) &#123;</span><br><span class=\"line\">    vm.<span class=\"property\">$el</span>.<span class=\"property\">__vue__</span> = vm;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// if parent is an HOC, update its $el as well</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (vm.<span class=\"property\">$vnode</span> &amp;&amp; vm.<span class=\"property\">$parent</span> &amp;&amp; vm.<span class=\"property\">$vnode</span> === vm.<span class=\"property\">$parent</span>.<span class=\"property\">_vnode</span>) &#123;</span><br><span class=\"line\">    vm.<span class=\"property\">$parent</span>.<span class=\"property\">$el</span> = vm.<span class=\"property\">$el</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// updated hook is called by the scheduler to ensure that children are</span></span><br><span class=\"line\">  <span class=\"comment\">// updated in a parent&#x27;s updated hook.</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong><code>_update</code>patchVNodeDOM</strong></li>\n</ul>\n<h4 id=\"patch\"><a href=\"#patch\" class=\"headerlink\" title=\"patch\"></a>patch</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">patch</span> (oldVnode, vnode, hydrating, removeOnly) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"title function_\">isUndef</span>(vnode)) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// VNodeVNodeVNode</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"title function_\">isDef</span>(oldVnode)) &#123; <span class=\"title function_\">invokeDestroyHook</span>(oldVnode); &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> isInitialPatch = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> insertedVnodeQueue = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"title function_\">isUndef</span>(oldVnode)) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// VNode</span></span><br><span class=\"line\">        <span class=\"comment\">// empty mount (likely as component), create new root element</span></span><br><span class=\"line\">        isInitialPatch = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"title function_\">createElm</span>(vnode, insertedVnodeQueue);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> isRealElement = <span class=\"title function_\">isDef</span>(oldVnode.<span class=\"property\">nodeType</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!isRealElement &amp;&amp; <span class=\"title function_\">sameVnode</span>(oldVnode, vnode)) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// patch existing root node</span></span><br><span class=\"line\">            <span class=\"title function_\">patchVnode</span>(oldVnode, vnode, insertedVnodeQueue, <span class=\"literal\">null</span>, <span class=\"literal\">null</span>, removeOnly);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (isRealElement) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// mounting to a real element</span></span><br><span class=\"line\">                <span class=\"comment\">// check if this is server-rendered content and if we can perform</span></span><br><span class=\"line\">                <span class=\"comment\">// a successful hydration.</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (oldVnode.<span class=\"property\">nodeType</span> === <span class=\"number\">1</span> &amp;&amp; oldVnode.<span class=\"title function_\">hasAttribute</span>(<span class=\"variable constant_\">SSR_ATTR</span>)) &#123;</span><br><span class=\"line\">                    oldVnode.<span class=\"title function_\">removeAttribute</span>(<span class=\"variable constant_\">SSR_ATTR</span>);</span><br><span class=\"line\">                    hydrating = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (<span class=\"title function_\">isTrue</span>(hydrating)) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (<span class=\"title function_\">hydrate</span>(oldVnode, vnode, insertedVnodeQueue)) &#123;</span><br><span class=\"line\">                        <span class=\"title function_\">invokeInsertHook</span>(vnode, insertedVnodeQueue, <span class=\"literal\">true</span>);</span><br><span class=\"line\">                        <span class=\"keyword\">return</span> oldVnode</span><br><span class=\"line\">                    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span>) &#123;</span><br><span class=\"line\">                        <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">                            <span class=\"string\">&#x27;The client-side rendered virtual DOM tree is not matching &#x27;</span> +</span><br><span class=\"line\">                            <span class=\"string\">&#x27;server-rendered content. This is likely caused by incorrect &#x27;</span> +</span><br><span class=\"line\">                            <span class=\"string\">&#x27;HTML markup, for example nesting block-level elements inside &#x27;</span> +</span><br><span class=\"line\">                            <span class=\"string\">&#x27;&lt;p&gt;, or missing &lt;tbody&gt;. Bailing hydration and performing &#x27;</span> +</span><br><span class=\"line\">                            <span class=\"string\">&#x27;full client-side render.&#x27;</span></span><br><span class=\"line\">                        );</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"comment\">// either not server-rendered, or hydration failed.</span></span><br><span class=\"line\">                <span class=\"comment\">// create an empty node and replace it</span></span><br><span class=\"line\">                oldVnode = <span class=\"title function_\">emptyNodeAt</span>(oldVnode);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// replacing existing element</span></span><br><span class=\"line\">            <span class=\"keyword\">var</span> oldElm = oldVnode.<span class=\"property\">elm</span>;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> parentElm = nodeOps.<span class=\"title function_\">parentNode</span>(oldElm);</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// create new node</span></span><br><span class=\"line\">            <span class=\"title function_\">createElm</span>(</span><br><span class=\"line\">                vnode,</span><br><span class=\"line\">                insertedVnodeQueue,</span><br><span class=\"line\">                <span class=\"comment\">// extremely rare edge case: do not insert if old element is in a</span></span><br><span class=\"line\">                <span class=\"comment\">// leaving transition. Only happens when combining transition +</span></span><br><span class=\"line\">                <span class=\"comment\">// keep-alive + HOCs. (#4590)</span></span><br><span class=\"line\">                oldElm.<span class=\"property\">_leaveCb</span> ? <span class=\"literal\">null</span> : parentElm,</span><br><span class=\"line\">                nodeOps.<span class=\"title function_\">nextSibling</span>(oldElm)</span><br><span class=\"line\">            );</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// update parent placeholder node element, recursively</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"title function_\">isDef</span>(vnode.<span class=\"property\">parent</span>)) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">var</span> ancestor = vnode.<span class=\"property\">parent</span>;</span><br><span class=\"line\">                <span class=\"keyword\">var</span> patchable = <span class=\"title function_\">isPatchable</span>(vnode);</span><br><span class=\"line\">                <span class=\"keyword\">while</span> (ancestor) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; cbs.<span class=\"property\">destroy</span>.<span class=\"property\">length</span>; ++i) &#123;</span><br><span class=\"line\">                        cbs.<span class=\"property\">destroy</span>[i](ancestor);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    ancestor.<span class=\"property\">elm</span> = vnode.<span class=\"property\">elm</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (patchable) &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i$<span class=\"number\">1</span> = <span class=\"number\">0</span>; i$<span class=\"number\">1</span> &lt; cbs.<span class=\"property\">create</span>.<span class=\"property\">length</span>; ++i$<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">                            cbs.<span class=\"property\">create</span>[i$<span class=\"number\">1</span>](emptyNode, ancestor);</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                        <span class=\"comment\">// #6513</span></span><br><span class=\"line\">                        <span class=\"comment\">// invoke insert hooks that may have been merged by create hooks.</span></span><br><span class=\"line\">                        <span class=\"comment\">// e.g. for directives that uses the &quot;inserted&quot; hook.</span></span><br><span class=\"line\">                        <span class=\"keyword\">var</span> insert = ancestor.<span class=\"property\">data</span>.<span class=\"property\">hook</span>.<span class=\"property\">insert</span>;</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (insert.<span class=\"property\">merged</span>) &#123;</span><br><span class=\"line\">                            <span class=\"comment\">// start at index 1 to avoid re-invoking component mounted hook</span></span><br><span class=\"line\">                            <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i$<span class=\"number\">2</span> = <span class=\"number\">1</span>; i$<span class=\"number\">2</span> &lt; insert.<span class=\"property\">fns</span>.<span class=\"property\">length</span>; i$<span class=\"number\">2</span>++) &#123;</span><br><span class=\"line\">                                insert.<span class=\"property\">fns</span>[i$<span class=\"number\">2</span>]();</span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                        <span class=\"title function_\">registerRef</span>(ancestor);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    ancestor = ancestor.<span class=\"property\">parent</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// destroy old node</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"title function_\">isDef</span>(parentElm)) &#123;</span><br><span class=\"line\">                <span class=\"title function_\">removeVnodes</span>([oldVnode], <span class=\"number\">0</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"title function_\">isDef</span>(oldVnode.<span class=\"property\">tag</span>)) &#123;</span><br><span class=\"line\">                <span class=\"title function_\">invokeDestroyHook</span>(oldVnode);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title function_\">invokeInsertHook</span>(vnode, insertedVnodeQueue, isInitialPatch);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> vnode.<span class=\"property\">elm</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p><strong><code>patch</code>DOM</strong></p>\n<ul>\n<li><strong><code>patchVnode</code>DOMDIFF</strong></li>\n</ul>\n</li>\n<li><p><strong><code>createElm</code>VNodeDOMDOM</strong></p>\n<ul>\n<li><strong>oldDOM</strong></li>\n</ul>\n</li>\n</ul>\n<h4 id=\"createElm\"><a href=\"#createElm\" class=\"headerlink\" title=\"createElm\"></a>createElm</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">createElm</span> (</span><br><span class=\"line\">vnode,</span><br><span class=\"line\"> insertedVnodeQueue,</span><br><span class=\"line\"> parentElm,</span><br><span class=\"line\"> refElm,</span><br><span class=\"line\"> nested,</span><br><span class=\"line\"> ownerArray,</span><br><span class=\"line\"> index</span><br><span class=\"line\">) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"title function_\">isDef</span>(vnode.<span class=\"property\">elm</span>) &amp;&amp; <span class=\"title function_\">isDef</span>(ownerArray)) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// This vnode was used in a previous render!</span></span><br><span class=\"line\">        <span class=\"comment\">// now it&#x27;s used as a new node, overwriting its elm would cause</span></span><br><span class=\"line\">        <span class=\"comment\">// potential patch errors down the road when it&#x27;s used as an insertion</span></span><br><span class=\"line\">        <span class=\"comment\">// reference node. Instead, we clone the node on-demand before creating</span></span><br><span class=\"line\">        <span class=\"comment\">// associated DOM element for it.</span></span><br><span class=\"line\">        vnode = ownerArray[index] = <span class=\"title function_\">cloneVNode</span>(vnode);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    vnode.<span class=\"property\">isRootInsert</span> = !nested; <span class=\"comment\">// for transition enter check</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"title function_\">createComponent</span>(vnode, insertedVnodeQueue, parentElm, refElm)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> data = vnode.<span class=\"property\">data</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> children = vnode.<span class=\"property\">children</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> tag = vnode.<span class=\"property\">tag</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"title function_\">isDef</span>(tag)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (data &amp;&amp; data.<span class=\"property\">pre</span>) &#123;</span><br><span class=\"line\">                creatingElmInVPre++;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"title function_\">isUnknownElement$$1</span>(vnode, creatingElmInVPre)) &#123;</span><br><span class=\"line\">                <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">                    <span class=\"string\">&#x27;Unknown custom element: &lt;&#x27;</span> + tag + <span class=\"string\">&#x27;&gt; - did you &#x27;</span> +</span><br><span class=\"line\">                    <span class=\"string\">&#x27;register the component correctly? For recursive components, &#x27;</span> +</span><br><span class=\"line\">                    <span class=\"string\">&#x27;make sure to provide the &quot;name&quot; option.&#x27;</span>,</span><br><span class=\"line\">                    vnode.<span class=\"property\">context</span></span><br><span class=\"line\">                );</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        vnode.<span class=\"property\">elm</span> = vnode.<span class=\"property\">ns</span></span><br><span class=\"line\">            ? nodeOps.<span class=\"title function_\">createElementNS</span>(vnode.<span class=\"property\">ns</span>, tag)</span><br><span class=\"line\">        : nodeOps.<span class=\"title function_\">createElement</span>(tag, vnode);</span><br><span class=\"line\">        <span class=\"title function_\">setScope</span>(vnode);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/* istanbul ignore if */</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"title function_\">createChildren</span>(vnode, children, insertedVnodeQueue);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"title function_\">isDef</span>(data)) &#123;</span><br><span class=\"line\">                <span class=\"title function_\">invokeCreateHooks</span>(vnode, insertedVnodeQueue);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"title function_\">insert</span>(parentElm, vnode.<span class=\"property\">elm</span>, refElm);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span> &amp;&amp; data &amp;&amp; data.<span class=\"property\">pre</span>) &#123;</span><br><span class=\"line\">            creatingElmInVPre--;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"title function_\">isTrue</span>(vnode.<span class=\"property\">isComment</span>)) &#123;</span><br><span class=\"line\">        vnode.<span class=\"property\">elm</span> = nodeOps.<span class=\"title function_\">createComment</span>(vnode.<span class=\"property\">text</span>);</span><br><span class=\"line\">        <span class=\"title function_\">insert</span>(parentElm, vnode.<span class=\"property\">elm</span>, refElm);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        vnode.<span class=\"property\">elm</span> = nodeOps.<span class=\"title function_\">createTextNode</span>(vnode.<span class=\"property\">text</span>);</span><br><span class=\"line\">        <span class=\"title function_\">insert</span>(parentElm, vnode.<span class=\"property\">elm</span>, refElm);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p><strong><code>createComponent</code></strong></p>\n</li>\n<li><p><strong>HTML<code>nodeOps.createElement</code></strong></p>\n<ul>\n<li><p><strong><code>nodeOps.createElement</code>DOM</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">createElement$1</span> (tagName, vnode) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> elm = <span class=\"variable language_\">document</span>.<span class=\"title function_\">createElement</span>(tagName);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (tagName !== <span class=\"string\">&#x27;select&#x27;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> elm</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// false or null will remove the attribute but undefined will not</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (vnode.<span class=\"property\">data</span> &amp;&amp; vnode.<span class=\"property\">data</span>.<span class=\"property\">attrs</span> &amp;&amp; vnode.<span class=\"property\">data</span>.<span class=\"property\">attrs</span>.<span class=\"property\">multiple</span> !== <span class=\"literal\">undefined</span>) &#123;</span><br><span class=\"line\">    elm.<span class=\"title function_\">setAttribute</span>(<span class=\"string\">&#x27;multiple&#x27;</span>, <span class=\"string\">&#x27;multiple&#x27;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> elm</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p><strong><code>createChildren</code></strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">createChildren</span> (vnode, children, insertedVnodeQueue) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"title class_\">Array</span>.<span class=\"title function_\">isArray</span>(children)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span>) &#123;</span><br><span class=\"line\">            <span class=\"title function_\">checkDuplicateKeys</span>(children);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; children.<span class=\"property\">length</span>; ++i) &#123;</span><br><span class=\"line\">            <span class=\"title function_\">createElm</span>(children[i], insertedVnodeQueue, vnode.<span class=\"property\">elm</span>, <span class=\"literal\">null</span>, <span class=\"literal\">true</span>, children, i);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"title function_\">isPrimitive</span>(vnode.<span class=\"property\">text</span>)) &#123;</span><br><span class=\"line\">        nodeOps.<span class=\"title function_\">appendChild</span>(vnode.<span class=\"property\">elm</span>, nodeOps.<span class=\"title function_\">createTextNode</span>(<span class=\"title class_\">String</span>(vnode.<span class=\"property\">text</span>)));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong><code>createElm</code>DOM</strong></li>\n</ul>\n</li>\n<li><p><strong>DOM</strong></p>\n</li>\n<li><p><strong><code>insert</code></strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">insert</span> (parent, elm, ref$$1) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"title function_\">isDef</span>(parent)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"title function_\">isDef</span>(ref$$1)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (nodeOps.<span class=\"title function_\">parentNode</span>(ref$$1) === parent) &#123;</span><br><span class=\"line\">                nodeOps.<span class=\"title function_\">insertBefore</span>(parent, elm, ref$$1);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            nodeOps.<span class=\"title function_\">appendChild</span>(parent, elm);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>Vue</strong></li>\n</ul>\n</li>\n</ul>\n<h4 id=\"createComponent\"><a href=\"#createComponent\" class=\"headerlink\" title=\"createComponent\"></a>createComponent</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">createComponent</span> (vnode, insertedVnodeQueue, parentElm, refElm) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> i = vnode.<span class=\"property\">data</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"title function_\">isDef</span>(i)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> isReactivated = <span class=\"title function_\">isDef</span>(vnode.<span class=\"property\">componentInstance</span>) &amp;&amp; i.<span class=\"property\">keepAlive</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"title function_\">isDef</span>(i = i.<span class=\"property\">hook</span>) &amp;&amp; <span class=\"title function_\">isDef</span>(i = i.<span class=\"property\">init</span>)) &#123;</span><br><span class=\"line\">            <span class=\"title function_\">i</span>(vnode, <span class=\"literal\">false</span> <span class=\"comment\">/* hydrating */</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// after calling the init hook, if the vnode is a child component</span></span><br><span class=\"line\">        <span class=\"comment\">// it should&#x27;ve created a child instance and mounted it. the child</span></span><br><span class=\"line\">        <span class=\"comment\">// component also has set the placeholder vnode&#x27;s elm.</span></span><br><span class=\"line\">        <span class=\"comment\">// in that case we can just return the element and be done.</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"title function_\">isDef</span>(vnode.<span class=\"property\">componentInstance</span>)) &#123;</span><br><span class=\"line\">            <span class=\"title function_\">initComponent</span>(vnode, insertedVnodeQueue);</span><br><span class=\"line\">            <span class=\"title function_\">insert</span>(parentElm, vnode.<span class=\"property\">elm</span>, refElm);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"title function_\">isTrue</span>(isReactivated)) &#123;</span><br><span class=\"line\">                <span class=\"title function_\">reactivateComponent</span>(vnode, insertedVnodeQueue, parentElm, refElm);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>VNodedatahook<code>render</code>componentOptions<code>propstaglistenersCtor</code>CtorVueComponenttag</p>\n</li>\n<li><p><code>init</code>hook</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">init</span> (vnode, hydrating) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (</span><br><span class=\"line\">        vnode.<span class=\"property\">componentInstance</span> &amp;&amp;</span><br><span class=\"line\">        !vnode.<span class=\"property\">componentInstance</span>.<span class=\"property\">_isDestroyed</span> &amp;&amp;</span><br><span class=\"line\">        vnode.<span class=\"property\">data</span>.<span class=\"property\">keepAlive</span></span><br><span class=\"line\">    ) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// kept-alive components, treat as a patch</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> mountedNode = vnode; <span class=\"comment\">// work around flow</span></span><br><span class=\"line\">        componentVNodeHooks.<span class=\"title function_\">prepatch</span>(mountedNode, mountedNode);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> child = vnode.<span class=\"property\">componentInstance</span> = <span class=\"title function_\">createComponentInstanceForVnode</span>(</span><br><span class=\"line\">            vnode,</span><br><span class=\"line\">            activeInstance</span><br><span class=\"line\">        );</span><br><span class=\"line\">        child.$mount(hydrating ? vnode.<span class=\"property\">elm</span> : <span class=\"literal\">undefined</span>, hydrating);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong><code>createComponentInstanceForVnode</code>VueComponentVue.__init</strong></li>\n<li><strong><code>el</code><code>init</code><code>VueComponent</code><code>init</code>$mount</strong><ul>\n<li><code>init</code></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"invokeInsertHook\"><a href=\"#invokeInsertHook\" class=\"headerlink\" title=\"invokeInsertHook\"></a>invokeInsertHook</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">invokeInsertHook</span> (vnode, queue, initial) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// delay insert hooks for component root nodes, invoke them after the</span></span><br><span class=\"line\">    <span class=\"comment\">// element is really inserted</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"title function_\">isTrue</span>(initial) &amp;&amp; <span class=\"title function_\">isDef</span>(vnode.<span class=\"property\">parent</span>)) &#123;</span><br><span class=\"line\">        vnode.<span class=\"property\">parent</span>.<span class=\"property\">data</span>.<span class=\"property\">pendingInsert</span> = queue;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; queue.<span class=\"property\">length</span>; ++i) &#123;</span><br><span class=\"line\">            queue[i].<span class=\"property\">data</span>.<span class=\"property\">hook</span>.<span class=\"title function_\">insert</span>(queue[i]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong><code>insert</code>hook<code>patch</code></strong><ul>\n<li><strong><code>mounted</code></strong></li>\n<li><strong><code>v-model</code>DOM</strong></li>\n</ul>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>VuedebugVue</p>\n<p><strong></strong></p>\n<ul>\n<li>Vue2.6.14</li>\n<li>webpackdebug</li>\n<li></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* index.js */</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">Vue</span> <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">Header</span> <span class=\"keyword\">from</span> <span class=\"string\">&quot;./components/Header/index.js&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">debugger</span>; <span class=\"comment\">//debug</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Vue</span>(&#123;</span><br><span class=\"line\">  <span class=\"attr\">el</span>: <span class=\"string\">&quot;#app&quot;</span>,</span><br><span class=\"line\">  <span class=\"title function_\">data</span>(<span class=\"params\"></span>) &#123; <span class=\"comment\">// data</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      <span class=\"attr\">text</span>: <span class=\"string\">&quot;123&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">ifFlag</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      <span class=\"attr\">inputValue</span>: <span class=\"string\">&quot;input something&quot;</span>,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">methods</span>: &#123; <span class=\"comment\">// methods</span></span><br><span class=\"line\">    <span class=\"title function_\">hello</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;==app hello&quot;</span>);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">computed</span>: &#123; <span class=\"comment\">// computed</span></span><br><span class=\"line\">    <span class=\"title function_\">reversedText</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"variable language_\">this</span>.<span class=\"property\">text</span>.<span class=\"title function_\">split</span>(<span class=\"string\">&quot;&quot;</span>).<span class=\"title function_\">reverse</span>().<span class=\"title function_\">join</span>(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">// lifeCycle</span></span><br><span class=\"line\">  <span class=\"title function_\">beforeCreate</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;==app before create&quot;</span>);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"title function_\">created</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;==app created&quot;</span>);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"title function_\">beforeMount</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;==app before mount&quot;</span>);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"title function_\">mounted</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;==app mounted&quot;</span>);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"title function_\">beforeUpdate</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;==app before update&quot;</span>);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"title function_\">updated</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;==app updated&quot;</span>);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">// component</span></span><br><span class=\"line\">  <span class=\"attr\">components</span>: &#123;</span><br><span class=\"line\">    <span class=\"title class_\">Header</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">// template</span></span><br><span class=\"line\">  <span class=\"attr\">template</span>: <span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">    &lt;div id=&quot;app&quot; @click=&quot;hello&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">      &lt;div&gt;&#123;&#123;reversedText&#125;&#125;&lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">      &lt;div v-if=&quot;ifFlag&quot;&gt;ifFlag is true then I will show&lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">      &lt;input v-model=&quot;inputValue&quot; /&gt;</span></span><br><span class=\"line\"><span class=\"string\">      &lt;p&gt;what you input is:&#123;&#123;inputValue&#125;&#125;&lt;/p&gt;</span></span><br><span class=\"line\"><span class=\"string\">      &lt;Header :propValue=&quot;&#x27;from app&#x27;&quot; /&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">  `</span>,</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Header</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* Header.js */</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">Vue</span> <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title class_\">Vue</span>.<span class=\"title function_\">component</span>(<span class=\"string\">&quot;Header&quot;</span>, &#123;</span><br><span class=\"line\">  <span class=\"attr\">template</span>: <span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  &lt;div @click=&quot;showMsg&quot; class=&quot;header&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">    text:&#123;&#123;text&#125;&#125;</span></span><br><span class=\"line\"><span class=\"string\">    propValue:&#123;&#123;propValue&#125;&#125;</span></span><br><span class=\"line\"><span class=\"string\">  &lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">  `</span>,</span><br><span class=\"line\">  <span class=\"title function_\">data</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      <span class=\"attr\">text</span>: <span class=\"string\">&quot;i am header&quot;</span>,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">props</span>: [<span class=\"string\">&quot;propValue&quot;</span>], <span class=\"comment\">// props</span></span><br><span class=\"line\">  <span class=\"attr\">methods</span>: &#123;</span><br><span class=\"line\">    <span class=\"title function_\">showMsg</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;==from header&quot;</span>);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"title function_\">created</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;==Header components created&quot;</span>);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"title function_\">mounted</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;==Header components mounted&quot;</span>);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Vue2debug\"><a href=\"#Vue2debug\" class=\"headerlink\" title=\"Vue2debug\"></a>Vue2debug</h2><p><strong>debug</strong></p>\n<p><code>export default new Vue(&#123;...&#125;)</code>Vue</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Vue</span> (options) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span> &amp;&amp;</span><br><span class=\"line\">    !(<span class=\"variable language_\">this</span> <span class=\"keyword\">instanceof</span> <span class=\"title class_\">Vue</span>)</span><br><span class=\"line\">  ) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">warn</span>(<span class=\"string\">&#x27;Vue is a constructor and should be called with the `new` keyword&#x27;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"title function_\">_init</span>(options);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Vueoptions<code>_init</code></li>\n</ul>\n<h3 id=\"init\"><a href=\"#init\" class=\"headerlink\" title=\"__init\"></a>__init</h3><p>_initmixinVue</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title class_\">Vue</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">_init</span> = <span class=\"keyword\">function</span> (<span class=\"params\">options</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> vm = <span class=\"variable language_\">this</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// a flag to avoid this being observed</span></span><br><span class=\"line\">    vm.<span class=\"property\">_isVue</span> = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    <span class=\"comment\">// merge options</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (options &amp;&amp; options.<span class=\"property\">_isComponent</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// optimize internal component instantiation</span></span><br><span class=\"line\">        <span class=\"comment\">// since dynamic options merging is pretty slow, and none of the</span></span><br><span class=\"line\">        <span class=\"comment\">// internal component options needs special treatment.</span></span><br><span class=\"line\">        <span class=\"title function_\">initInternalComponent</span>(vm, options);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        vm.<span class=\"property\">$options</span> = <span class=\"title function_\">mergeOptions</span>(</span><br><span class=\"line\">            <span class=\"title function_\">resolveConstructorOptions</span>(vm.<span class=\"property\">constructor</span>),</span><br><span class=\"line\">            options || &#123;&#125;,</span><br><span class=\"line\">            vm</span><br><span class=\"line\">        );</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// expose real self</span></span><br><span class=\"line\">    vm.<span class=\"property\">_self</span> = vm;</span><br><span class=\"line\">    <span class=\"title function_\">initLifecycle</span>(vm);</span><br><span class=\"line\">    <span class=\"title function_\">initEvents</span>(vm);</span><br><span class=\"line\">    <span class=\"title function_\">initRender</span>(vm);</span><br><span class=\"line\">    <span class=\"title function_\">callHook</span>(vm, <span class=\"string\">&#x27;beforeCreate&#x27;</span>);</span><br><span class=\"line\">    <span class=\"title function_\">initInjections</span>(vm); <span class=\"comment\">// resolve injections before data/props</span></span><br><span class=\"line\">    <span class=\"title function_\">initState</span>(vm);</span><br><span class=\"line\">    <span class=\"title function_\">initProvide</span>(vm); <span class=\"comment\">// resolve provide after data/props</span></span><br><span class=\"line\">    <span class=\"title function_\">callHook</span>(vm, <span class=\"string\">&#x27;created&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (vm.<span class=\"property\">$options</span>.<span class=\"property\">el</span>) &#123;</span><br><span class=\"line\">        vm.$mount(vm.<span class=\"property\">$options</span>.<span class=\"property\">el</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li> vm &#x3D; Vue</li>\n<li>Vue<code>_isVue = true</code></li>\n<li><strong></strong></li>\n<li><strong>VueDOM</strong></li>\n<li><strong></strong></li>\n</ul>\n<h4 id=\"initInternalComponent\"><a href=\"#initInternalComponent\" class=\"headerlink\" title=\"initInternalComponent\"></a>initInternalComponent</h4><ul>\n<li>VnodeDOM</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">initInternalComponent</span> (vm, options) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> opts = vm.<span class=\"property\">$options</span> = <span class=\"title class_\">Object</span>.<span class=\"title function_\">create</span>(vm.<span class=\"property\">constructor</span>.<span class=\"property\">options</span>);</span><br><span class=\"line\">    <span class=\"comment\">// doing this because it&#x27;s faster than dynamic enumeration.</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> parentVnode = options.<span class=\"property\">_parentVnode</span>;</span><br><span class=\"line\">    opts.<span class=\"property\">parent</span> = options.<span class=\"property\">parent</span>;</span><br><span class=\"line\">    opts.<span class=\"property\">_parentVnode</span> = parentVnode;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> vnodeComponentOptions = parentVnode.<span class=\"property\">componentOptions</span>;</span><br><span class=\"line\">    opts.<span class=\"property\">propsData</span> = vnodeComponentOptions.<span class=\"property\">propsData</span>;</span><br><span class=\"line\">    opts.<span class=\"property\">_parentListeners</span> = vnodeComponentOptions.<span class=\"property\">listeners</span>;</span><br><span class=\"line\">    opts.<span class=\"property\">_renderChildren</span> = vnodeComponentOptions.<span class=\"property\">children</span>;</span><br><span class=\"line\">    opts.<span class=\"property\">_componentTag</span> = vnodeComponentOptions.<span class=\"property\">tag</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (options.<span class=\"property\">render</span>) &#123;</span><br><span class=\"line\">        opts.<span class=\"property\">render</span> = options.<span class=\"property\">render</span>;</span><br><span class=\"line\">        opts.<span class=\"property\">staticRenderFns</span> = options.<span class=\"property\">staticRenderFns</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>options.__parentVnode</code>VNode<code>options.parentVnode</code>Vue</li>\n</ul>\n<h4 id=\"mergeOptoins\"><a href=\"#mergeOptoins\" class=\"headerlink\" title=\"mergeOptoins\"></a>mergeOptoins</h4><ul>\n<li><p>option</p>\n</li>\n<li><p>resolveConstructorOptions<code>Vue.constructor</code></p>\n</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">mergeOptions</span> (</span><br><span class=\"line\">  parent, <span class=\"comment\">// Vue.constructor</span></span><br><span class=\"line\">  child, <span class=\"comment\">// option</span></span><br><span class=\"line\">  vm <span class=\"comment\">// Vue</span></span><br><span class=\"line\">) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span>) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">checkComponents</span>(child);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"title function_\">normalizeProps</span>(child, vm);</span><br><span class=\"line\">  <span class=\"title function_\">normalizeInject</span>(child, vm);</span><br><span class=\"line\">  <span class=\"title function_\">normalizeDirectives</span>(child);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// Apply extends and mixins on the child options,</span></span><br><span class=\"line\">  <span class=\"comment\">// but only if it is a raw options object that isn&#x27;t</span></span><br><span class=\"line\">  <span class=\"comment\">// the result of another mergeOptions call.</span></span><br><span class=\"line\">  <span class=\"comment\">// Only merged options has the _base property.</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!child.<span class=\"property\">_base</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (child.<span class=\"property\">extends</span>) &#123;</span><br><span class=\"line\">      parent = <span class=\"title function_\">mergeOptions</span>(parent, child.<span class=\"property\">extends</span>, vm);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (child.<span class=\"property\">mixins</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, l = child.<span class=\"property\">mixins</span>.<span class=\"property\">length</span>; i &lt; l; i++) &#123;</span><br><span class=\"line\">        parent = <span class=\"title function_\">mergeOptions</span>(parent, child.<span class=\"property\">mixins</span>[i], vm);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">var</span> options = &#123;&#125;;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> key;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (key <span class=\"keyword\">in</span> parent) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">mergeField</span>(key);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (key <span class=\"keyword\">in</span> child) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"title function_\">hasOwn</span>(parent, key)) &#123;</span><br><span class=\"line\">      <span class=\"title function_\">mergeField</span>(key);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">function</span> <span class=\"title function_\">mergeField</span> (key) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> strat = strats[key] || defaultStrat;</span><br><span class=\"line\">    options[key] = <span class=\"title function_\">strat</span>(parent[key], child[key], vm, key);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> options</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>checkComponents</code><strong></strong>divhtmldiv</li>\n<li><code>normalizeProps</code>**<code>props</code>**arrayplainObject<ul>\n<li></li>\n</ul>\n</li>\n<li>normalizeInjectnormalizeDirectives</li>\n<li>extendsmixins</li>\n<li>option<strong></strong><ul>\n<li>option</li>\n<li>option</li>\n<li>option</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"initProxy\"><a href=\"#initProxy\" class=\"headerlink\" title=\"initProxy\"></a>initProxy</h4><ul>\n<li>es6proxyVuelog</li>\n</ul>\n<h4 id=\"initLifecycle\"><a href=\"#initLifecycle\" class=\"headerlink\" title=\"initLifecycle\"></a>initLifecycle</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">initLifecycle</span> (vm) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> options = vm.<span class=\"property\">$options</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// locate first non-abstract parent</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> parent = options.<span class=\"property\">parent</span>;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (parent &amp;&amp; !options.<span class=\"property\">abstract</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (parent.<span class=\"property\">$options</span>.<span class=\"property\">abstract</span> &amp;&amp; parent.<span class=\"property\">$parent</span>) &#123;</span><br><span class=\"line\">      parent = parent.<span class=\"property\">$parent</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    parent.<span class=\"property\">$children</span>.<span class=\"title function_\">push</span>(vm);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  vm.<span class=\"property\">$parent</span> = parent;</span><br><span class=\"line\">  vm.<span class=\"property\">$root</span> = parent ? parent.<span class=\"property\">$root</span> : vm; <span class=\"comment\">//  Vue </span></span><br><span class=\"line\"></span><br><span class=\"line\">  vm.<span class=\"property\">$children</span> = []; <span class=\"comment\">// </span></span><br><span class=\"line\">  vm.<span class=\"property\">$refs</span> = &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  vm.<span class=\"property\">_watcher</span> = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"comment\">// lifeCycleflag</span></span><br><span class=\"line\">  vm.<span class=\"property\">_inactive</span> = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  vm.<span class=\"property\">_directInactive</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  vm.<span class=\"property\">_isMounted</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  vm.<span class=\"property\">_isDestroyed</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  vm.<span class=\"property\">_isBeingDestroyed</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>keep-alive</li>\n<li>vm</li>\n</ul>\n<h4 id=\"initEvents\"><a href=\"#initEvents\" class=\"headerlink\" title=\"initEvents\"></a>initEvents</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">initEvents</span> (vm) &#123;</span><br><span class=\"line\">  vm.<span class=\"property\">_events</span> = <span class=\"title class_\">Object</span>.<span class=\"title function_\">create</span>(<span class=\"literal\">null</span>);</span><br><span class=\"line\">  vm.<span class=\"property\">_hasHookEvent</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  <span class=\"comment\">// init parent attached events</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> listeners = vm.<span class=\"property\">$options</span>.<span class=\"property\">_parentListeners</span>;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (listeners) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">updateComponentListeners</span>(vm, listeners);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Vueevents<ul>\n<li><strong></strong></li>\n<li><strong><code>this.$on</code></strong></li>\n<li><strong><code>this.$emit</code></strong></li>\n</ul>\n</li>\n</ul>\n<h4 id=\"initRender\"><a href=\"#initRender\" class=\"headerlink\" title=\"initRender\"></a>initRender</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">initRender</span> (vm) &#123;</span><br><span class=\"line\">  vm.<span class=\"property\">_vnode</span> = <span class=\"literal\">null</span>; <span class=\"comment\">// the root of the child tree</span></span><br><span class=\"line\">  vm.<span class=\"property\">_staticTrees</span> = <span class=\"literal\">null</span>; <span class=\"comment\">// v-once cached trees</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> options = vm.<span class=\"property\">$options</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> parentVnode = vm.<span class=\"property\">$vnode</span> = options.<span class=\"property\">_parentVnode</span>; <span class=\"comment\">// the placeholder node in parent tree</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> renderContext = parentVnode &amp;&amp; parentVnode.<span class=\"property\">context</span>;</span><br><span class=\"line\">  vm.<span class=\"property\">$slots</span> = <span class=\"title function_\">resolveSlots</span>(options.<span class=\"property\">_renderChildren</span>, renderContext);</span><br><span class=\"line\">  vm.<span class=\"property\">$scopedSlots</span> = emptyObject;</span><br><span class=\"line\">  <span class=\"comment\">// bind the createElement fn to this instance</span></span><br><span class=\"line\">  <span class=\"comment\">// so that we get proper render context inside it.</span></span><br><span class=\"line\">  <span class=\"comment\">// args order: tag, data, children, normalizationType, alwaysNormalize</span></span><br><span class=\"line\">  <span class=\"comment\">// internal version is used by render functions compiled from templates</span></span><br><span class=\"line\">  vm.<span class=\"property\">_c</span> = <span class=\"keyword\">function</span> (<span class=\"params\">a, b, c, d</span>) &#123; <span class=\"keyword\">return</span> <span class=\"title function_\">createElement</span>(vm, a, b, c, d, <span class=\"literal\">false</span>); &#125;;</span><br><span class=\"line\">  <span class=\"comment\">// normalization is always applied for the public version, used in</span></span><br><span class=\"line\">  <span class=\"comment\">// user-written render functions.</span></span><br><span class=\"line\">  vm.<span class=\"property\">$createElement</span> = <span class=\"keyword\">function</span> (<span class=\"params\">a, b, c, d</span>) &#123; <span class=\"keyword\">return</span> <span class=\"title function_\">createElement</span>(vm, a, b, c, d, <span class=\"literal\">true</span>); &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// $attrs &amp; $listeners are exposed for easier HOC creation.</span></span><br><span class=\"line\">  <span class=\"comment\">// they need to be reactive so that HOCs using them are always updated</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> parentData = parentVnode &amp;&amp; parentVnode.<span class=\"property\">data</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/* istanbul ignore else */</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span>) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">defineReactive$$1</span>(vm, <span class=\"string\">&#x27;$attrs&#x27;</span>, parentData &amp;&amp; parentData.<span class=\"property\">attrs</span> || emptyObject, <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">      !isUpdatingChildComponent &amp;&amp; <span class=\"title function_\">warn</span>(<span class=\"string\">&quot;$attrs is readonly.&quot;</span>, vm);</span><br><span class=\"line\">    &#125;, <span class=\"literal\">true</span>);</span><br><span class=\"line\">    <span class=\"title function_\">defineReactive$$1</span>(vm, <span class=\"string\">&#x27;$listeners&#x27;</span>, options.<span class=\"property\">_parentListeners</span> || emptyObject, <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">      !isUpdatingChildComponent &amp;&amp; <span class=\"title function_\">warn</span>(<span class=\"string\">&quot;$listeners is readonly.&quot;</span>, vm);</span><br><span class=\"line\">    &#125;, <span class=\"literal\">true</span>);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"title function_\">defineReactive$$1</span>(vm, <span class=\"string\">&#x27;$attrs&#x27;</span>, parentData &amp;&amp; parentData.<span class=\"property\">attrs</span> || emptyObject, <span class=\"literal\">null</span>, <span class=\"literal\">true</span>);</span><br><span class=\"line\">    <span class=\"title function_\">defineReactive$$1</span>(vm, <span class=\"string\">&#x27;$listeners&#x27;</span>, options.<span class=\"property\">_parentListeners</span> || emptyObject, <span class=\"literal\">null</span>, <span class=\"literal\">true</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>vm</p>\n<ul>\n<li>_vnodeVueDOMVNode</li>\n<li>$vnodeVueparenttemplatenode</li>\n</ul>\n</li>\n<li><p>resolveSlotsslot$slot</p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">resolveSlots</span> (</span><br><span class=\"line\">  children,</span><br><span class=\"line\">  context</span><br><span class=\"line\">) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!children || !children.<span class=\"property\">length</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;&#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> slots = &#123;&#125;;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, l = children.<span class=\"property\">length</span>; i &lt; l; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> child = children[i];</span><br><span class=\"line\">    <span class=\"keyword\">var</span> data = child.<span class=\"property\">data</span>;</span><br><span class=\"line\">    <span class=\"comment\">// remove slot attribute if the node is resolved as a Vue slot node</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (data &amp;&amp; data.<span class=\"property\">attrs</span> &amp;&amp; data.<span class=\"property\">attrs</span>.<span class=\"property\">slot</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">delete</span> data.<span class=\"property\">attrs</span>.<span class=\"property\">slot</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// named slots should only be respected if the vnode was rendered in the</span></span><br><span class=\"line\">    <span class=\"comment\">// same context.</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> ((child.<span class=\"property\">context</span> === context || child.<span class=\"property\">fnContext</span> === context) &amp;&amp;</span><br><span class=\"line\">      data &amp;&amp; data.<span class=\"property\">slot</span> != <span class=\"literal\">null</span></span><br><span class=\"line\">    ) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> name = data.<span class=\"property\">slot</span>;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> slot = (slots[name] || (slots[name] = []));</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (child.<span class=\"property\">tag</span> === <span class=\"string\">&#x27;template&#x27;</span>) &#123; <span class=\"comment\">// template</span></span><br><span class=\"line\">        slot.<span class=\"property\">push</span>.<span class=\"title function_\">apply</span>(slot, child.<span class=\"property\">children</span> || []);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        slot.<span class=\"title function_\">push</span>(child);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      (slots.<span class=\"property\">default</span> || (slots.<span class=\"property\">default</span> = [])).<span class=\"title function_\">push</span>(child);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// ignore slots that contains only whitespace</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> name$<span class=\"number\">1</span> <span class=\"keyword\">in</span> slots) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (slots[name$<span class=\"number\">1</span>].<span class=\"title function_\">every</span>(isWhitespace)) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">delete</span> slots[name$<span class=\"number\">1</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> slots</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>$createElement_cVDOMDOM</p>\n</li>\n<li><p><code>$attrs</code><code>$listeners</code></p>\n</li>\n</ul>\n<h4 id=\"callHook-beforeCreated\"><a href=\"#callHook-beforeCreated\" class=\"headerlink\" title=\"callHook(beforeCreated)\"></a>callHook(beforeCreated)</h4><p><code>beforeCreated</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">callHook</span> (vm, hook) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// #7573 disable dep collection when invoking lifecycle hooks</span></span><br><span class=\"line\">  <span class=\"title function_\">pushTarget</span>();</span><br><span class=\"line\">  <span class=\"keyword\">var</span> handlers = vm.<span class=\"property\">$options</span>[hook];</span><br><span class=\"line\">  <span class=\"keyword\">var</span> info = hook + <span class=\"string\">&quot; hook&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (handlers) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, j = handlers.<span class=\"property\">length</span>; i &lt; j; i++) &#123;</span><br><span class=\"line\">      <span class=\"title function_\">invokeWithErrorHandling</span>(handlers[i], vm, <span class=\"literal\">null</span>, vm, info);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (vm.<span class=\"property\">_hasHookEvent</span>) &#123;</span><br><span class=\"line\">    vm.$emit(<span class=\"string\">&#x27;hook:&#x27;</span> + hook);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"title function_\">popTarget</span>();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Dep</li>\n<li><code>handlers</code></li>\n<li><strong>invokeWithErrorHandling</strong></li>\n</ul>\n<h4 id=\"initInjections\"><a href=\"#initInjections\" class=\"headerlink\" title=\"initInjections\"></a>initInjections</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">initInjections</span> (vm) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> result = <span class=\"title function_\">resolveInject</span>(vm.<span class=\"property\">$options</span>.<span class=\"property\">inject</span>, vm);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (result) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">toggleObserving</span>(<span class=\"literal\">false</span>);</span><br><span class=\"line\">    <span class=\"title class_\">Object</span>.<span class=\"title function_\">keys</span>(result).<span class=\"title function_\">forEach</span>(<span class=\"keyword\">function</span> (<span class=\"params\">key</span>) &#123;</span><br><span class=\"line\">      <span class=\"comment\">/* istanbul ignore else */</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span>) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">defineReactive$$1</span>(vm, key, result[key], <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">          <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">            <span class=\"string\">&quot;Avoid mutating an injected value directly since the changes will be &quot;</span> +</span><br><span class=\"line\">            <span class=\"string\">&quot;overwritten whenever the provided component re-renders. &quot;</span> +</span><br><span class=\"line\">            <span class=\"string\">&quot;injection being mutated: \\&quot;&quot;</span> + key + <span class=\"string\">&quot;\\&quot;&quot;</span>,</span><br><span class=\"line\">            vm</span><br><span class=\"line\">          );</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"title function_\">defineReactive$$1</span>(vm, key, result[key]);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"title function_\">toggleObserving</span>(<span class=\"literal\">true</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>provide</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">resolveInject</span> (inject, vm) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (inject) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// inject is :any because flow is not smart enough to figure out cached</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> result = <span class=\"title class_\">Object</span>.<span class=\"title function_\">create</span>(<span class=\"literal\">null</span>);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> keys = hasSymbol</span><br><span class=\"line\">      ? <span class=\"title class_\">Reflect</span>.<span class=\"title function_\">ownKeys</span>(inject)</span><br><span class=\"line\">      : <span class=\"title class_\">Object</span>.<span class=\"title function_\">keys</span>(inject);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; keys.<span class=\"property\">length</span>; i++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> key = keys[i];</span><br><span class=\"line\">      <span class=\"comment\">// #6574 in case the inject object is observed...</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (key === <span class=\"string\">&#x27;__ob__&#x27;</span>) &#123; <span class=\"keyword\">continue</span> &#125;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> provideKey = inject[key].<span class=\"property\">from</span>;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> source = vm;</span><br><span class=\"line\">      <span class=\"keyword\">while</span> (source) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (source.<span class=\"property\">_provided</span> &amp;&amp; <span class=\"title function_\">hasOwn</span>(source.<span class=\"property\">_provided</span>, provideKey)) &#123;</span><br><span class=\"line\">          result[key] = source.<span class=\"property\">_provided</span>[provideKey];</span><br><span class=\"line\">          <span class=\"keyword\">break</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        source = source.<span class=\"property\">$parent</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!source) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"string\">&#x27;default&#x27;</span> <span class=\"keyword\">in</span> inject[key]) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">var</span> provideDefault = inject[key].<span class=\"property\">default</span>;</span><br><span class=\"line\">          result[key] = <span class=\"keyword\">typeof</span> provideDefault === <span class=\"string\">&#x27;function&#x27;</span></span><br><span class=\"line\">            ? provideDefault.<span class=\"title function_\">call</span>(vm)</span><br><span class=\"line\">            : provideDefault;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span>) &#123;</span><br><span class=\"line\">          <span class=\"title function_\">warn</span>((<span class=\"string\">&quot;Injection \\&quot;&quot;</span> + key + <span class=\"string\">&quot;\\&quot; not found&quot;</span>), vm);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> result</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>injectkeyprovide</li>\n</ul>\n</li>\n<li><p><strong>injectdefineReactive$$1</strong></p>\n</li>\n</ul>\n<h4 id=\"initState\"><a href=\"#initState\" class=\"headerlink\" title=\"initState\"></a>initState</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">initState</span> (vm) &#123;</span><br><span class=\"line\">  vm.<span class=\"property\">_watchers</span> = [];</span><br><span class=\"line\">  <span class=\"keyword\">var</span> opts = vm.<span class=\"property\">$options</span>;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (opts.<span class=\"property\">props</span>) &#123; <span class=\"title function_\">initProps</span>(vm, opts.<span class=\"property\">props</span>); &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (opts.<span class=\"property\">methods</span>) &#123; <span class=\"title function_\">initMethods</span>(vm, opts.<span class=\"property\">methods</span>); &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (opts.<span class=\"property\">data</span>) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">initData</span>(vm);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"title function_\">observe</span>(vm.<span class=\"property\">_data</span> = &#123;&#125;, <span class=\"literal\">true</span> <span class=\"comment\">/* asRootData */</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (opts.<span class=\"property\">computed</span>) &#123; <span class=\"title function_\">initComputed</span>(vm, opts.<span class=\"property\">computed</span>); &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (opts.<span class=\"property\">watch</span> &amp;&amp; opts.<span class=\"property\">watch</span> !== nativeWatch) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">initWatch</span>(vm, opts.<span class=\"property\">watch</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>initStateoption<ul>\n<li>props</li>\n<li>methods</li>\n<li>data</li>\n<li>computed</li>\n<li>watch</li>\n</ul>\n</li>\n</ul>\n<h5 id=\"initProps\"><a href=\"#initProps\" class=\"headerlink\" title=\"initProps\"></a>initProps</h5><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">initProps</span> (vm, propsOptions) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> propsData = vm.<span class=\"property\">$options</span>.<span class=\"property\">propsData</span> || &#123;&#125;;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> props = vm.<span class=\"property\">_props</span> = &#123;&#125;;</span><br><span class=\"line\">  <span class=\"comment\">// cache prop keys so that future props updates can iterate using Array</span></span><br><span class=\"line\">  <span class=\"comment\">// instead of dynamic object key enumeration.</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> keys = vm.<span class=\"property\">$options</span>.<span class=\"property\">_propKeys</span> = [];</span><br><span class=\"line\">  <span class=\"keyword\">var</span> isRoot = !vm.<span class=\"property\">$parent</span>;</span><br><span class=\"line\">  <span class=\"comment\">// root instance props should be converted</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!isRoot) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">toggleObserving</span>(<span class=\"literal\">false</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> loop = <span class=\"keyword\">function</span> (<span class=\"params\"> key </span>) &#123;</span><br><span class=\"line\">    keys.<span class=\"title function_\">push</span>(key);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> value = <span class=\"title function_\">validateProp</span>(key, propsOptions, propsData, vm);</span><br><span class=\"line\">    <span class=\"comment\">/* istanbul ignore else */</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> hyphenatedKey = <span class=\"title function_\">hyphenate</span>(key);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"title function_\">isReservedAttribute</span>(hyphenatedKey) ||</span><br><span class=\"line\">          config.<span class=\"title function_\">isReservedAttr</span>(hyphenatedKey)) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">          (<span class=\"string\">&quot;\\&quot;&quot;</span> + hyphenatedKey + <span class=\"string\">&quot;\\&quot; is a reserved attribute and cannot be used as component prop.&quot;</span>),</span><br><span class=\"line\">          vm</span><br><span class=\"line\">        );</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"title function_\">defineReactive$$1</span>(props, key, value, <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!isRoot &amp;&amp; !isUpdatingChildComponent) &#123;</span><br><span class=\"line\">          <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">            <span class=\"string\">&quot;Avoid mutating a prop directly since the value will be &quot;</span> +</span><br><span class=\"line\">            <span class=\"string\">&quot;overwritten whenever the parent component re-renders. &quot;</span> +</span><br><span class=\"line\">            <span class=\"string\">&quot;Instead, use a data or computed property based on the prop&#x27;s &quot;</span> +</span><br><span class=\"line\">            <span class=\"string\">&quot;value. Prop being mutated: \\&quot;&quot;</span> + key + <span class=\"string\">&quot;\\&quot;&quot;</span>,</span><br><span class=\"line\">            vm</span><br><span class=\"line\">          );</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"title function_\">defineReactive$$1</span>(props, key, value);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// static props are already proxied on the component&#x27;s prototype</span></span><br><span class=\"line\">    <span class=\"comment\">// during Vue.extend(). We only need to proxy props defined at</span></span><br><span class=\"line\">    <span class=\"comment\">// instantiation here.</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!(key <span class=\"keyword\">in</span> vm)) &#123;</span><br><span class=\"line\">      <span class=\"title function_\">proxy</span>(vm, <span class=\"string\">&quot;_props&quot;</span>, key);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> key <span class=\"keyword\">in</span> propsOptions) <span class=\"title function_\">loop</span>( key );</span><br><span class=\"line\">  <span class=\"title function_\">toggleObserving</span>(<span class=\"literal\">true</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>props</p>\n</li>\n<li><p>validatePropprops</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">validateProp</span> (</span><br><span class=\"line\">  key,</span><br><span class=\"line\">  propOptions,</span><br><span class=\"line\">  propsData,</span><br><span class=\"line\">  vm</span><br><span class=\"line\">) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> prop = propOptions[key];</span><br><span class=\"line\">  <span class=\"keyword\">var</span> absent = !<span class=\"title function_\">hasOwn</span>(propsData, key);</span><br><span class=\"line\">  <span class=\"keyword\">var</span> value = propsData[key];</span><br><span class=\"line\">  <span class=\"comment\">// boolean casting</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> booleanIndex = <span class=\"title function_\">getTypeIndex</span>(<span class=\"title class_\">Boolean</span>, prop.<span class=\"property\">type</span>);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (booleanIndex &gt; -<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (absent &amp;&amp; !<span class=\"title function_\">hasOwn</span>(prop, <span class=\"string\">&#x27;default&#x27;</span>)) &#123;</span><br><span class=\"line\">      value = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (value === <span class=\"string\">&#x27;&#x27;</span> || value === <span class=\"title function_\">hyphenate</span>(key)) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// only cast empty string / same name to boolean if</span></span><br><span class=\"line\">      <span class=\"comment\">// boolean has higher priority</span></span><br><span class=\"line\">      <span class=\"keyword\">var</span> stringIndex = <span class=\"title function_\">getTypeIndex</span>(<span class=\"title class_\">String</span>, prop.<span class=\"property\">type</span>);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (stringIndex &lt; <span class=\"number\">0</span> || booleanIndex &lt; stringIndex) &#123;</span><br><span class=\"line\">        value = <span class=\"literal\">true</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// check default value</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (value === <span class=\"literal\">undefined</span>) &#123;</span><br><span class=\"line\">    value = <span class=\"title function_\">getPropDefaultValue</span>(vm, prop, key);</span><br><span class=\"line\">    <span class=\"comment\">// since the default value is a fresh copy,</span></span><br><span class=\"line\">    <span class=\"comment\">// make sure to observe it.</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> prevShouldObserve = shouldObserve;</span><br><span class=\"line\">    <span class=\"title function_\">toggleObserving</span>(<span class=\"literal\">true</span>);</span><br><span class=\"line\">    <span class=\"title function_\">observe</span>(value);</span><br><span class=\"line\">    <span class=\"title function_\">toggleObserving</span>(prevShouldObserve);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (</span><br><span class=\"line\">    process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span> &amp;&amp;</span><br><span class=\"line\">    <span class=\"comment\">// skip validation for weex recycle-list child component props</span></span><br><span class=\"line\">    !(<span class=\"literal\">false</span>)</span><br><span class=\"line\">  ) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">assertProp</span>(prop, key, value, vm, absent);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>propstype</strong></li>\n<li><strong>props</strong></li>\n<li><strong>props</strong></li>\n</ul>\n</li>\n<li><p></p>\n</li>\n</ul>\n<h5 id=\"initMethods\"><a href=\"#initMethods\" class=\"headerlink\" title=\"initMethods\"></a>initMethods</h5><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">initMethods</span> (vm, methods) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> props = vm.<span class=\"property\">$options</span>.<span class=\"property\">props</span>;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> key <span class=\"keyword\">in</span> methods) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> methods[key] !== <span class=\"string\">&#x27;function&#x27;</span>) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">          <span class=\"string\">&quot;Method \\&quot;&quot;</span> + key + <span class=\"string\">&quot;\\&quot; has type \\&quot;&quot;</span> + (<span class=\"keyword\">typeof</span> methods[key]) + <span class=\"string\">&quot;\\&quot; in the component definition. &quot;</span> +</span><br><span class=\"line\">          <span class=\"string\">&quot;Did you reference the function correctly?&quot;</span>,</span><br><span class=\"line\">          vm</span><br><span class=\"line\">        );</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (props &amp;&amp; <span class=\"title function_\">hasOwn</span>(props, key)) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">          (<span class=\"string\">&quot;Method \\&quot;&quot;</span> + key + <span class=\"string\">&quot;\\&quot; has already been defined as a prop.&quot;</span>),</span><br><span class=\"line\">          vm</span><br><span class=\"line\">        );</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> ((key <span class=\"keyword\">in</span> vm) &amp;&amp; <span class=\"title function_\">isReserved</span>(key)) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">          <span class=\"string\">&quot;Method \\&quot;&quot;</span> + key + <span class=\"string\">&quot;\\&quot; conflicts with an existing Vue instance method. &quot;</span> +</span><br><span class=\"line\">          <span class=\"string\">&quot;Avoid defining component methods that start with _ or $.&quot;</span></span><br><span class=\"line\">        );</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    vm[key] = <span class=\"keyword\">typeof</span> methods[key] !== <span class=\"string\">&#x27;function&#x27;</span> ? noop : <span class=\"title function_\">bind</span>(methods[key], vm);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>bindthisvmVue</li>\n</ul>\n<h5 id=\"initData\"><a href=\"#initData\" class=\"headerlink\" title=\"initData\"></a>initData</h5><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">initData</span> (vm) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> data = vm.<span class=\"property\">$options</span>.<span class=\"property\">data</span>;</span><br><span class=\"line\">  data = vm.<span class=\"property\">_data</span> = <span class=\"keyword\">typeof</span> data === <span class=\"string\">&#x27;function&#x27;</span></span><br><span class=\"line\">    ? <span class=\"title function_\">getData</span>(data, vm)</span><br><span class=\"line\">    : data || &#123;&#125;;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!<span class=\"title function_\">isPlainObject</span>(data)) &#123;</span><br><span class=\"line\">    data = &#123;&#125;;</span><br><span class=\"line\">    process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span> &amp;&amp; <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">      <span class=\"string\">&#x27;data functions should return an object:\\n&#x27;</span> +</span><br><span class=\"line\">      <span class=\"string\">&#x27;https://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function&#x27;</span>,</span><br><span class=\"line\">      vm</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// proxy data on instance</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> keys = <span class=\"title class_\">Object</span>.<span class=\"title function_\">keys</span>(data);</span><br><span class=\"line\">  <span class=\"keyword\">var</span> props = vm.<span class=\"property\">$options</span>.<span class=\"property\">props</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> methods = vm.<span class=\"property\">$options</span>.<span class=\"property\">methods</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> i = keys.<span class=\"property\">length</span>;</span><br><span class=\"line\">  <span class=\"keyword\">while</span> (i--) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> key = keys[i];</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (methods &amp;&amp; <span class=\"title function_\">hasOwn</span>(methods, key)) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">          (<span class=\"string\">&quot;Method \\&quot;&quot;</span> + key + <span class=\"string\">&quot;\\&quot; has already been defined as a data property.&quot;</span>),</span><br><span class=\"line\">          vm</span><br><span class=\"line\">        );</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (props &amp;&amp; <span class=\"title function_\">hasOwn</span>(props, key)) &#123;</span><br><span class=\"line\">      process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span> &amp;&amp; <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">        <span class=\"string\">&quot;The data property \\&quot;&quot;</span> + key + <span class=\"string\">&quot;\\&quot; is already declared as a prop. &quot;</span> +</span><br><span class=\"line\">        <span class=\"string\">&quot;Use prop default value instead.&quot;</span>,</span><br><span class=\"line\">        vm</span><br><span class=\"line\">      );</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!<span class=\"title function_\">isReserved</span>(key)) &#123;</span><br><span class=\"line\">      <span class=\"title function_\">proxy</span>(vm, <span class=\"string\">&quot;_data&quot;</span>, key);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// observe data</span></span><br><span class=\"line\">  <span class=\"title function_\">observe</span>(data, <span class=\"literal\">true</span> <span class=\"comment\">/* asRootData */</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>datagetData</li>\n<li><ul>\n<li>propsdataplainObje</li>\n</ul>\n</li>\n<li>proxy<code>_data</code></li>\n<li><strong>data</strong></li>\n</ul>\n<h5 id=\"initComputed\"><a href=\"#initComputed\" class=\"headerlink\" title=\"initComputed\"></a>initComputed</h5><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">initComputed</span> (vm, computed) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// $flow-disable-line</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> watchers = vm.<span class=\"property\">_computedWatchers</span> = <span class=\"title class_\">Object</span>.<span class=\"title function_\">create</span>(<span class=\"literal\">null</span>);</span><br><span class=\"line\">  <span class=\"comment\">// computed properties are just getters during SSR</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> isSSR = <span class=\"title function_\">isServerRendering</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> key <span class=\"keyword\">in</span> computed) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> userDef = computed[key];</span><br><span class=\"line\">    <span class=\"keyword\">var</span> getter = <span class=\"keyword\">typeof</span> userDef === <span class=\"string\">&#x27;function&#x27;</span> ? userDef : userDef.<span class=\"property\">get</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span> &amp;&amp; getter == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">        (<span class=\"string\">&quot;Getter is missing for computed property \\&quot;&quot;</span> + key + <span class=\"string\">&quot;\\&quot;.&quot;</span>),</span><br><span class=\"line\">        vm</span><br><span class=\"line\">      );</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!isSSR) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// create internal watcher for the computed property.</span></span><br><span class=\"line\">      watchers[key] = <span class=\"keyword\">new</span> <span class=\"title class_\">Watcher</span>(</span><br><span class=\"line\">        vm,</span><br><span class=\"line\">        getter || noop,</span><br><span class=\"line\">        noop,</span><br><span class=\"line\">        computedWatcherOptions</span><br><span class=\"line\">      );</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// component-defined computed properties are already defined on the</span></span><br><span class=\"line\">    <span class=\"comment\">// component prototype. We only need to define computed properties defined</span></span><br><span class=\"line\">    <span class=\"comment\">// at instantiation here.</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!(key <span class=\"keyword\">in</span> vm)) &#123;</span><br><span class=\"line\">      <span class=\"title function_\">defineComputed</span>(vm, key, userDef);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (key <span class=\"keyword\">in</span> vm.<span class=\"property\">$data</span>) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">warn</span>((<span class=\"string\">&quot;The computed property \\&quot;&quot;</span> + key + <span class=\"string\">&quot;\\&quot; is already defined in data.&quot;</span>), vm);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (vm.<span class=\"property\">$options</span>.<span class=\"property\">props</span> &amp;&amp; key <span class=\"keyword\">in</span> vm.<span class=\"property\">$options</span>.<span class=\"property\">props</span>) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">warn</span>((<span class=\"string\">&quot;The computed property \\&quot;&quot;</span> + key + <span class=\"string\">&quot;\\&quot; is already defined as a prop.&quot;</span>), vm);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (vm.<span class=\"property\">$options</span>.<span class=\"property\">methods</span> &amp;&amp; key <span class=\"keyword\">in</span> vm.<span class=\"property\">$options</span>.<span class=\"property\">methods</span>) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">warn</span>((<span class=\"string\">&quot;The computed property \\&quot;&quot;</span> + key + <span class=\"string\">&quot;\\&quot; is already defined as a method.&quot;</span>), vm);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>computedwatcher</li>\n<li>computedwatcher</li>\n<li>defineComputedcomputedvmwatcher</li>\n</ul>\n<h5 id=\"initWatch\"><a href=\"#initWatch\" class=\"headerlink\" title=\"initWatch\"></a>initWatch</h5><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">initWatch</span> (vm, watch) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> key <span class=\"keyword\">in</span> watch) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> handler = watch[key];</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"title class_\">Array</span>.<span class=\"title function_\">isArray</span>(handler)) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; handler.<span class=\"property\">length</span>; i++) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">createWatcher</span>(vm, key, handler[i]);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"title function_\">createWatcher</span>(vm, key, handler);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>watcher<code>Vue.$watch</code></li>\n<li><code>Vue.$watch</code>watcher</li>\n</ul>\n<h4 id=\"initProvide\"><a href=\"#initProvide\" class=\"headerlink\" title=\"initProvide\"></a>initProvide</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">initProvide</span> (vm) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> provide = vm.<span class=\"property\">$options</span>.<span class=\"property\">provide</span>;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (provide) &#123;</span><br><span class=\"line\">    vm.<span class=\"property\">_provided</span> = <span class=\"keyword\">typeof</span> provide === <span class=\"string\">&#x27;function&#x27;</span></span><br><span class=\"line\">      ? provide.<span class=\"title function_\">call</span>(vm)</span><br><span class=\"line\">      : provide;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>providevm</li>\n</ul>\n<h4 id=\"callHook-created\"><a href=\"#callHook-created\" class=\"headerlink\" title=\"callHook(created)\"></a>callHook(created)</h4><ul>\n<li><code>created</code></li>\n</ul>\n<h3 id=\"mount\"><a href=\"#mount\" class=\"headerlink\" title=\"$mount\"></a>$mount</h3><ul>\n<li><code>_init</code>el</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title class_\">Vue</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">$mount</span> = <span class=\"keyword\">function</span> (<span class=\"params\"></span></span><br><span class=\"line\"><span class=\"params\">  el,</span></span><br><span class=\"line\"><span class=\"params\">  hydrating</span></span><br><span class=\"line\"><span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  el = el &amp;&amp; <span class=\"title function_\">query</span>(el);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/* istanbul ignore if */</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (el === <span class=\"variable language_\">document</span>.<span class=\"property\">body</span> || el === <span class=\"variable language_\">document</span>.<span class=\"property\">documentElement</span>) &#123;</span><br><span class=\"line\">    process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span> &amp;&amp; <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">      <span class=\"string\">&quot;Do not mount Vue to &lt;html&gt; or &lt;body&gt; - mount to normal elements instead.&quot;</span></span><br><span class=\"line\">    );</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable language_\">this</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">var</span> options = <span class=\"variable language_\">this</span>.<span class=\"property\">$options</span>;</span><br><span class=\"line\">  <span class=\"comment\">// resolve template/el and convert to render function</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!options.<span class=\"property\">render</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> template = options.<span class=\"property\">template</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (template) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> template === <span class=\"string\">&#x27;string&#x27;</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (template.<span class=\"title function_\">charAt</span>(<span class=\"number\">0</span>) === <span class=\"string\">&#x27;#&#x27;</span>) &#123;</span><br><span class=\"line\">          template = <span class=\"title function_\">idToTemplate</span>(template);</span><br><span class=\"line\">          <span class=\"comment\">/* istanbul ignore if */</span></span><br><span class=\"line\">          <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span> &amp;&amp; !template) &#123;</span><br><span class=\"line\">            <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">              (<span class=\"string\">&quot;Template element not found or is empty: &quot;</span> + (options.<span class=\"property\">template</span>)),</span><br><span class=\"line\">              <span class=\"variable language_\">this</span></span><br><span class=\"line\">            );</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (template.<span class=\"property\">nodeType</span>) &#123;</span><br><span class=\"line\">        template = template.<span class=\"property\">innerHTML</span>;</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span>) &#123;</span><br><span class=\"line\">          <span class=\"title function_\">warn</span>(<span class=\"string\">&#x27;invalid template option:&#x27;</span> + template, <span class=\"variable language_\">this</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">this</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (el) &#123;</span><br><span class=\"line\">      template = <span class=\"title function_\">getOuterHTML</span>(el);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (template) &#123;</span><br><span class=\"line\">      <span class=\"comment\">/* istanbul ignore if */</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span> &amp;&amp; config.<span class=\"property\">performance</span> &amp;&amp; mark) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">mark</span>(<span class=\"string\">&#x27;compile&#x27;</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">var</span> ref = <span class=\"title function_\">compileToFunctions</span>(template, &#123;</span><br><span class=\"line\">        <span class=\"attr\">outputSourceRange</span>: process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">shouldDecodeNewlines</span>: shouldDecodeNewlines,</span><br><span class=\"line\">        <span class=\"attr\">shouldDecodeNewlinesForHref</span>: shouldDecodeNewlinesForHref,</span><br><span class=\"line\">        <span class=\"attr\">delimiters</span>: options.<span class=\"property\">delimiters</span>,</span><br><span class=\"line\">        <span class=\"attr\">comments</span>: options.<span class=\"property\">comments</span></span><br><span class=\"line\">      &#125;, <span class=\"variable language_\">this</span>);</span><br><span class=\"line\">      <span class=\"keyword\">var</span> render = ref.<span class=\"property\">render</span>;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> staticRenderFns = ref.<span class=\"property\">staticRenderFns</span>;</span><br><span class=\"line\">      options.<span class=\"property\">render</span> = render;</span><br><span class=\"line\">      options.<span class=\"property\">staticRenderFns</span> = staticRenderFns;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">/* istanbul ignore if */</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span> &amp;&amp; config.<span class=\"property\">performance</span> &amp;&amp; mark) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">mark</span>(<span class=\"string\">&#x27;compile end&#x27;</span>);</span><br><span class=\"line\">        <span class=\"title function_\">measure</span>((<span class=\"string\">&quot;vue &quot;</span> + (<span class=\"variable language_\">this</span>.<span class=\"property\">_name</span>) + <span class=\"string\">&quot; compile&quot;</span>), <span class=\"string\">&#x27;compile&#x27;</span>, <span class=\"string\">&#x27;compile end&#x27;</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> mount.<span class=\"title function_\">call</span>(<span class=\"variable language_\">this</span>, el, hydrating)</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p><code>query</code><code>el</code>DOM</p>\n</li>\n<li><p><strong><code>template</code>render</strong></p>\n<ul>\n<li><strong>compileToFunctions</strong><ul>\n<li><strong>templateast<code>$createElement</code>VDOM<code>$createElement</code>VNode</strong></li>\n</ul>\n</li>\n<li><strong>VueJSX</strong></li>\n</ul>\n</li>\n<li><p>mount</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// public mount method</span></span><br><span class=\"line\"><span class=\"title class_\">Vue</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">$mount</span> = <span class=\"keyword\">function</span> (<span class=\"params\"></span></span><br><span class=\"line\"><span class=\"params\">  el,</span></span><br><span class=\"line\"><span class=\"params\">  hydrating</span></span><br><span class=\"line\"><span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  el = el &amp;&amp; inBrowser ? <span class=\"title function_\">query</span>(el) : <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"title function_\">mountComponent</span>(<span class=\"variable language_\">this</span>, el, hydrating)</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>mount$mount</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"mountComponent\"><a href=\"#mountComponent\" class=\"headerlink\" title=\"mountComponent\"></a>mountComponent</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">mountComponent</span> (</span><br><span class=\"line\">  vm,</span><br><span class=\"line\">  el,</span><br><span class=\"line\">  hydrating</span><br><span class=\"line\">) &#123;</span><br><span class=\"line\">  vm.<span class=\"property\">$el</span> = el;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!vm.<span class=\"property\">$options</span>.<span class=\"property\">render</span>) &#123;</span><br><span class=\"line\">    vm.<span class=\"property\">$options</span>.<span class=\"property\">render</span> = createEmptyVNode;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span>) &#123;</span><br><span class=\"line\">      <span class=\"comment\">/* istanbul ignore if */</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> ((vm.<span class=\"property\">$options</span>.<span class=\"property\">template</span> &amp;&amp; vm.<span class=\"property\">$options</span>.<span class=\"property\">template</span>.<span class=\"title function_\">charAt</span>(<span class=\"number\">0</span>) !== <span class=\"string\">&#x27;#&#x27;</span>) ||</span><br><span class=\"line\">        vm.<span class=\"property\">$options</span>.<span class=\"property\">el</span> || el) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">          <span class=\"string\">&#x27;You are using the runtime-only build of Vue where the template &#x27;</span> +</span><br><span class=\"line\">          <span class=\"string\">&#x27;compiler is not available. Either pre-compile the templates into &#x27;</span> +</span><br><span class=\"line\">          <span class=\"string\">&#x27;render functions, or use the compiler-included build.&#x27;</span>,</span><br><span class=\"line\">          vm</span><br><span class=\"line\">        );</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">          <span class=\"string\">&#x27;Failed to mount component: template or render function not defined.&#x27;</span>,</span><br><span class=\"line\">          vm</span><br><span class=\"line\">        );</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"title function_\">callHook</span>(vm, <span class=\"string\">&#x27;beforeMount&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">var</span> updateComponent;</span><br><span class=\"line\">  <span class=\"comment\">/* istanbul ignore if */</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span> &amp;&amp; config.<span class=\"property\">performance</span> &amp;&amp; mark) &#123;</span><br><span class=\"line\">    updateComponent = <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> name = vm.<span class=\"property\">_name</span>;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> id = vm.<span class=\"property\">_uid</span>;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> startTag = <span class=\"string\">&quot;vue-perf-start:&quot;</span> + id;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> endTag = <span class=\"string\">&quot;vue-perf-end:&quot;</span> + id;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"title function_\">mark</span>(startTag);</span><br><span class=\"line\">      <span class=\"keyword\">var</span> vnode = vm.<span class=\"title function_\">_render</span>();</span><br><span class=\"line\">      <span class=\"title function_\">mark</span>(endTag);</span><br><span class=\"line\">      <span class=\"title function_\">measure</span>((<span class=\"string\">&quot;vue &quot;</span> + name + <span class=\"string\">&quot; render&quot;</span>), startTag, endTag);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"title function_\">mark</span>(startTag);</span><br><span class=\"line\">      vm.<span class=\"title function_\">_update</span>(vnode, hydrating);</span><br><span class=\"line\">      <span class=\"title function_\">mark</span>(endTag);</span><br><span class=\"line\">      <span class=\"title function_\">measure</span>((<span class=\"string\">&quot;vue &quot;</span> + name + <span class=\"string\">&quot; patch&quot;</span>), startTag, endTag);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    updateComponent = <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">      vm.<span class=\"title function_\">_update</span>(vm.<span class=\"title function_\">_render</span>(), hydrating);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// we set this to vm._watcher inside the watcher&#x27;s constructor</span></span><br><span class=\"line\">  <span class=\"comment\">// since the watcher&#x27;s initial patch may call $forceUpdate (e.g. inside child</span></span><br><span class=\"line\">  <span class=\"comment\">// component&#x27;s mounted hook), which relies on vm._watcher being already defined</span></span><br><span class=\"line\">  <span class=\"keyword\">new</span> <span class=\"title class_\">Watcher</span>(vm, updateComponent, noop, &#123;</span><br><span class=\"line\">    <span class=\"attr\">before</span>: <span class=\"keyword\">function</span> <span class=\"title function_\">before</span> () &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (vm.<span class=\"property\">_isMounted</span> &amp;&amp; !vm.<span class=\"property\">_isDestroyed</span>) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">callHook</span>(vm, <span class=\"string\">&#x27;beforeUpdate&#x27;</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;, <span class=\"literal\">true</span> <span class=\"comment\">/* isRenderWatcher */</span>);</span><br><span class=\"line\">  hydrating = <span class=\"literal\">false</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// manually mounted instance, call mounted on self</span></span><br><span class=\"line\">  <span class=\"comment\">// mounted is called for render-created child components in its inserted hook</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (vm.<span class=\"property\">$vnode</span> == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    vm.<span class=\"property\">_isMounted</span> = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    <span class=\"title function_\">callHook</span>(vm, <span class=\"string\">&#x27;mounted&#x27;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> vm</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>optionrendertemplateJSX</li>\n<li><strong><code>beforeMounted</code></strong></li>\n<li><strong><code>updateComponent</code><code>vm._udpate(vm._render)</code></strong></li>\n<li><code>updateComponent</code><code>exprOrFn</code>watcher</li>\n<li><code>mounted</code></li>\n</ul>\n<h4 id=\"Watcher\"><a href=\"#Watcher\" class=\"headerlink\" title=\"Watcher\"></a>Watcher</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> <span class=\"title class_\">Watcher</span> = <span class=\"keyword\">function</span> <span class=\"title function_\">Watcher</span> (</span><br><span class=\"line\">  vm,</span><br><span class=\"line\">  expOrFn,</span><br><span class=\"line\">  cb,</span><br><span class=\"line\">  options,</span><br><span class=\"line\">  isRenderWatcher</span><br><span class=\"line\">) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">vm</span> = vm;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (isRenderWatcher) &#123;</span><br><span class=\"line\">    vm.<span class=\"property\">_watcher</span> = <span class=\"variable language_\">this</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  vm.<span class=\"property\">_watchers</span>.<span class=\"title function_\">push</span>(<span class=\"variable language_\">this</span>);</span><br><span class=\"line\">  <span class=\"comment\">// options</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (options) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">deep</span> = !!options.<span class=\"property\">deep</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">user</span> = !!options.<span class=\"property\">user</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">lazy</span> = !!options.<span class=\"property\">lazy</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">sync</span> = !!options.<span class=\"property\">sync</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">before</span> = options.<span class=\"property\">before</span>;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">deep</span> = <span class=\"variable language_\">this</span>.<span class=\"property\">user</span> = <span class=\"variable language_\">this</span>.<span class=\"property\">lazy</span> = <span class=\"variable language_\">this</span>.<span class=\"property\">sync</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">cb</span> = cb;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">id</span> = ++uid$<span class=\"number\">2</span>; <span class=\"comment\">// uid for batching</span></span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">active</span> = <span class=\"literal\">true</span>;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">dirty</span> = <span class=\"variable language_\">this</span>.<span class=\"property\">lazy</span>; <span class=\"comment\">// for lazy watchers</span></span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">deps</span> = [];</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">newDeps</span> = [];</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">depIds</span> = <span class=\"keyword\">new</span> <span class=\"title function_\">_Set</span>();</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">newDepIds</span> = <span class=\"keyword\">new</span> <span class=\"title function_\">_Set</span>();</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">expression</span> = process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span></span><br><span class=\"line\">    ? expOrFn.<span class=\"title function_\">toString</span>()</span><br><span class=\"line\">    : <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">  <span class=\"comment\">// parse expression for getter</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> expOrFn === <span class=\"string\">&#x27;function&#x27;</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">getter</span> = expOrFn;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">getter</span> = <span class=\"title function_\">parsePath</span>(expOrFn);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"variable language_\">this</span>.<span class=\"property\">getter</span>) &#123;</span><br><span class=\"line\">      <span class=\"variable language_\">this</span>.<span class=\"property\">getter</span> = noop;</span><br><span class=\"line\">      process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span> &amp;&amp; <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">        <span class=\"string\">&quot;Failed watching path: \\&quot;&quot;</span> + expOrFn + <span class=\"string\">&quot;\\&quot; &quot;</span> +</span><br><span class=\"line\">        <span class=\"string\">&#x27;Watcher only accepts simple dot-delimited paths. &#x27;</span> +</span><br><span class=\"line\">        <span class=\"string\">&#x27;For full control, use a function instead.&#x27;</span>,</span><br><span class=\"line\">        vm</span><br><span class=\"line\">      );</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">value</span> = <span class=\"variable language_\">this</span>.<span class=\"property\">lazy</span></span><br><span class=\"line\">    ? <span class=\"literal\">undefined</span></span><br><span class=\"line\">    : <span class=\"variable language_\">this</span>.<span class=\"title function_\">get</span>();</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>Watcher<code>get</code></p>\n</li>\n<li><p><strong><code>get</code>Watchergetter</strong></p>\n<ul>\n<li><p><code>mountComponent</code><code>updateComponent</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">updateComponent = <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    vm.<span class=\"title function_\">_update</span>(vm.<span class=\"title function_\">_render</span>(), hydrating);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n<h4 id=\"render\"><a href=\"#render\" class=\"headerlink\" title=\"_render\"></a>_render</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title class_\">Vue</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">_render</span> = <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> vm = <span class=\"variable language_\">this</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> ref = vm.<span class=\"property\">$options</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> render = ref.<span class=\"property\">render</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> _parentVnode = ref.<span class=\"property\">_parentVnode</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (_parentVnode) &#123;</span><br><span class=\"line\">        vm.<span class=\"property\">$scopedSlots</span> = <span class=\"title function_\">normalizeScopedSlots</span>(</span><br><span class=\"line\">            _parentVnode.<span class=\"property\">data</span>.<span class=\"property\">scopedSlots</span>,</span><br><span class=\"line\">            vm.<span class=\"property\">$slots</span>,</span><br><span class=\"line\">            vm.<span class=\"property\">$scopedSlots</span></span><br><span class=\"line\">        );</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// set parent vnode. this allows render functions to have access</span></span><br><span class=\"line\">    <span class=\"comment\">// to the data on the placeholder node.</span></span><br><span class=\"line\">    vm.<span class=\"property\">$vnode</span> = _parentVnode;</span><br><span class=\"line\">    <span class=\"comment\">// render self</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> vnode;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// There&#x27;s no need to maintain a stack because all render fns are called</span></span><br><span class=\"line\">        <span class=\"comment\">// separately from one another. Nested component&#x27;s render fns are called</span></span><br><span class=\"line\">        <span class=\"comment\">// when parent component is patched.</span></span><br><span class=\"line\">        currentRenderingInstance = vm;</span><br><span class=\"line\">        vnode = render.<span class=\"title function_\">call</span>(vm.<span class=\"property\">_renderProxy</span>, vm.<span class=\"property\">$createElement</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">handleError</span>(e, vm, <span class=\"string\">&quot;render&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">// return error render result,</span></span><br><span class=\"line\">        <span class=\"comment\">// or previous vnode to prevent render error causing blank component</span></span><br><span class=\"line\">        <span class=\"comment\">/* istanbul ignore else */</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span> &amp;&amp; vm.<span class=\"property\">$options</span>.<span class=\"property\">renderError</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                vnode = vm.<span class=\"property\">$options</span>.<span class=\"property\">renderError</span>.<span class=\"title function_\">call</span>(vm.<span class=\"property\">_renderProxy</span>, vm.<span class=\"property\">$createElement</span>, e);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">                <span class=\"title function_\">handleError</span>(e, vm, <span class=\"string\">&quot;renderError&quot;</span>);</span><br><span class=\"line\">                vnode = vm.<span class=\"property\">_vnode</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            vnode = vm.<span class=\"property\">_vnode</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">        currentRenderingInstance = <span class=\"literal\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// if the returned array contains only a single node, allow it</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"title class_\">Array</span>.<span class=\"title function_\">isArray</span>(vnode) &amp;&amp; vnode.<span class=\"property\">length</span> === <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        vnode = vnode[<span class=\"number\">0</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// return empty vnode in case the render function errored out</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!(vnode <span class=\"keyword\">instanceof</span> <span class=\"title class_\">VNode</span>)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span> &amp;&amp; <span class=\"title class_\">Array</span>.<span class=\"title function_\">isArray</span>(vnode)) &#123;</span><br><span class=\"line\">            <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">                <span class=\"string\">&#x27;Multiple root nodes returned from render function. Render function &#x27;</span> +</span><br><span class=\"line\">                <span class=\"string\">&#x27;should return a single root node.&#x27;</span>,</span><br><span class=\"line\">                vm</span><br><span class=\"line\">            );</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        vnode = <span class=\"title function_\">createEmptyVNode</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// set parent</span></span><br><span class=\"line\">    vnode.<span class=\"property\">parent</span> = _parentVnode;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> vnode</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong><code>_render</code><code>$createElement</code>VNode</strong></li>\n</ul>\n<h4 id=\"update\"><a href=\"#update\" class=\"headerlink\" title=\"_update\"></a>_update</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title class_\">Vue</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">_update</span> = <span class=\"keyword\">function</span> (<span class=\"params\">vnode, hydrating</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> vm = <span class=\"variable language_\">this</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> prevEl = vm.<span class=\"property\">$el</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> prevVnode = vm.<span class=\"property\">_vnode</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> restoreActiveInstance = <span class=\"title function_\">setActiveInstance</span>(vm);</span><br><span class=\"line\">  vm.<span class=\"property\">_vnode</span> = vnode;</span><br><span class=\"line\">  <span class=\"comment\">// Vue.prototype.__patch__ is injected in entry points</span></span><br><span class=\"line\">  <span class=\"comment\">// based on the rendering backend used.</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!prevVnode) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// initial render</span></span><br><span class=\"line\">    vm.<span class=\"property\">$el</span> = vm.<span class=\"title function_\">__patch__</span>(vm.<span class=\"property\">$el</span>, vnode, hydrating, <span class=\"literal\">false</span> <span class=\"comment\">/* removeOnly */</span>);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// updates</span></span><br><span class=\"line\">    vm.<span class=\"property\">$el</span> = vm.<span class=\"title function_\">__patch__</span>(prevVnode, vnode);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"title function_\">restoreActiveInstance</span>();</span><br><span class=\"line\">  <span class=\"comment\">// update __vue__ reference</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (prevEl) &#123;</span><br><span class=\"line\">    prevEl.<span class=\"property\">__vue__</span> = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (vm.<span class=\"property\">$el</span>) &#123;</span><br><span class=\"line\">    vm.<span class=\"property\">$el</span>.<span class=\"property\">__vue__</span> = vm;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// if parent is an HOC, update its $el as well</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (vm.<span class=\"property\">$vnode</span> &amp;&amp; vm.<span class=\"property\">$parent</span> &amp;&amp; vm.<span class=\"property\">$vnode</span> === vm.<span class=\"property\">$parent</span>.<span class=\"property\">_vnode</span>) &#123;</span><br><span class=\"line\">    vm.<span class=\"property\">$parent</span>.<span class=\"property\">$el</span> = vm.<span class=\"property\">$el</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// updated hook is called by the scheduler to ensure that children are</span></span><br><span class=\"line\">  <span class=\"comment\">// updated in a parent&#x27;s updated hook.</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong><code>_update</code>patchVNodeDOM</strong></li>\n</ul>\n<h4 id=\"patch\"><a href=\"#patch\" class=\"headerlink\" title=\"patch\"></a>patch</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">patch</span> (oldVnode, vnode, hydrating, removeOnly) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"title function_\">isUndef</span>(vnode)) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// VNodeVNodeVNode</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"title function_\">isDef</span>(oldVnode)) &#123; <span class=\"title function_\">invokeDestroyHook</span>(oldVnode); &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> isInitialPatch = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> insertedVnodeQueue = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"title function_\">isUndef</span>(oldVnode)) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// VNode</span></span><br><span class=\"line\">        <span class=\"comment\">// empty mount (likely as component), create new root element</span></span><br><span class=\"line\">        isInitialPatch = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"title function_\">createElm</span>(vnode, insertedVnodeQueue);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> isRealElement = <span class=\"title function_\">isDef</span>(oldVnode.<span class=\"property\">nodeType</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!isRealElement &amp;&amp; <span class=\"title function_\">sameVnode</span>(oldVnode, vnode)) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// patch existing root node</span></span><br><span class=\"line\">            <span class=\"title function_\">patchVnode</span>(oldVnode, vnode, insertedVnodeQueue, <span class=\"literal\">null</span>, <span class=\"literal\">null</span>, removeOnly);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (isRealElement) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// mounting to a real element</span></span><br><span class=\"line\">                <span class=\"comment\">// check if this is server-rendered content and if we can perform</span></span><br><span class=\"line\">                <span class=\"comment\">// a successful hydration.</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (oldVnode.<span class=\"property\">nodeType</span> === <span class=\"number\">1</span> &amp;&amp; oldVnode.<span class=\"title function_\">hasAttribute</span>(<span class=\"variable constant_\">SSR_ATTR</span>)) &#123;</span><br><span class=\"line\">                    oldVnode.<span class=\"title function_\">removeAttribute</span>(<span class=\"variable constant_\">SSR_ATTR</span>);</span><br><span class=\"line\">                    hydrating = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (<span class=\"title function_\">isTrue</span>(hydrating)) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (<span class=\"title function_\">hydrate</span>(oldVnode, vnode, insertedVnodeQueue)) &#123;</span><br><span class=\"line\">                        <span class=\"title function_\">invokeInsertHook</span>(vnode, insertedVnodeQueue, <span class=\"literal\">true</span>);</span><br><span class=\"line\">                        <span class=\"keyword\">return</span> oldVnode</span><br><span class=\"line\">                    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span>) &#123;</span><br><span class=\"line\">                        <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">                            <span class=\"string\">&#x27;The client-side rendered virtual DOM tree is not matching &#x27;</span> +</span><br><span class=\"line\">                            <span class=\"string\">&#x27;server-rendered content. This is likely caused by incorrect &#x27;</span> +</span><br><span class=\"line\">                            <span class=\"string\">&#x27;HTML markup, for example nesting block-level elements inside &#x27;</span> +</span><br><span class=\"line\">                            <span class=\"string\">&#x27;&lt;p&gt;, or missing &lt;tbody&gt;. Bailing hydration and performing &#x27;</span> +</span><br><span class=\"line\">                            <span class=\"string\">&#x27;full client-side render.&#x27;</span></span><br><span class=\"line\">                        );</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"comment\">// either not server-rendered, or hydration failed.</span></span><br><span class=\"line\">                <span class=\"comment\">// create an empty node and replace it</span></span><br><span class=\"line\">                oldVnode = <span class=\"title function_\">emptyNodeAt</span>(oldVnode);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// replacing existing element</span></span><br><span class=\"line\">            <span class=\"keyword\">var</span> oldElm = oldVnode.<span class=\"property\">elm</span>;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> parentElm = nodeOps.<span class=\"title function_\">parentNode</span>(oldElm);</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// create new node</span></span><br><span class=\"line\">            <span class=\"title function_\">createElm</span>(</span><br><span class=\"line\">                vnode,</span><br><span class=\"line\">                insertedVnodeQueue,</span><br><span class=\"line\">                <span class=\"comment\">// extremely rare edge case: do not insert if old element is in a</span></span><br><span class=\"line\">                <span class=\"comment\">// leaving transition. Only happens when combining transition +</span></span><br><span class=\"line\">                <span class=\"comment\">// keep-alive + HOCs. (#4590)</span></span><br><span class=\"line\">                oldElm.<span class=\"property\">_leaveCb</span> ? <span class=\"literal\">null</span> : parentElm,</span><br><span class=\"line\">                nodeOps.<span class=\"title function_\">nextSibling</span>(oldElm)</span><br><span class=\"line\">            );</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// update parent placeholder node element, recursively</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"title function_\">isDef</span>(vnode.<span class=\"property\">parent</span>)) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">var</span> ancestor = vnode.<span class=\"property\">parent</span>;</span><br><span class=\"line\">                <span class=\"keyword\">var</span> patchable = <span class=\"title function_\">isPatchable</span>(vnode);</span><br><span class=\"line\">                <span class=\"keyword\">while</span> (ancestor) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; cbs.<span class=\"property\">destroy</span>.<span class=\"property\">length</span>; ++i) &#123;</span><br><span class=\"line\">                        cbs.<span class=\"property\">destroy</span>[i](ancestor);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    ancestor.<span class=\"property\">elm</span> = vnode.<span class=\"property\">elm</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (patchable) &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i$<span class=\"number\">1</span> = <span class=\"number\">0</span>; i$<span class=\"number\">1</span> &lt; cbs.<span class=\"property\">create</span>.<span class=\"property\">length</span>; ++i$<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">                            cbs.<span class=\"property\">create</span>[i$<span class=\"number\">1</span>](emptyNode, ancestor);</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                        <span class=\"comment\">// #6513</span></span><br><span class=\"line\">                        <span class=\"comment\">// invoke insert hooks that may have been merged by create hooks.</span></span><br><span class=\"line\">                        <span class=\"comment\">// e.g. for directives that uses the &quot;inserted&quot; hook.</span></span><br><span class=\"line\">                        <span class=\"keyword\">var</span> insert = ancestor.<span class=\"property\">data</span>.<span class=\"property\">hook</span>.<span class=\"property\">insert</span>;</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (insert.<span class=\"property\">merged</span>) &#123;</span><br><span class=\"line\">                            <span class=\"comment\">// start at index 1 to avoid re-invoking component mounted hook</span></span><br><span class=\"line\">                            <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i$<span class=\"number\">2</span> = <span class=\"number\">1</span>; i$<span class=\"number\">2</span> &lt; insert.<span class=\"property\">fns</span>.<span class=\"property\">length</span>; i$<span class=\"number\">2</span>++) &#123;</span><br><span class=\"line\">                                insert.<span class=\"property\">fns</span>[i$<span class=\"number\">2</span>]();</span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                        <span class=\"title function_\">registerRef</span>(ancestor);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    ancestor = ancestor.<span class=\"property\">parent</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// destroy old node</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"title function_\">isDef</span>(parentElm)) &#123;</span><br><span class=\"line\">                <span class=\"title function_\">removeVnodes</span>([oldVnode], <span class=\"number\">0</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"title function_\">isDef</span>(oldVnode.<span class=\"property\">tag</span>)) &#123;</span><br><span class=\"line\">                <span class=\"title function_\">invokeDestroyHook</span>(oldVnode);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title function_\">invokeInsertHook</span>(vnode, insertedVnodeQueue, isInitialPatch);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> vnode.<span class=\"property\">elm</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p><strong><code>patch</code>DOM</strong></p>\n<ul>\n<li><strong><code>patchVnode</code>DOMDIFF</strong></li>\n</ul>\n</li>\n<li><p><strong><code>createElm</code>VNodeDOMDOM</strong></p>\n<ul>\n<li><strong>oldDOM</strong></li>\n</ul>\n</li>\n</ul>\n<h4 id=\"createElm\"><a href=\"#createElm\" class=\"headerlink\" title=\"createElm\"></a>createElm</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">createElm</span> (</span><br><span class=\"line\">vnode,</span><br><span class=\"line\"> insertedVnodeQueue,</span><br><span class=\"line\"> parentElm,</span><br><span class=\"line\"> refElm,</span><br><span class=\"line\"> nested,</span><br><span class=\"line\"> ownerArray,</span><br><span class=\"line\"> index</span><br><span class=\"line\">) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"title function_\">isDef</span>(vnode.<span class=\"property\">elm</span>) &amp;&amp; <span class=\"title function_\">isDef</span>(ownerArray)) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// This vnode was used in a previous render!</span></span><br><span class=\"line\">        <span class=\"comment\">// now it&#x27;s used as a new node, overwriting its elm would cause</span></span><br><span class=\"line\">        <span class=\"comment\">// potential patch errors down the road when it&#x27;s used as an insertion</span></span><br><span class=\"line\">        <span class=\"comment\">// reference node. Instead, we clone the node on-demand before creating</span></span><br><span class=\"line\">        <span class=\"comment\">// associated DOM element for it.</span></span><br><span class=\"line\">        vnode = ownerArray[index] = <span class=\"title function_\">cloneVNode</span>(vnode);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    vnode.<span class=\"property\">isRootInsert</span> = !nested; <span class=\"comment\">// for transition enter check</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"title function_\">createComponent</span>(vnode, insertedVnodeQueue, parentElm, refElm)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> data = vnode.<span class=\"property\">data</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> children = vnode.<span class=\"property\">children</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> tag = vnode.<span class=\"property\">tag</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"title function_\">isDef</span>(tag)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (data &amp;&amp; data.<span class=\"property\">pre</span>) &#123;</span><br><span class=\"line\">                creatingElmInVPre++;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"title function_\">isUnknownElement$$1</span>(vnode, creatingElmInVPre)) &#123;</span><br><span class=\"line\">                <span class=\"title function_\">warn</span>(</span><br><span class=\"line\">                    <span class=\"string\">&#x27;Unknown custom element: &lt;&#x27;</span> + tag + <span class=\"string\">&#x27;&gt; - did you &#x27;</span> +</span><br><span class=\"line\">                    <span class=\"string\">&#x27;register the component correctly? For recursive components, &#x27;</span> +</span><br><span class=\"line\">                    <span class=\"string\">&#x27;make sure to provide the &quot;name&quot; option.&#x27;</span>,</span><br><span class=\"line\">                    vnode.<span class=\"property\">context</span></span><br><span class=\"line\">                );</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        vnode.<span class=\"property\">elm</span> = vnode.<span class=\"property\">ns</span></span><br><span class=\"line\">            ? nodeOps.<span class=\"title function_\">createElementNS</span>(vnode.<span class=\"property\">ns</span>, tag)</span><br><span class=\"line\">        : nodeOps.<span class=\"title function_\">createElement</span>(tag, vnode);</span><br><span class=\"line\">        <span class=\"title function_\">setScope</span>(vnode);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/* istanbul ignore if */</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"title function_\">createChildren</span>(vnode, children, insertedVnodeQueue);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"title function_\">isDef</span>(data)) &#123;</span><br><span class=\"line\">                <span class=\"title function_\">invokeCreateHooks</span>(vnode, insertedVnodeQueue);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"title function_\">insert</span>(parentElm, vnode.<span class=\"property\">elm</span>, refElm);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span> &amp;&amp; data &amp;&amp; data.<span class=\"property\">pre</span>) &#123;</span><br><span class=\"line\">            creatingElmInVPre--;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"title function_\">isTrue</span>(vnode.<span class=\"property\">isComment</span>)) &#123;</span><br><span class=\"line\">        vnode.<span class=\"property\">elm</span> = nodeOps.<span class=\"title function_\">createComment</span>(vnode.<span class=\"property\">text</span>);</span><br><span class=\"line\">        <span class=\"title function_\">insert</span>(parentElm, vnode.<span class=\"property\">elm</span>, refElm);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        vnode.<span class=\"property\">elm</span> = nodeOps.<span class=\"title function_\">createTextNode</span>(vnode.<span class=\"property\">text</span>);</span><br><span class=\"line\">        <span class=\"title function_\">insert</span>(parentElm, vnode.<span class=\"property\">elm</span>, refElm);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p><strong><code>createComponent</code></strong></p>\n</li>\n<li><p><strong>HTML<code>nodeOps.createElement</code></strong></p>\n<ul>\n<li><p><strong><code>nodeOps.createElement</code>DOM</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">createElement$1</span> (tagName, vnode) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> elm = <span class=\"variable language_\">document</span>.<span class=\"title function_\">createElement</span>(tagName);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (tagName !== <span class=\"string\">&#x27;select&#x27;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> elm</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// false or null will remove the attribute but undefined will not</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (vnode.<span class=\"property\">data</span> &amp;&amp; vnode.<span class=\"property\">data</span>.<span class=\"property\">attrs</span> &amp;&amp; vnode.<span class=\"property\">data</span>.<span class=\"property\">attrs</span>.<span class=\"property\">multiple</span> !== <span class=\"literal\">undefined</span>) &#123;</span><br><span class=\"line\">    elm.<span class=\"title function_\">setAttribute</span>(<span class=\"string\">&#x27;multiple&#x27;</span>, <span class=\"string\">&#x27;multiple&#x27;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> elm</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p><strong><code>createChildren</code></strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">createChildren</span> (vnode, children, insertedVnodeQueue) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"title class_\">Array</span>.<span class=\"title function_\">isArray</span>(children)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> !== <span class=\"string\">&#x27;production&#x27;</span>) &#123;</span><br><span class=\"line\">            <span class=\"title function_\">checkDuplicateKeys</span>(children);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; children.<span class=\"property\">length</span>; ++i) &#123;</span><br><span class=\"line\">            <span class=\"title function_\">createElm</span>(children[i], insertedVnodeQueue, vnode.<span class=\"property\">elm</span>, <span class=\"literal\">null</span>, <span class=\"literal\">true</span>, children, i);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"title function_\">isPrimitive</span>(vnode.<span class=\"property\">text</span>)) &#123;</span><br><span class=\"line\">        nodeOps.<span class=\"title function_\">appendChild</span>(vnode.<span class=\"property\">elm</span>, nodeOps.<span class=\"title function_\">createTextNode</span>(<span class=\"title class_\">String</span>(vnode.<span class=\"property\">text</span>)));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong><code>createElm</code>DOM</strong></li>\n</ul>\n</li>\n<li><p><strong>DOM</strong></p>\n</li>\n<li><p><strong><code>insert</code></strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">insert</span> (parent, elm, ref$$1) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"title function_\">isDef</span>(parent)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"title function_\">isDef</span>(ref$$1)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (nodeOps.<span class=\"title function_\">parentNode</span>(ref$$1) === parent) &#123;</span><br><span class=\"line\">                nodeOps.<span class=\"title function_\">insertBefore</span>(parent, elm, ref$$1);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            nodeOps.<span class=\"title function_\">appendChild</span>(parent, elm);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>Vue</strong></li>\n</ul>\n</li>\n</ul>\n<h4 id=\"createComponent\"><a href=\"#createComponent\" class=\"headerlink\" title=\"createComponent\"></a>createComponent</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">createComponent</span> (vnode, insertedVnodeQueue, parentElm, refElm) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> i = vnode.<span class=\"property\">data</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"title function_\">isDef</span>(i)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> isReactivated = <span class=\"title function_\">isDef</span>(vnode.<span class=\"property\">componentInstance</span>) &amp;&amp; i.<span class=\"property\">keepAlive</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"title function_\">isDef</span>(i = i.<span class=\"property\">hook</span>) &amp;&amp; <span class=\"title function_\">isDef</span>(i = i.<span class=\"property\">init</span>)) &#123;</span><br><span class=\"line\">            <span class=\"title function_\">i</span>(vnode, <span class=\"literal\">false</span> <span class=\"comment\">/* hydrating */</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// after calling the init hook, if the vnode is a child component</span></span><br><span class=\"line\">        <span class=\"comment\">// it should&#x27;ve created a child instance and mounted it. the child</span></span><br><span class=\"line\">        <span class=\"comment\">// component also has set the placeholder vnode&#x27;s elm.</span></span><br><span class=\"line\">        <span class=\"comment\">// in that case we can just return the element and be done.</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"title function_\">isDef</span>(vnode.<span class=\"property\">componentInstance</span>)) &#123;</span><br><span class=\"line\">            <span class=\"title function_\">initComponent</span>(vnode, insertedVnodeQueue);</span><br><span class=\"line\">            <span class=\"title function_\">insert</span>(parentElm, vnode.<span class=\"property\">elm</span>, refElm);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"title function_\">isTrue</span>(isReactivated)) &#123;</span><br><span class=\"line\">                <span class=\"title function_\">reactivateComponent</span>(vnode, insertedVnodeQueue, parentElm, refElm);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>VNodedatahook<code>render</code>componentOptions<code>propstaglistenersCtor</code>CtorVueComponenttag</p>\n</li>\n<li><p><code>init</code>hook</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">init</span> (vnode, hydrating) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (</span><br><span class=\"line\">        vnode.<span class=\"property\">componentInstance</span> &amp;&amp;</span><br><span class=\"line\">        !vnode.<span class=\"property\">componentInstance</span>.<span class=\"property\">_isDestroyed</span> &amp;&amp;</span><br><span class=\"line\">        vnode.<span class=\"property\">data</span>.<span class=\"property\">keepAlive</span></span><br><span class=\"line\">    ) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// kept-alive components, treat as a patch</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> mountedNode = vnode; <span class=\"comment\">// work around flow</span></span><br><span class=\"line\">        componentVNodeHooks.<span class=\"title function_\">prepatch</span>(mountedNode, mountedNode);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> child = vnode.<span class=\"property\">componentInstance</span> = <span class=\"title function_\">createComponentInstanceForVnode</span>(</span><br><span class=\"line\">            vnode,</span><br><span class=\"line\">            activeInstance</span><br><span class=\"line\">        );</span><br><span class=\"line\">        child.$mount(hydrating ? vnode.<span class=\"property\">elm</span> : <span class=\"literal\">undefined</span>, hydrating);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong><code>createComponentInstanceForVnode</code>VueComponentVue.__init</strong></li>\n<li><strong><code>el</code><code>init</code><code>VueComponent</code><code>init</code>$mount</strong><ul>\n<li><code>init</code></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"invokeInsertHook\"><a href=\"#invokeInsertHook\" class=\"headerlink\" title=\"invokeInsertHook\"></a>invokeInsertHook</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">invokeInsertHook</span> (vnode, queue, initial) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// delay insert hooks for component root nodes, invoke them after the</span></span><br><span class=\"line\">    <span class=\"comment\">// element is really inserted</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"title function_\">isTrue</span>(initial) &amp;&amp; <span class=\"title function_\">isDef</span>(vnode.<span class=\"property\">parent</span>)) &#123;</span><br><span class=\"line\">        vnode.<span class=\"property\">parent</span>.<span class=\"property\">data</span>.<span class=\"property\">pendingInsert</span> = queue;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; queue.<span class=\"property\">length</span>; ++i) &#123;</span><br><span class=\"line\">            queue[i].<span class=\"property\">data</span>.<span class=\"property\">hook</span>.<span class=\"title function_\">insert</span>(queue[i]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong><code>insert</code>hook<code>patch</code></strong><ul>\n<li><strong><code>mounted</code></strong></li>\n<li><strong><code>v-model</code>DOM</strong></li>\n</ul>\n</li>\n</ul>\n"},{"title":"RustStudyBasic","date":"2022-02-21T23:16:23.000Z","description":"Rust","cover":"https://pic1.zhimg.com/v2-31abd59d97446ec29a8aee9a9284761f_1440w.jpg?source=172ae18b","_content":"## Rust\n\n### \n\n- Rust~~~~ 2.9 Rust\n  - [Rust ](https://kaisery.github.io/trpl-zh-cn/title-page.html) + \n- 2.22 19****\n  - **`JavaScript`**JSJS\n\n## hello_world\n\n### \n\n- Rust`_``hello_world.rs`JS`helloWorld.js`\n\n### \n\n- JSchromeV8RustCargoNodenpm\n\n### \n\n- RustJSRust\n\n## \n\n- Rust\n  - \n  - \n  - class\n  - \n  - Rust\n  - \n  - \n  - ...\n\n- Rust**`ownership`**\n\n### \n\n- RustJSJSRust\n- Rust\n- \n\n> - Rust  *****owner*\n> - \n> - \n\n### \n\n- C++keyword`&`\n- Rust\n- \n\n> - **** **** \n> - \n\n- RustC**`* const ptr`**\n\n### \n\n- Rust\n\n## traitlife_cycle\n\n### trait\n\n- JavaScript`class`\n- `struct``trait``trait``struct`\n- `trait`Rust`trait``println!`Rust**`std::fmt::Display`**Stringi8-128u8-128Vec\n\n### life_cycle\n\n- RustNULLunsafeRustRust\n- `fn test<'a>(str1:&'a str)->&'a str`\n\n## \n\n- C`free(p);`\n- Ckeyword`*`Rust**`trait`**Rust**`trait`**\n  - C\n\n- `RC<>`JSRust`RefCell<>`\n\n## \n\n- JS****\n- Rust`trait`\n- RustJSRust\n","source":"_posts/RustStudyBasic.md","raw":"---\ntitle: RustStudyBasic\ndate: 2022-02-22 07:16:23\ntag:\n - Rust\n - basic\ncategories:\n - Rust\ndescription: Rust\ncover: https://pic1.zhimg.com/v2-31abd59d97446ec29a8aee9a9284761f_1440w.jpg?source=172ae18b\n\n---\n## Rust\n\n### \n\n- Rust~~~~ 2.9 Rust\n  - [Rust ](https://kaisery.github.io/trpl-zh-cn/title-page.html) + \n- 2.22 19****\n  - **`JavaScript`**JSJS\n\n## hello_world\n\n### \n\n- Rust`_``hello_world.rs`JS`helloWorld.js`\n\n### \n\n- JSchromeV8RustCargoNodenpm\n\n### \n\n- RustJSRust\n\n## \n\n- Rust\n  - \n  - \n  - class\n  - \n  - Rust\n  - \n  - \n  - ...\n\n- Rust**`ownership`**\n\n### \n\n- RustJSJSRust\n- Rust\n- \n\n> - Rust  *****owner*\n> - \n> - \n\n### \n\n- C++keyword`&`\n- Rust\n- \n\n> - **** **** \n> - \n\n- RustC**`* const ptr`**\n\n### \n\n- Rust\n\n## traitlife_cycle\n\n### trait\n\n- JavaScript`class`\n- `struct``trait``trait``struct`\n- `trait`Rust`trait``println!`Rust**`std::fmt::Display`**Stringi8-128u8-128Vec\n\n### life_cycle\n\n- RustNULLunsafeRustRust\n- `fn test<'a>(str1:&'a str)->&'a str`\n\n## \n\n- C`free(p);`\n- Ckeyword`*`Rust**`trait`**Rust**`trait`**\n  - C\n\n- `RC<>`JSRust`RefCell<>`\n\n## \n\n- JS****\n- Rust`trait`\n- RustJSRust\n","slug":"RustStudyBasic","published":1,"updated":"2022-04-11T08:27:50.740Z","_id":"ckzxsx2f800006lo3hr4qamhe","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"Rust\"><a href=\"#Rust\" class=\"headerlink\" title=\"Rust\"></a>Rust</h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>Rust<del></del> 2.9 Rust<ul>\n<li><a href=\"https://kaisery.github.io/trpl-zh-cn/title-page.html\">Rust </a> + </li>\n</ul>\n</li>\n<li>2.22 19<strong></strong><ul>\n<li>**<code>JavaScript</code>**JSJS</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"hello-world\"><a href=\"#hello-world\" class=\"headerlink\" title=\"hello_world\"></a>hello_world</h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>Rust<code>_</code><code>hello_world.rs</code>JS<code>helloWorld.js</code></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>JSchromeV8RustCargoNodenpm</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>RustJSRust</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><p>Rust</p>\n<ul>\n<li></li>\n<li></li>\n<li>class</li>\n<li></li>\n<li>Rust</li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li><p>Rust**<code>ownership</code>**</p>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>RustJSJSRust</li>\n<li>Rust</li>\n<li></li>\n</ul>\n<blockquote>\n<ul>\n<li>Rust  <strong></strong><em>owner</em></li>\n<li></li>\n<li></li>\n</ul>\n</blockquote>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>C++keyword<code>&amp;</code></li>\n<li>Rust</li>\n<li></li>\n</ul>\n<blockquote>\n<ul>\n<li><strong></strong> <strong></strong> </li>\n<li></li>\n</ul>\n</blockquote>\n<ul>\n<li>RustC**<code>* const ptr</code>**</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>Rust</li>\n</ul>\n<h2 id=\"traitlife-cycle\"><a href=\"#traitlife-cycle\" class=\"headerlink\" title=\"traitlife_cycle\"></a>traitlife_cycle</h2><h3 id=\"trait\"><a href=\"#trait\" class=\"headerlink\" title=\"trait\"></a>trait</h3><ul>\n<li>JavaScript<code>class</code></li>\n<li><code>struct</code><code>trait</code><code>trait</code><code>struct</code></li>\n<li><code>trait</code>Rust<code>trait</code><code>println!</code>Rust**<code>std::fmt::Display</code>**Stringi8-128u8-128Vec</li>\n</ul>\n<h3 id=\"life-cycle\"><a href=\"#life-cycle\" class=\"headerlink\" title=\"life_cycle\"></a>life_cycle</h3><ul>\n<li>RustNULLunsafeRustRust</li>\n<li><code>fn test&lt;&#39;a&gt;(str1:&amp;&#39;a str)-&gt;&amp;&#39;a str</code></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><p>C<code>free(p);</code></p>\n</li>\n<li><p>Ckeyword<code>*</code>Rust**<code>trait</code><strong>Rust</strong><code>trait</code>**</p>\n<ul>\n<li>C</li>\n</ul>\n</li>\n<li><p><code>RC&lt;&gt;</code>JSRust<code>RefCell&lt;&gt;</code></p>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>JS<strong></strong></li>\n<li>Rust<code>trait</code></li>\n<li>RustJSRust</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Rust\"><a href=\"#Rust\" class=\"headerlink\" title=\"Rust\"></a>Rust</h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>Rust<del></del> 2.9 Rust<ul>\n<li><a href=\"https://kaisery.github.io/trpl-zh-cn/title-page.html\">Rust </a> + </li>\n</ul>\n</li>\n<li>2.22 19<strong></strong><ul>\n<li>**<code>JavaScript</code>**JSJS</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"hello-world\"><a href=\"#hello-world\" class=\"headerlink\" title=\"hello_world\"></a>hello_world</h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>Rust<code>_</code><code>hello_world.rs</code>JS<code>helloWorld.js</code></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>JSchromeV8RustCargoNodenpm</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>RustJSRust</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><p>Rust</p>\n<ul>\n<li></li>\n<li></li>\n<li>class</li>\n<li></li>\n<li>Rust</li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li><p>Rust**<code>ownership</code>**</p>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>RustJSJSRust</li>\n<li>Rust</li>\n<li></li>\n</ul>\n<blockquote>\n<ul>\n<li>Rust  <strong></strong><em>owner</em></li>\n<li></li>\n<li></li>\n</ul>\n</blockquote>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>C++keyword<code>&amp;</code></li>\n<li>Rust</li>\n<li></li>\n</ul>\n<blockquote>\n<ul>\n<li><strong></strong> <strong></strong> </li>\n<li></li>\n</ul>\n</blockquote>\n<ul>\n<li>RustC**<code>* const ptr</code>**</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>Rust</li>\n</ul>\n<h2 id=\"traitlife-cycle\"><a href=\"#traitlife-cycle\" class=\"headerlink\" title=\"traitlife_cycle\"></a>traitlife_cycle</h2><h3 id=\"trait\"><a href=\"#trait\" class=\"headerlink\" title=\"trait\"></a>trait</h3><ul>\n<li>JavaScript<code>class</code></li>\n<li><code>struct</code><code>trait</code><code>trait</code><code>struct</code></li>\n<li><code>trait</code>Rust<code>trait</code><code>println!</code>Rust**<code>std::fmt::Display</code>**Stringi8-128u8-128Vec</li>\n</ul>\n<h3 id=\"life-cycle\"><a href=\"#life-cycle\" class=\"headerlink\" title=\"life_cycle\"></a>life_cycle</h3><ul>\n<li>RustNULLunsafeRustRust</li>\n<li><code>fn test&lt;&#39;a&gt;(str1:&amp;&#39;a str)-&gt;&amp;&#39;a str</code></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><p>C<code>free(p);</code></p>\n</li>\n<li><p>Ckeyword<code>*</code>Rust**<code>trait</code><strong>Rust</strong><code>trait</code>**</p>\n<ul>\n<li>C</li>\n</ul>\n</li>\n<li><p><code>RC&lt;&gt;</code>JSRust<code>RefCell&lt;&gt;</code></p>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>JS<strong></strong></li>\n<li>Rust<code>trait</code></li>\n<li>RustJSRust</li>\n</ul>\n"},{"title":"ReactSourceDebug","date":"2022-03-20T23:52:01.000Z","description":"Reactdebug","top_image":"https://pic2.zhimg.com/v2-8c3223d9228013e069df6a302e81c38f_720w.png?source=d16d100","cover":"/img/cover_5.webp","_content":"## \n\n- React`17.0.2`\n- Debug Demo \n\n```typescript\nclass Test extends React.Component<any, { text: string }> {\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      text: \"hello\",\n    };\n  }\n  render() {\n    return (\n      <div>\n        <span>{this.state.text}</span>\n        <span>normal</span>\n        <button\n          onClick={() => {\n            debugger;\n            this.setState({ text: \"check\" });\n          }}\n        >\n          setState\n        </button>\n      </div>\n    );\n  }\n}\n\nReactDOM.render(<Test />, document.getElementById(\"root\"));\n```\n\n- DEMOReactWeb\n  - \n  - \n- [LamReact](https://www.zhihu.com/people/lam-14-21-74)\n- ****\n\n## \n\n### \n\n```typescript\nReactDOM.render(<Test />, document.getElementById(\"root\"));\n```\n\n- `<App />`\n\n### JSX\n\n- `webpack`JSX\n\n```typescript\nreact_dom__WEBPACK_IMPORTED_MODULE_1__.render( /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxDEV)(Test, {}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 52,\n  columnNumber: 17\n}, undefined), document.getElementById(\"root\"));\n```\n\n- JSX\n  - JSX\n  - JSX\n\n```typescript\n// DEMOTest\n{\n  $$typeof: Symbol(react.element),\n  type: class Test /* Test */,\n  key: null,\n  ref: null,\n  props: {\n  },\n  _owner: null,\n  _store: {\n  },\n}\n```\n\n### render\n\n- `root`React16`Fiber`\n\n```typescript\n// FiberRoot\nfunction createFiberRoot(containerInfo, tag, hydrate, hydrationCallbacks) {\n  var root = new FiberRootNode(containerInfo, tag, hydrate);\n  var uninitializedFiber = createHostRootFiber(tag);\n  root.current = uninitializedFiber;\n  uninitializedFiber.stateNode = root;\n  initializeUpdateQueue(uninitializedFiber);\n  return root;\n}\n```\n\n\n\n![3](3.png)\n\n#### Fiber\n\n- DebugFiber`JSX`DOMFiber`<App />`\n- ReactFiberFiberReactDOM\n- FiberDEMO\n\n![1](1.png)\n\n- **Fiber**rootspanbutton\n\n  - Fiber\n\n  ```typescript\n  interface Fiber {\n      return:FiberNode, //\n      sibiling:FiberNode, //\n      child:FiberNode, //\n  }\n  ```\n\n- FiberrootFiber**rootFiber**\n\n![2](2.png)\n\n#### \n\n- Reactroot\n\n```typescript\n// rootFiber\nfunction listenToAllSupportedEvents(rootContainerElement) {\n  {\n    if (rootContainerElement[listeningMarker]) {\n      return;\n    }\n    rootContainerElement[listeningMarker] = true;\n    allNativeEvents.forEach(function (domEventName) {\n      if (!nonDelegatedEvents.has(domEventName)) {\n        listenToNativeEvent(domEventName, false, rootContainerElement, null);\n      }\n\n      listenToNativeEvent(domEventName, true, rootContainerElement, null);\n    });\n  }\n}\n```\n\n- `allNativeEvents`ReactReact\n\n```typescript\nvar discreteEventPairsForSimpleEventPlugin = ['cancel', 'cancel', 'click', 'click', 'close', 'close',/*...*/];\n```\n\n- `root``root``dispatchEvent`****\n\n### updateContainer\n\n- Fiber\n  - `unbatchedUpdates`React...\n\n```typescript\nunbatchedUpdates(function () {\n    updateContainer(children, fiberRoot, parentComponent, callback);\n});\n```\n\n- React\n  - `updatequeue`\n  - `lane`\n\n### workLoopSync\n\n- Fiber****Fiber\n\n```typescript\nfunction workLoopSync() {\n    // Already timed out, so perform work without checking if we need to yield.\n    while (workInProgress !== null) {\n        performUnitOfWork(workInProgress);\n    }\n}\n```\n\n\n\n![4](4.png)\n\n### Fiber\n\n- `workLoopSync`**FiberrootFiber**\n  - `beginWork`\n  - `completeUnitOfWork`\n\n- Fiber\n  - **`beginWork`Fiber`reconcileChildren`FiberchildchildJSXFiberFiberFiber**\n  - **`completeUnitOfWork`FiberDOM**\n- `workLoopSync`**b`beginWork`b1`beginWork`**![5](5.png)\n\n- Fiber`workLoopSync`Fiber`root`\n\n### commitRoot\n\n- `commitRoot`FiberDOM\n\n```typescript\n// commitRootDOM\ndo {\n    {\n        invokeGuardedCallback(null, commitMutationEffects, null, root, renderPriorityLevel);\n        if (hasCaughtError()) {\n            if (!(nextEffect !== null)) {\n                {\n                    throw Error( \"Should be working on an effect.\" );\n                }\n            }\n            var _error = clearCaughtError();\n            captureCommitPhaseError(nextEffect, _error);\n            nextEffect = nextEffect.nextEffect;\n        }\n    }\n} while (nextEffect !== null);\n```\n\n- \n  - `invokeGuardedCallback(null, commitBeforeMutationEffects, null);`\n  - `invokeGuardedCallback(null, commitLayoutEffects, null, root, lanes);`\n\n![6](6.png)\n\n- DOM\n\n","source":"_posts/ReactSourceDebug.md","raw":"---\ntitle: ReactSourceDebug\ndate: 2022-03-21 07:52:01\ntags:\n - React\n - Javascript\n - source\ncategories:\n - React\ndescription: Reactdebug\ntop_image: https://pic2.zhimg.com/v2-8c3223d9228013e069df6a302e81c38f_720w.png?source=d16d100\ncover: /img/cover_5.webp\n\n---\n## \n\n- React`17.0.2`\n- Debug Demo \n\n```typescript\nclass Test extends React.Component<any, { text: string }> {\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      text: \"hello\",\n    };\n  }\n  render() {\n    return (\n      <div>\n        <span>{this.state.text}</span>\n        <span>normal</span>\n        <button\n          onClick={() => {\n            debugger;\n            this.setState({ text: \"check\" });\n          }}\n        >\n          setState\n        </button>\n      </div>\n    );\n  }\n}\n\nReactDOM.render(<Test />, document.getElementById(\"root\"));\n```\n\n- DEMOReactWeb\n  - \n  - \n- [LamReact](https://www.zhihu.com/people/lam-14-21-74)\n- ****\n\n## \n\n### \n\n```typescript\nReactDOM.render(<Test />, document.getElementById(\"root\"));\n```\n\n- `<App />`\n\n### JSX\n\n- `webpack`JSX\n\n```typescript\nreact_dom__WEBPACK_IMPORTED_MODULE_1__.render( /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxDEV)(Test, {}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 52,\n  columnNumber: 17\n}, undefined), document.getElementById(\"root\"));\n```\n\n- JSX\n  - JSX\n  - JSX\n\n```typescript\n// DEMOTest\n{\n  $$typeof: Symbol(react.element),\n  type: class Test /* Test */,\n  key: null,\n  ref: null,\n  props: {\n  },\n  _owner: null,\n  _store: {\n  },\n}\n```\n\n### render\n\n- `root`React16`Fiber`\n\n```typescript\n// FiberRoot\nfunction createFiberRoot(containerInfo, tag, hydrate, hydrationCallbacks) {\n  var root = new FiberRootNode(containerInfo, tag, hydrate);\n  var uninitializedFiber = createHostRootFiber(tag);\n  root.current = uninitializedFiber;\n  uninitializedFiber.stateNode = root;\n  initializeUpdateQueue(uninitializedFiber);\n  return root;\n}\n```\n\n\n\n![3](3.png)\n\n#### Fiber\n\n- DebugFiber`JSX`DOMFiber`<App />`\n- ReactFiberFiberReactDOM\n- FiberDEMO\n\n![1](1.png)\n\n- **Fiber**rootspanbutton\n\n  - Fiber\n\n  ```typescript\n  interface Fiber {\n      return:FiberNode, //\n      sibiling:FiberNode, //\n      child:FiberNode, //\n  }\n  ```\n\n- FiberrootFiber**rootFiber**\n\n![2](2.png)\n\n#### \n\n- Reactroot\n\n```typescript\n// rootFiber\nfunction listenToAllSupportedEvents(rootContainerElement) {\n  {\n    if (rootContainerElement[listeningMarker]) {\n      return;\n    }\n    rootContainerElement[listeningMarker] = true;\n    allNativeEvents.forEach(function (domEventName) {\n      if (!nonDelegatedEvents.has(domEventName)) {\n        listenToNativeEvent(domEventName, false, rootContainerElement, null);\n      }\n\n      listenToNativeEvent(domEventName, true, rootContainerElement, null);\n    });\n  }\n}\n```\n\n- `allNativeEvents`ReactReact\n\n```typescript\nvar discreteEventPairsForSimpleEventPlugin = ['cancel', 'cancel', 'click', 'click', 'close', 'close',/*...*/];\n```\n\n- `root``root``dispatchEvent`****\n\n### updateContainer\n\n- Fiber\n  - `unbatchedUpdates`React...\n\n```typescript\nunbatchedUpdates(function () {\n    updateContainer(children, fiberRoot, parentComponent, callback);\n});\n```\n\n- React\n  - `updatequeue`\n  - `lane`\n\n### workLoopSync\n\n- Fiber****Fiber\n\n```typescript\nfunction workLoopSync() {\n    // Already timed out, so perform work without checking if we need to yield.\n    while (workInProgress !== null) {\n        performUnitOfWork(workInProgress);\n    }\n}\n```\n\n\n\n![4](4.png)\n\n### Fiber\n\n- `workLoopSync`**FiberrootFiber**\n  - `beginWork`\n  - `completeUnitOfWork`\n\n- Fiber\n  - **`beginWork`Fiber`reconcileChildren`FiberchildchildJSXFiberFiberFiber**\n  - **`completeUnitOfWork`FiberDOM**\n- `workLoopSync`**b`beginWork`b1`beginWork`**![5](5.png)\n\n- Fiber`workLoopSync`Fiber`root`\n\n### commitRoot\n\n- `commitRoot`FiberDOM\n\n```typescript\n// commitRootDOM\ndo {\n    {\n        invokeGuardedCallback(null, commitMutationEffects, null, root, renderPriorityLevel);\n        if (hasCaughtError()) {\n            if (!(nextEffect !== null)) {\n                {\n                    throw Error( \"Should be working on an effect.\" );\n                }\n            }\n            var _error = clearCaughtError();\n            captureCommitPhaseError(nextEffect, _error);\n            nextEffect = nextEffect.nextEffect;\n        }\n    }\n} while (nextEffect !== null);\n```\n\n- \n  - `invokeGuardedCallback(null, commitBeforeMutationEffects, null);`\n  - `invokeGuardedCallback(null, commitLayoutEffects, null, root, lanes);`\n\n![6](6.png)\n\n- DOM\n\n","slug":"ReactSourceDebug","published":1,"updated":"2022-04-11T08:24:18.855Z","_id":"cl10f1yi400009no3hcj3clyx","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>React<code>17.0.2</code></li>\n<li>Debug Demo </li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Test</span> <span class=\"keyword\">extends</span> <span class=\"title class_ inherited__\">React.Component</span>&lt;<span class=\"built_in\">any</span>, &#123; <span class=\"attr\">text</span>: <span class=\"built_in\">string</span> &#125;&gt; &#123;</span><br><span class=\"line\">  <span class=\"title function_\">constructor</span>(<span class=\"params\">props: <span class=\"built_in\">any</span></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">super</span>(props);</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">state</span> = &#123;</span><br><span class=\"line\">      <span class=\"attr\">text</span>: <span class=\"string\">&quot;hello&quot;</span>,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"title function_\">render</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">        <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>&#123;this.state.text&#125;<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">        <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>normal<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">        <span class=\"tag\">&lt;<span class=\"name\">button</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">          <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-xml\">            debugger;</span></span><br><span class=\"line\"><span class=\"language-xml\">            this.setState(&#123; text: &quot;check&quot; &#125;);</span></span><br><span class=\"line\"><span class=\"language-xml\">          &#125;&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">        &gt;</span></span><br><span class=\"line\"><span class=\"language-xml\">          setState</span></span><br><span class=\"line\"><span class=\"language-xml\">        <span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title class_\">ReactDOM</span>.<span class=\"title function_\">render</span>(<span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Test</span> /&gt;</span></span>, <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;root&quot;</span>));</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>DEMOReactWeb<ul>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li><a href=\"https://www.zhihu.com/people/lam-14-21-74\">LamReact</a></li>\n<li><strong></strong></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title class_\">ReactDOM</span>.<span class=\"title function_\">render</span>(<span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Test</span> /&gt;</span></span>, <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;root&quot;</span>));</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>&lt;App /&gt;</code></li>\n</ul>\n<h3 id=\"JSX\"><a href=\"#JSX\" class=\"headerlink\" title=\"JSX\"></a>JSX</h3><ul>\n<li><code>webpack</code>JSX</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">react_dom__WEBPACK_IMPORTED_MODULE_1__.<span class=\"title function_\">render</span>( <span class=\"comment\">/*#__PURE__*/</span>(<span class=\"number\">0</span>,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_4__.<span class=\"property\">jsxDEV</span>)(<span class=\"title class_\">Test</span>, &#123;&#125;, <span class=\"built_in\">void</span> <span class=\"number\">0</span>, <span class=\"literal\">false</span>, &#123;</span><br><span class=\"line\">  <span class=\"attr\">fileName</span>: _jsxFileName,</span><br><span class=\"line\">  <span class=\"attr\">lineNumber</span>: <span class=\"number\">52</span>,</span><br><span class=\"line\">  <span class=\"attr\">columnNumber</span>: <span class=\"number\">17</span></span><br><span class=\"line\">&#125;, <span class=\"literal\">undefined</span>), <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;root&quot;</span>));</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>JSX<ul>\n<li>JSX</li>\n<li>JSX</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// DEMOTest</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">$$typeof</span>: <span class=\"title class_\">Symbol</span>(react.<span class=\"property\">element</span>),</span><br><span class=\"line\">  <span class=\"attr\">type</span>: <span class=\"keyword\">class</span> <span class=\"title class_\">Test</span> <span class=\"comment\">/* Test */</span>,</span><br><span class=\"line\">  <span class=\"attr\">key</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">ref</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">props</span>: &#123;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">_owner</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">_store</span>: &#123;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"render\"><a href=\"#render\" class=\"headerlink\" title=\"render\"></a>render</h3><ul>\n<li><code>root</code>React16<code>Fiber</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// FiberRoot</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">createFiberRoot</span>(<span class=\"params\">containerInfo, tag, hydrate, hydrationCallbacks</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> root = <span class=\"keyword\">new</span> <span class=\"title class_\">FiberRootNode</span>(containerInfo, tag, hydrate);</span><br><span class=\"line\">  <span class=\"keyword\">var</span> uninitializedFiber = <span class=\"title function_\">createHostRootFiber</span>(tag);</span><br><span class=\"line\">  root.<span class=\"property\">current</span> = uninitializedFiber;</span><br><span class=\"line\">  uninitializedFiber.<span class=\"property\">stateNode</span> = root;</span><br><span class=\"line\">  <span class=\"title function_\">initializeUpdateQueue</span>(uninitializedFiber);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> root;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><img src=\"/3.png\" alt=\"3\"></p>\n<h4 id=\"Fiber\"><a href=\"#Fiber\" class=\"headerlink\" title=\"Fiber\"></a>Fiber</h4><ul>\n<li>DebugFiber<code>JSX</code>DOMFiber<code>&lt;App /&gt;</code></li>\n<li>ReactFiberFiberReactDOM</li>\n<li>FiberDEMO</li>\n</ul>\n<p><img src=\"/1.png\" alt=\"1\"></p>\n<ul>\n<li><p><strong>Fiber</strong>rootspanbutton</p>\n<ul>\n<li>Fiber</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> <span class=\"title class_\">Fiber</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">return</span>:<span class=\"title class_\">FiberNode</span>, <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"attr\">sibiling</span>:<span class=\"title class_\">FiberNode</span>, <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"attr\">child</span>:<span class=\"title class_\">FiberNode</span>, <span class=\"comment\">//</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>FiberrootFiber<strong>rootFiber</strong></p>\n</li>\n</ul>\n<p><img src=\"/2.png\" alt=\"2\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>Reactroot</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// rootFiber</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">listenToAllSupportedEvents</span>(<span class=\"params\">rootContainerElement</span>) &#123;</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (rootContainerElement[listeningMarker]) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    rootContainerElement[listeningMarker] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    allNativeEvents.<span class=\"title function_\">forEach</span>(<span class=\"keyword\">function</span> (<span class=\"params\">domEventName</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!nonDelegatedEvents.<span class=\"title function_\">has</span>(domEventName)) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">listenToNativeEvent</span>(domEventName, <span class=\"literal\">false</span>, rootContainerElement, <span class=\"literal\">null</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"title function_\">listenToNativeEvent</span>(domEventName, <span class=\"literal\">true</span>, rootContainerElement, <span class=\"literal\">null</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>allNativeEvents</code>ReactReact</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> discreteEventPairsForSimpleEventPlugin = [<span class=\"string\">&#x27;cancel&#x27;</span>, <span class=\"string\">&#x27;cancel&#x27;</span>, <span class=\"string\">&#x27;click&#x27;</span>, <span class=\"string\">&#x27;click&#x27;</span>, <span class=\"string\">&#x27;close&#x27;</span>, <span class=\"string\">&#x27;close&#x27;</span>,<span class=\"comment\">/*...*/</span>];</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>root</code><code>root</code><code>dispatchEvent</code><strong></strong></li>\n</ul>\n<h3 id=\"updateContainer\"><a href=\"#updateContainer\" class=\"headerlink\" title=\"updateContainer\"></a>updateContainer</h3><ul>\n<li>Fiber<ul>\n<li><code>unbatchedUpdates</code>React</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">unbatchedUpdates</span>(<span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">updateContainer</span>(children, fiberRoot, parentComponent, callback);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>React<ul>\n<li><code>updatequeue</code></li>\n<li><code>lane</code></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"workLoopSync\"><a href=\"#workLoopSync\" class=\"headerlink\" title=\"workLoopSync\"></a>workLoopSync</h3><ul>\n<li>Fiber<strong></strong>Fiber</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">workLoopSync</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// Already timed out, so perform work without checking if we need to yield.</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (workInProgress !== <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">performUnitOfWork</span>(workInProgress);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><img src=\"/4.png\" alt=\"4\"></p>\n<h3 id=\"Fiber\"><a href=\"#Fiber\" class=\"headerlink\" title=\"Fiber\"></a>Fiber</h3><ul>\n<li><p><code>workLoopSync</code><strong>FiberrootFiber</strong></p>\n<ul>\n<li><code>beginWork</code></li>\n<li><code>completeUnitOfWork</code></li>\n</ul>\n</li>\n<li><p>Fiber</p>\n<ul>\n<li><strong><code>beginWork</code>Fiber<code>reconcileChildren</code>FiberchildchildJSXFiberFiberFiber</strong></li>\n<li><strong><code>completeUnitOfWork</code>FiberDOM</strong></li>\n</ul>\n</li>\n<li><p><code>workLoopSync</code><strong>b<code>beginWork</code>b1<code>beginWork</code></strong><img src=\"/5.png\" alt=\"5\"></p>\n</li>\n<li><p>Fiber<code>workLoopSync</code>Fiber<code>root</code></p>\n</li>\n</ul>\n<h3 id=\"commitRoot\"><a href=\"#commitRoot\" class=\"headerlink\" title=\"commitRoot\"></a>commitRoot</h3><ul>\n<li><code>commitRoot</code>FiberDOM</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// commitRootDOM</span></span><br><span class=\"line\"><span class=\"keyword\">do</span> &#123;</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"title function_\">invokeGuardedCallback</span>(<span class=\"literal\">null</span>, commitMutationEffects, <span class=\"literal\">null</span>, root, renderPriorityLevel);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"title function_\">hasCaughtError</span>()) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!(nextEffect !== <span class=\"literal\">null</span>)) &#123;</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">throw</span> <span class=\"title class_\">Error</span>( <span class=\"string\">&quot;Should be working on an effect.&quot;</span> );</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> _error = <span class=\"title function_\">clearCaughtError</span>();</span><br><span class=\"line\">            <span class=\"title function_\">captureCommitPhaseError</span>(nextEffect, _error);</span><br><span class=\"line\">            nextEffect = nextEffect.<span class=\"property\">nextEffect</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125; <span class=\"keyword\">while</span> (nextEffect !== <span class=\"literal\">null</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><ul>\n<li><code>invokeGuardedCallback(null, commitBeforeMutationEffects, null);</code></li>\n<li><code>invokeGuardedCallback(null, commitLayoutEffects, null, root, lanes);</code></li>\n</ul>\n</li>\n</ul>\n<p><img src=\"/6.png\" alt=\"6\"></p>\n<ul>\n<li>DOM</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>React<code>17.0.2</code></li>\n<li>Debug Demo </li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Test</span> <span class=\"keyword\">extends</span> <span class=\"title class_ inherited__\">React.Component</span>&lt;<span class=\"built_in\">any</span>, &#123; <span class=\"attr\">text</span>: <span class=\"built_in\">string</span> &#125;&gt; &#123;</span><br><span class=\"line\">  <span class=\"title function_\">constructor</span>(<span class=\"params\">props: <span class=\"built_in\">any</span></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">super</span>(props);</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">state</span> = &#123;</span><br><span class=\"line\">      <span class=\"attr\">text</span>: <span class=\"string\">&quot;hello&quot;</span>,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"title function_\">render</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">        <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>&#123;this.state.text&#125;<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">        <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>normal<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">        <span class=\"tag\">&lt;<span class=\"name\">button</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">          <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-xml\">            debugger;</span></span><br><span class=\"line\"><span class=\"language-xml\">            this.setState(&#123; text: &quot;check&quot; &#125;);</span></span><br><span class=\"line\"><span class=\"language-xml\">          &#125;&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">        &gt;</span></span><br><span class=\"line\"><span class=\"language-xml\">          setState</span></span><br><span class=\"line\"><span class=\"language-xml\">        <span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title class_\">ReactDOM</span>.<span class=\"title function_\">render</span>(<span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Test</span> /&gt;</span></span>, <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;root&quot;</span>));</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>DEMOReactWeb<ul>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li><a href=\"https://www.zhihu.com/people/lam-14-21-74\">LamReact</a></li>\n<li><strong></strong></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title class_\">ReactDOM</span>.<span class=\"title function_\">render</span>(<span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Test</span> /&gt;</span></span>, <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;root&quot;</span>));</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>&lt;App /&gt;</code></li>\n</ul>\n<h3 id=\"JSX\"><a href=\"#JSX\" class=\"headerlink\" title=\"JSX\"></a>JSX</h3><ul>\n<li><code>webpack</code>JSX</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">react_dom__WEBPACK_IMPORTED_MODULE_1__.<span class=\"title function_\">render</span>( <span class=\"comment\">/*#__PURE__*/</span>(<span class=\"number\">0</span>,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_4__.<span class=\"property\">jsxDEV</span>)(<span class=\"title class_\">Test</span>, &#123;&#125;, <span class=\"built_in\">void</span> <span class=\"number\">0</span>, <span class=\"literal\">false</span>, &#123;</span><br><span class=\"line\">  <span class=\"attr\">fileName</span>: _jsxFileName,</span><br><span class=\"line\">  <span class=\"attr\">lineNumber</span>: <span class=\"number\">52</span>,</span><br><span class=\"line\">  <span class=\"attr\">columnNumber</span>: <span class=\"number\">17</span></span><br><span class=\"line\">&#125;, <span class=\"literal\">undefined</span>), <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;root&quot;</span>));</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>JSX<ul>\n<li>JSX</li>\n<li>JSX</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// DEMOTest</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">$$typeof</span>: <span class=\"title class_\">Symbol</span>(react.<span class=\"property\">element</span>),</span><br><span class=\"line\">  <span class=\"attr\">type</span>: <span class=\"keyword\">class</span> <span class=\"title class_\">Test</span> <span class=\"comment\">/* Test */</span>,</span><br><span class=\"line\">  <span class=\"attr\">key</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">ref</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">props</span>: &#123;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">_owner</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">_store</span>: &#123;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"render\"><a href=\"#render\" class=\"headerlink\" title=\"render\"></a>render</h3><ul>\n<li><code>root</code>React16<code>Fiber</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// FiberRoot</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">createFiberRoot</span>(<span class=\"params\">containerInfo, tag, hydrate, hydrationCallbacks</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> root = <span class=\"keyword\">new</span> <span class=\"title class_\">FiberRootNode</span>(containerInfo, tag, hydrate);</span><br><span class=\"line\">  <span class=\"keyword\">var</span> uninitializedFiber = <span class=\"title function_\">createHostRootFiber</span>(tag);</span><br><span class=\"line\">  root.<span class=\"property\">current</span> = uninitializedFiber;</span><br><span class=\"line\">  uninitializedFiber.<span class=\"property\">stateNode</span> = root;</span><br><span class=\"line\">  <span class=\"title function_\">initializeUpdateQueue</span>(uninitializedFiber);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> root;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><img src=\"/3.png\" alt=\"3\"></p>\n<h4 id=\"Fiber\"><a href=\"#Fiber\" class=\"headerlink\" title=\"Fiber\"></a>Fiber</h4><ul>\n<li>DebugFiber<code>JSX</code>DOMFiber<code>&lt;App /&gt;</code></li>\n<li>ReactFiberFiberReactDOM</li>\n<li>FiberDEMO</li>\n</ul>\n<p><img src=\"/1.png\" alt=\"1\"></p>\n<ul>\n<li><p><strong>Fiber</strong>rootspanbutton</p>\n<ul>\n<li>Fiber</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> <span class=\"title class_\">Fiber</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">return</span>:<span class=\"title class_\">FiberNode</span>, <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"attr\">sibiling</span>:<span class=\"title class_\">FiberNode</span>, <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"attr\">child</span>:<span class=\"title class_\">FiberNode</span>, <span class=\"comment\">//</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>FiberrootFiber<strong>rootFiber</strong></p>\n</li>\n</ul>\n<p><img src=\"/2.png\" alt=\"2\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>Reactroot</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// rootFiber</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">listenToAllSupportedEvents</span>(<span class=\"params\">rootContainerElement</span>) &#123;</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (rootContainerElement[listeningMarker]) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    rootContainerElement[listeningMarker] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    allNativeEvents.<span class=\"title function_\">forEach</span>(<span class=\"keyword\">function</span> (<span class=\"params\">domEventName</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!nonDelegatedEvents.<span class=\"title function_\">has</span>(domEventName)) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">listenToNativeEvent</span>(domEventName, <span class=\"literal\">false</span>, rootContainerElement, <span class=\"literal\">null</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"title function_\">listenToNativeEvent</span>(domEventName, <span class=\"literal\">true</span>, rootContainerElement, <span class=\"literal\">null</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>allNativeEvents</code>ReactReact</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> discreteEventPairsForSimpleEventPlugin = [<span class=\"string\">&#x27;cancel&#x27;</span>, <span class=\"string\">&#x27;cancel&#x27;</span>, <span class=\"string\">&#x27;click&#x27;</span>, <span class=\"string\">&#x27;click&#x27;</span>, <span class=\"string\">&#x27;close&#x27;</span>, <span class=\"string\">&#x27;close&#x27;</span>,<span class=\"comment\">/*...*/</span>];</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>root</code><code>root</code><code>dispatchEvent</code><strong></strong></li>\n</ul>\n<h3 id=\"updateContainer\"><a href=\"#updateContainer\" class=\"headerlink\" title=\"updateContainer\"></a>updateContainer</h3><ul>\n<li>Fiber<ul>\n<li><code>unbatchedUpdates</code>React</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">unbatchedUpdates</span>(<span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">updateContainer</span>(children, fiberRoot, parentComponent, callback);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>React<ul>\n<li><code>updatequeue</code></li>\n<li><code>lane</code></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"workLoopSync\"><a href=\"#workLoopSync\" class=\"headerlink\" title=\"workLoopSync\"></a>workLoopSync</h3><ul>\n<li>Fiber<strong></strong>Fiber</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">workLoopSync</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// Already timed out, so perform work without checking if we need to yield.</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (workInProgress !== <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">performUnitOfWork</span>(workInProgress);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><img src=\"/4.png\" alt=\"4\"></p>\n<h3 id=\"Fiber\"><a href=\"#Fiber\" class=\"headerlink\" title=\"Fiber\"></a>Fiber</h3><ul>\n<li><p><code>workLoopSync</code><strong>FiberrootFiber</strong></p>\n<ul>\n<li><code>beginWork</code></li>\n<li><code>completeUnitOfWork</code></li>\n</ul>\n</li>\n<li><p>Fiber</p>\n<ul>\n<li><strong><code>beginWork</code>Fiber<code>reconcileChildren</code>FiberchildchildJSXFiberFiberFiber</strong></li>\n<li><strong><code>completeUnitOfWork</code>FiberDOM</strong></li>\n</ul>\n</li>\n<li><p><code>workLoopSync</code><strong>b<code>beginWork</code>b1<code>beginWork</code></strong><img src=\"/5.png\" alt=\"5\"></p>\n</li>\n<li><p>Fiber<code>workLoopSync</code>Fiber<code>root</code></p>\n</li>\n</ul>\n<h3 id=\"commitRoot\"><a href=\"#commitRoot\" class=\"headerlink\" title=\"commitRoot\"></a>commitRoot</h3><ul>\n<li><code>commitRoot</code>FiberDOM</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// commitRootDOM</span></span><br><span class=\"line\"><span class=\"keyword\">do</span> &#123;</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"title function_\">invokeGuardedCallback</span>(<span class=\"literal\">null</span>, commitMutationEffects, <span class=\"literal\">null</span>, root, renderPriorityLevel);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"title function_\">hasCaughtError</span>()) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!(nextEffect !== <span class=\"literal\">null</span>)) &#123;</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">throw</span> <span class=\"title class_\">Error</span>( <span class=\"string\">&quot;Should be working on an effect.&quot;</span> );</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> _error = <span class=\"title function_\">clearCaughtError</span>();</span><br><span class=\"line\">            <span class=\"title function_\">captureCommitPhaseError</span>(nextEffect, _error);</span><br><span class=\"line\">            nextEffect = nextEffect.<span class=\"property\">nextEffect</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125; <span class=\"keyword\">while</span> (nextEffect !== <span class=\"literal\">null</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><ul>\n<li><code>invokeGuardedCallback(null, commitBeforeMutationEffects, null);</code></li>\n<li><code>invokeGuardedCallback(null, commitLayoutEffects, null, root, lanes);</code></li>\n</ul>\n</li>\n</ul>\n<p><img src=\"/6.png\" alt=\"6\"></p>\n<ul>\n<li>DOM</li>\n</ul>\n"},{"title":"ReactSourceHookDebug","date":"2022-03-27T02:51:50.000Z","description":"ReactDebugHook","top_image":"https://pic2.zhimg.com/v2-8c3223d9228013e069df6a302e81c38f_720w.png?source=d16d100","cover":"/img/cover_3.webp","_content":"## \n\n- React`17.0.2`\n- Debug Demo \n\n```typescript\nconst Test = () => {\n  const [num, setNum] = useState(0);\n  useEffect(() => {\n    console.log(\"effect!\");\n  });\n  return (\n    <button\n      onClick={() => {\n        setNum((prev) => {\n          return prev + 1;\n        });\n      }}\n    >\n      {num}\n    </button>\n  );\n};\n```\n\n- **React Hook**\n\n## Hook\n\n### beginWork\n\n- `rootContainer`lanes`<Test />`FiberDEMO**`beginWork`rootFiber`<Test />`Fiber**\n\n`<Test />`Fiber\n\n```typescript\n{\n  tag: 2,\n  key: null,\n  /*webpackTestJSXjsxDev*/\n  elementType: () => {\n    _s();\n    const [num, setNum] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n      debugger;\n      console.log(\"effect!\");\n    });\n    return /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxDEV)(\"button\", {\n      onClick: () => {\n        debugger;\n        setNum(prev => {\n          return prev + 1;\n        });\n      },\n      children: num\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 5\n    }, undefined);\n  },\n  type: () => {/*webpackTestelementType*/},\n  stateNode: null,\n  return: {/*rootFiber*/},\n  child: null,\n  sibling: null,\n  index: 0,\n  ref: null,\n  pendingProps: {},\n  memoizedProps: null,\n  updateQueue: null,\n  memoizedState: null,\n  dependencies: null,\n  mode: 8,\n  flags: 2,\n  nextEffect: null,\n  firstEffect: null,\n  lastEffect: null,\n  alternate: null,\n}\n```\n\n\n\n![1](11.png)\n\n- Fibertag2React`class``function`\n\n> var IndeterminateComponent = 2; *// Before we know whether it is function or class*\n\n### renderWithHooks\n\n- tag2React`class``function`\n\n```typescript\nif (Component.prototype && typeof Component.prototype.render === 'function'){\n    //class...\n}\n```\n\n- Fiber\n\n```typescript\nReactCurrentOwner$1.current = workInProgress; // workInProgress Fiber\nvalue = renderWithHooks(null, workInProgress, Component, props, context, renderLanes);\n```\n\n- **hook`throwError`hook`function`**\n\n```typescript\nReactCurrentDispatcher$1.current = HooksDispatcherOnMountInDEV;\n// HooksDispatchOnMountInDEVReacthookupdate\n```\n\nhook\n\n![22](22.png)\n\n- `function``child`\n\n\n\n![33](33.png)\n\n### useState\n\n```typescript\n// useState \nuseState: function (initialState) {\n    var prevDispatcher = ReactCurrentDispatcher$1.current; // Hook\n    ReactCurrentDispatcher$1.current = InvalidNestedHooksDispatcherOnMountInDEV;\n\n    try {\n        return mountState(initialState); // useState\n    } finally {\n        ReactCurrentDispatcher$1.current = prevDispatcher;\n    }\n}\n```\n\n- `initialState``mountState`\n\n```typescript\n//mountState \nfunction mountState(initialState) {\n    var hook = mountWorkInProgressHook(); // hook\n\n    if (typeof initialState === 'function') { // initialState\n        // $FlowFixMe: Flow doesn't like mixed types\n        initialState = initialState();\n    }\n\n    hook.memoizedState = hook.baseState = initialState; // \n    var queue = hook.queue = {\n        pending: null,\n        dispatch: null,\n        lastRenderedReducer: basicStateReducer, // \n        lastRenderedState: initialState\n    };\n    var dispatch = queue.dispatch = dispatchAction.bind(null, currentlyRenderingFiber$1, queue); // useState2\n    return [hook.memoizedState, dispatch]; //  const [val,setVal] = useState(0); \n}\n```\n\n- hook`state`\n\n- **`dispatch`Fiber`lastRenderedReducer``basicStateReducer``scheduleUpdateOnFiber`**\n\n```typescript\n// \nfunction dispatchAction(fiber, queue, action) {\n    try {\n        var currentState = queue.lastRenderedState; // state\n        var eagerState = lastRenderedReducer(currentState, action); // state\n\t\t// update\n        update.eagerReducer = lastRenderedReducer;\n        update.eagerState = eagerState;\n    } catch (error) {// Suppress the error. It will throw again in the render phase.\n    } finally {\n        {\n            ReactCurrentDispatcher$1.current = prevDispatcher;\n        }\n    }\n\t// \n    scheduleUpdateOnFiber(fiber, lane, eventTime);\n}\n```\n\n- **`action``lastRenderReducer`state**\n\n```typescript\nfunction basicStateReducer(state, action) {\n  // $FlowFixMe: Flow doesn't like mixed types\n  // statestate\n  return typeof action === 'function' ? action(state) : action;\n}\n```\n\n### useEffect\n\n```typescript\n// useEffect\nuseEffect: function (create, deps) {\n    currentHookNameInDev = 'useEffect';\n    mountHookTypesDev(); //  hookName  hookTpyeDev\n    checkDepsAreArrayDev(deps); // useEffectdeps\n    return mountEffect(create, deps); // useEffect\n},\n```\n\n- `mountEffect``jest`\n\n```typescript\nfunction mountEffectImpl(fiberFlags, hookFlags, create, deps) {\n    // createeffect\n    var hook = mountWorkInProgressHook(); // hook\n    var nextDeps = deps === undefined ? null : deps;\n    currentlyRenderingFiber$1.flags |= fiberFlags;\n    hook.memoizedState = pushEffect(HasEffect | hookFlags, create, undefined, nextDeps);\n}\n```\n\n- `hook``memoizedState``useState``useEffect``create``deps`\n\n### commitRoot\n\n- `commitRoot`DOM\n\n> invokeGuardedCallback(null, commitBeforeMutationEffects, null);\n\n- **`invokeGuardedCallback`React`DEV`**\n\n- `flushPassiveEffects``effect`\n\n\n\n![44](44.png)\n\n### commitBeforeMutationEffects\n\n- debug`flushPassiveEffects`React\n  - `flushPassiveEffects``commitBeforeMutationEffects`\n  - `commitBeforeMutationEffects`React\n\n#### flushPassiveEffects\n\n- `unMountEffects`\n\n```typescript\nvar mountEffects = pendingPassiveHookEffectsMount; // effectsmounteffects\npendingPassiveHookEffectsMount = [];\nfor (var _i = 0; _i < mountEffects.length; _i += 2) {\n    // effectseffectseffectsfiber\n    var _effect2 = mountEffects[_i];\n    var _fiber = mountEffects[_i + 1];\n    {\n        setCurrentFiber(_fiber); // fiber\n        {\n            // invokePassiveEffectCreateeffects\n            invokeGuardedCallback(null, invokePassiveEffectCreate, null, _effect2);\n        }\n        if (hasCaughtError()) {\n            // ...\n        }\n        resetCurrentFiber();\n    }\n}\n```\n\n- `syncQueue``useEffect``state`\n\n```typescript\nflushSyncCallbackQueue(); \n// flushSyncCallbackQueue()\n```\n\n#### invokePassiveEffectCreate\n\n- `effects`\n\n```typescript\nfunction invokePassiveEffectCreate(effect) {\n    var create = effect.create;\n    effect.destroy = create();\n}\n// effects\n{\n  tag: 5, // hook\n  create: () => { // effect\n    debugger;\n    console.log(\"effect!\");\n  },\n  destroy: undefined, // \n  deps: null, // \n  next: [Circular], // effect\n}\n```\n\n### commitMutationEffects\n\n- **ReactFiberDOM`effects`**\n\n#### commitHookEffectListUnmount\n\n- **`effects`**\n\n```typescript\n// \n    do {\n      if ((effect.tag & tag) === tag) {\n        // Unmount\n        var destroy = effect.destroy; // effect \n        effect.destroy = undefined;\n        if (destroy !== undefined) {\n          destroy(); // \n        }\n      }\n      effect = effect.next; // effect\n    } while (effect !== firstEffect);\n```\n\n### commitLayoutEffects\n\n- DOM\n\n> invokeGuardedCallback(null, commitLayoutEffects, null, root, lanes);\n\n#### commitLifeCycles\n\n- effects\n\n- `commitHookEffectListMount`...`effect`\n\n```typescript\n// \nif ((effect.tag & tag) === tag) {\n    // Mount\n    var create = effect.create;\n    effect.destroy = create();\n    {\n        var destroy = effect.destroy;\n        if (destroy !== undefined && typeof destroy !== 'function') {\n            // ... destroywarn\n        }\n    }\n}\n```\n\n#### schedulePassiveEffects\n\n- `schedulePassiveEffects``effect`\n\n```typescript\n// \ndo {\n    var _effect = effect,\n        next = _effect.next,\n        tag = _effect.tag;\n    if ((tag & Passive$1) !== NoFlags$1 && (tag & HasEffect) !== NoFlags$1) {\n        // fiberhookpendingPassiveHookEffectsUnmountpendingPassiveHookEffectsMount\n        // pendingPassiveHookEffectsMountflushPassiveEffectseffect\n        enqueuePendingPassiveHookEffectUnmount(finishedWork, effect);\n        enqueuePendingPassiveHookEffectMount(finishedWork, effect);\n    }\n    effect = next;\n} while (effect !== firstEffect);\n```\n\n\n","source":"_posts/ReactSourceHookDebug.md","raw":"---\ntitle: ReactSourceHookDebug\ndate: 2022-03-27 10:51:50\ntags:\n - React\n - source\n - javascript\ncategories:\n - React\ndescription: ReactDebugHook\ntop_image: https://pic2.zhimg.com/v2-8c3223d9228013e069df6a302e81c38f_720w.png?source=d16d100\ncover: /img/cover_3.webp\n\n---\n## \n\n- React`17.0.2`\n- Debug Demo \n\n```typescript\nconst Test = () => {\n  const [num, setNum] = useState(0);\n  useEffect(() => {\n    console.log(\"effect!\");\n  });\n  return (\n    <button\n      onClick={() => {\n        setNum((prev) => {\n          return prev + 1;\n        });\n      }}\n    >\n      {num}\n    </button>\n  );\n};\n```\n\n- **React Hook**\n\n## Hook\n\n### beginWork\n\n- `rootContainer`lanes`<Test />`FiberDEMO**`beginWork`rootFiber`<Test />`Fiber**\n\n`<Test />`Fiber\n\n```typescript\n{\n  tag: 2,\n  key: null,\n  /*webpackTestJSXjsxDev*/\n  elementType: () => {\n    _s();\n    const [num, setNum] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n      debugger;\n      console.log(\"effect!\");\n    });\n    return /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxDEV)(\"button\", {\n      onClick: () => {\n        debugger;\n        setNum(prev => {\n          return prev + 1;\n        });\n      },\n      children: num\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 5\n    }, undefined);\n  },\n  type: () => {/*webpackTestelementType*/},\n  stateNode: null,\n  return: {/*rootFiber*/},\n  child: null,\n  sibling: null,\n  index: 0,\n  ref: null,\n  pendingProps: {},\n  memoizedProps: null,\n  updateQueue: null,\n  memoizedState: null,\n  dependencies: null,\n  mode: 8,\n  flags: 2,\n  nextEffect: null,\n  firstEffect: null,\n  lastEffect: null,\n  alternate: null,\n}\n```\n\n\n\n![1](11.png)\n\n- Fibertag2React`class``function`\n\n> var IndeterminateComponent = 2; *// Before we know whether it is function or class*\n\n### renderWithHooks\n\n- tag2React`class``function`\n\n```typescript\nif (Component.prototype && typeof Component.prototype.render === 'function'){\n    //class...\n}\n```\n\n- Fiber\n\n```typescript\nReactCurrentOwner$1.current = workInProgress; // workInProgress Fiber\nvalue = renderWithHooks(null, workInProgress, Component, props, context, renderLanes);\n```\n\n- **hook`throwError`hook`function`**\n\n```typescript\nReactCurrentDispatcher$1.current = HooksDispatcherOnMountInDEV;\n// HooksDispatchOnMountInDEVReacthookupdate\n```\n\nhook\n\n![22](22.png)\n\n- `function``child`\n\n\n\n![33](33.png)\n\n### useState\n\n```typescript\n// useState \nuseState: function (initialState) {\n    var prevDispatcher = ReactCurrentDispatcher$1.current; // Hook\n    ReactCurrentDispatcher$1.current = InvalidNestedHooksDispatcherOnMountInDEV;\n\n    try {\n        return mountState(initialState); // useState\n    } finally {\n        ReactCurrentDispatcher$1.current = prevDispatcher;\n    }\n}\n```\n\n- `initialState``mountState`\n\n```typescript\n//mountState \nfunction mountState(initialState) {\n    var hook = mountWorkInProgressHook(); // hook\n\n    if (typeof initialState === 'function') { // initialState\n        // $FlowFixMe: Flow doesn't like mixed types\n        initialState = initialState();\n    }\n\n    hook.memoizedState = hook.baseState = initialState; // \n    var queue = hook.queue = {\n        pending: null,\n        dispatch: null,\n        lastRenderedReducer: basicStateReducer, // \n        lastRenderedState: initialState\n    };\n    var dispatch = queue.dispatch = dispatchAction.bind(null, currentlyRenderingFiber$1, queue); // useState2\n    return [hook.memoizedState, dispatch]; //  const [val,setVal] = useState(0); \n}\n```\n\n- hook`state`\n\n- **`dispatch`Fiber`lastRenderedReducer``basicStateReducer``scheduleUpdateOnFiber`**\n\n```typescript\n// \nfunction dispatchAction(fiber, queue, action) {\n    try {\n        var currentState = queue.lastRenderedState; // state\n        var eagerState = lastRenderedReducer(currentState, action); // state\n\t\t// update\n        update.eagerReducer = lastRenderedReducer;\n        update.eagerState = eagerState;\n    } catch (error) {// Suppress the error. It will throw again in the render phase.\n    } finally {\n        {\n            ReactCurrentDispatcher$1.current = prevDispatcher;\n        }\n    }\n\t// \n    scheduleUpdateOnFiber(fiber, lane, eventTime);\n}\n```\n\n- **`action``lastRenderReducer`state**\n\n```typescript\nfunction basicStateReducer(state, action) {\n  // $FlowFixMe: Flow doesn't like mixed types\n  // statestate\n  return typeof action === 'function' ? action(state) : action;\n}\n```\n\n### useEffect\n\n```typescript\n// useEffect\nuseEffect: function (create, deps) {\n    currentHookNameInDev = 'useEffect';\n    mountHookTypesDev(); //  hookName  hookTpyeDev\n    checkDepsAreArrayDev(deps); // useEffectdeps\n    return mountEffect(create, deps); // useEffect\n},\n```\n\n- `mountEffect``jest`\n\n```typescript\nfunction mountEffectImpl(fiberFlags, hookFlags, create, deps) {\n    // createeffect\n    var hook = mountWorkInProgressHook(); // hook\n    var nextDeps = deps === undefined ? null : deps;\n    currentlyRenderingFiber$1.flags |= fiberFlags;\n    hook.memoizedState = pushEffect(HasEffect | hookFlags, create, undefined, nextDeps);\n}\n```\n\n- `hook``memoizedState``useState``useEffect``create``deps`\n\n### commitRoot\n\n- `commitRoot`DOM\n\n> invokeGuardedCallback(null, commitBeforeMutationEffects, null);\n\n- **`invokeGuardedCallback`React`DEV`**\n\n- `flushPassiveEffects``effect`\n\n\n\n![44](44.png)\n\n### commitBeforeMutationEffects\n\n- debug`flushPassiveEffects`React\n  - `flushPassiveEffects``commitBeforeMutationEffects`\n  - `commitBeforeMutationEffects`React\n\n#### flushPassiveEffects\n\n- `unMountEffects`\n\n```typescript\nvar mountEffects = pendingPassiveHookEffectsMount; // effectsmounteffects\npendingPassiveHookEffectsMount = [];\nfor (var _i = 0; _i < mountEffects.length; _i += 2) {\n    // effectseffectseffectsfiber\n    var _effect2 = mountEffects[_i];\n    var _fiber = mountEffects[_i + 1];\n    {\n        setCurrentFiber(_fiber); // fiber\n        {\n            // invokePassiveEffectCreateeffects\n            invokeGuardedCallback(null, invokePassiveEffectCreate, null, _effect2);\n        }\n        if (hasCaughtError()) {\n            // ...\n        }\n        resetCurrentFiber();\n    }\n}\n```\n\n- `syncQueue``useEffect``state`\n\n```typescript\nflushSyncCallbackQueue(); \n// flushSyncCallbackQueue()\n```\n\n#### invokePassiveEffectCreate\n\n- `effects`\n\n```typescript\nfunction invokePassiveEffectCreate(effect) {\n    var create = effect.create;\n    effect.destroy = create();\n}\n// effects\n{\n  tag: 5, // hook\n  create: () => { // effect\n    debugger;\n    console.log(\"effect!\");\n  },\n  destroy: undefined, // \n  deps: null, // \n  next: [Circular], // effect\n}\n```\n\n### commitMutationEffects\n\n- **ReactFiberDOM`effects`**\n\n#### commitHookEffectListUnmount\n\n- **`effects`**\n\n```typescript\n// \n    do {\n      if ((effect.tag & tag) === tag) {\n        // Unmount\n        var destroy = effect.destroy; // effect \n        effect.destroy = undefined;\n        if (destroy !== undefined) {\n          destroy(); // \n        }\n      }\n      effect = effect.next; // effect\n    } while (effect !== firstEffect);\n```\n\n### commitLayoutEffects\n\n- DOM\n\n> invokeGuardedCallback(null, commitLayoutEffects, null, root, lanes);\n\n#### commitLifeCycles\n\n- effects\n\n- `commitHookEffectListMount`...`effect`\n\n```typescript\n// \nif ((effect.tag & tag) === tag) {\n    // Mount\n    var create = effect.create;\n    effect.destroy = create();\n    {\n        var destroy = effect.destroy;\n        if (destroy !== undefined && typeof destroy !== 'function') {\n            // ... destroywarn\n        }\n    }\n}\n```\n\n#### schedulePassiveEffects\n\n- `schedulePassiveEffects``effect`\n\n```typescript\n// \ndo {\n    var _effect = effect,\n        next = _effect.next,\n        tag = _effect.tag;\n    if ((tag & Passive$1) !== NoFlags$1 && (tag & HasEffect) !== NoFlags$1) {\n        // fiberhookpendingPassiveHookEffectsUnmountpendingPassiveHookEffectsMount\n        // pendingPassiveHookEffectsMountflushPassiveEffectseffect\n        enqueuePendingPassiveHookEffectUnmount(finishedWork, effect);\n        enqueuePendingPassiveHookEffectMount(finishedWork, effect);\n    }\n    effect = next;\n} while (effect !== firstEffect);\n```\n\n\n","slug":"ReactSourceHookDebug","published":1,"updated":"2022-04-11T08:23:33.935Z","_id":"cl196f5ym0000b1o36xidegzq","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>React<code>17.0.2</code></li>\n<li>Debug Demo </li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">Test</span> = (<span class=\"params\"></span>) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [num, setNum] = <span class=\"title function_\">useState</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"title function_\">useEffect</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;effect!&quot;</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">button</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">      <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-xml\">        setNum((prev) =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"language-xml\">          return prev + 1;</span></span><br><span class=\"line\"><span class=\"language-xml\">        &#125;);</span></span><br><span class=\"line\"><span class=\"language-xml\">      &#125;&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">    &gt;</span></span><br><span class=\"line\"><span class=\"language-xml\">      &#123;num&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>React Hook</strong></li>\n</ul>\n<h2 id=\"Hook\"><a href=\"#Hook\" class=\"headerlink\" title=\"Hook\"></a>Hook</h2><h3 id=\"beginWork\"><a href=\"#beginWork\" class=\"headerlink\" title=\"beginWork\"></a>beginWork</h3><ul>\n<li><code>rootContainer</code>lanes<code>&lt;Test /&gt;</code>FiberDEMO<strong><code>beginWork</code>rootFiber<code>&lt;Test /&gt;</code>Fiber</strong></li>\n</ul>\n<p><code>&lt;Test /&gt;</code>Fiber</p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">tag</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">  <span class=\"attr\">key</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"comment\">/*webpackTestJSXjsxDev*/</span></span><br><span class=\"line\">  <span class=\"attr\">elementType</span>: <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"title function_\">_s</span>();</span><br><span class=\"line\">    <span class=\"keyword\">const</span> [num, setNum] = (<span class=\"number\">0</span>,react__WEBPACK_IMPORTED_MODULE_0__.<span class=\"property\">useState</span>)(<span class=\"number\">0</span>);</span><br><span class=\"line\">    (<span class=\"number\">0</span>,react__WEBPACK_IMPORTED_MODULE_0__.<span class=\"property\">useEffect</span>)(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">debugger</span>;</span><br><span class=\"line\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;effect!&quot;</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"comment\">/*#__PURE__*/</span>(<span class=\"number\">0</span>,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_4__.<span class=\"property\">jsxDEV</span>)(<span class=\"string\">&quot;button&quot;</span>, &#123;</span><br><span class=\"line\">      <span class=\"attr\">onClick</span>: <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">debugger</span>;</span><br><span class=\"line\">        <span class=\"title function_\">setNum</span>(<span class=\"function\"><span class=\"params\">prev</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> prev + <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      <span class=\"attr\">children</span>: num</span><br><span class=\"line\">    &#125;, <span class=\"built_in\">void</span> <span class=\"number\">0</span>, <span class=\"literal\">false</span>, &#123;</span><br><span class=\"line\">      <span class=\"attr\">fileName</span>: _jsxFileName,</span><br><span class=\"line\">      <span class=\"attr\">lineNumber</span>: <span class=\"number\">59</span>,</span><br><span class=\"line\">      <span class=\"attr\">columnNumber</span>: <span class=\"number\">5</span></span><br><span class=\"line\">    &#125;, <span class=\"literal\">undefined</span>);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">type</span>: <span class=\"function\">() =&gt;</span> &#123;<span class=\"comment\">/*webpackTestelementType*/</span>&#125;,</span><br><span class=\"line\">  <span class=\"attr\">stateNode</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">return</span>: &#123;<span class=\"comment\">/*rootFiber*/</span>&#125;,</span><br><span class=\"line\">  <span class=\"attr\">child</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">sibling</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">index</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">  <span class=\"attr\">ref</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">pendingProps</span>: &#123;&#125;,</span><br><span class=\"line\">  <span class=\"attr\">memoizedProps</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">updateQueue</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">memoizedState</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">dependencies</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">mode</span>: <span class=\"number\">8</span>,</span><br><span class=\"line\">  <span class=\"attr\">flags</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">  <span class=\"attr\">nextEffect</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">firstEffect</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">lastEffect</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">alternate</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><img src=\"/11.png\" alt=\"1\"></p>\n<ul>\n<li>Fibertag2React<code>class</code><code>function</code></li>\n</ul>\n<blockquote>\n<p>var IndeterminateComponent &#x3D; 2; <em>&#x2F;&#x2F; Before we know whether it is function or class</em></p>\n</blockquote>\n<h3 id=\"renderWithHooks\"><a href=\"#renderWithHooks\" class=\"headerlink\" title=\"renderWithHooks\"></a>renderWithHooks</h3><ul>\n<li>tag2React<code>class</code><code>function</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"title class_\">Component</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span> &amp;&amp; <span class=\"keyword\">typeof</span> <span class=\"title class_\">Component</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">render</span> === <span class=\"string\">&#x27;function&#x27;</span>)&#123;</span><br><span class=\"line\">    <span class=\"comment\">//class...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Fiber</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title class_\">ReactCurrentOwner</span>$<span class=\"number\">1.</span>current = workInProgress; <span class=\"comment\">// workInProgress Fiber</span></span><br><span class=\"line\">value = <span class=\"title function_\">renderWithHooks</span>(<span class=\"literal\">null</span>, workInProgress, <span class=\"title class_\">Component</span>, props, context, renderLanes);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>hook<code>throwError</code>hook<code>function</code></strong></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title class_\">ReactCurrentDispatcher</span>$<span class=\"number\">1.</span>current = <span class=\"title class_\">HooksDispatcherOnMountInDEV</span>;</span><br><span class=\"line\"><span class=\"comment\">// HooksDispatchOnMountInDEVReacthookupdate</span></span><br></pre></td></tr></table></figure>\n\n<p>hook</p>\n<p><img src=\"/22.png\" alt=\"22\"></p>\n<ul>\n<li><code>function</code><code>child</code></li>\n</ul>\n<p></p>\n<p><img src=\"/33.png\" alt=\"33\"></p>\n<h3 id=\"useState\"><a href=\"#useState\" class=\"headerlink\" title=\"useState\"></a>useState</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// useState </span></span><br><span class=\"line\"><span class=\"attr\">useState</span>: <span class=\"keyword\">function</span> (<span class=\"params\">initialState</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> prevDispatcher = <span class=\"title class_\">ReactCurrentDispatcher</span>$<span class=\"number\">1.</span>current; <span class=\"comment\">// Hook</span></span><br><span class=\"line\">    <span class=\"title class_\">ReactCurrentDispatcher</span>$<span class=\"number\">1.</span>current = <span class=\"title class_\">InvalidNestedHooksDispatcherOnMountInDEV</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"title function_\">mountState</span>(initialState); <span class=\"comment\">// useState</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">        <span class=\"title class_\">ReactCurrentDispatcher</span>$<span class=\"number\">1.</span>current = prevDispatcher;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>initialState</code><code>mountState</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//mountState </span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">mountState</span>(<span class=\"params\">initialState</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> hook = <span class=\"title function_\">mountWorkInProgressHook</span>(); <span class=\"comment\">// hook</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> initialState === <span class=\"string\">&#x27;function&#x27;</span>) &#123; <span class=\"comment\">// initialState</span></span><br><span class=\"line\">        <span class=\"comment\">// $FlowFixMe: Flow doesn&#x27;t like mixed types</span></span><br><span class=\"line\">        initialState = <span class=\"title function_\">initialState</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    hook.<span class=\"property\">memoizedState</span> = hook.<span class=\"property\">baseState</span> = initialState; <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> queue = hook.<span class=\"property\">queue</span> = &#123;</span><br><span class=\"line\">        <span class=\"attr\">pending</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">        <span class=\"attr\">dispatch</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">        <span class=\"attr\">lastRenderedReducer</span>: basicStateReducer, <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"attr\">lastRenderedState</span>: initialState</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> dispatch = queue.<span class=\"property\">dispatch</span> = dispatchAction.<span class=\"title function_\">bind</span>(<span class=\"literal\">null</span>, currentlyRenderingFiber$<span class=\"number\">1</span>, queue); <span class=\"comment\">// useState2</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> [hook.<span class=\"property\">memoizedState</span>, dispatch]; <span class=\"comment\">//  const [val,setVal] = useState(0); </span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>hook<code>state</code></p>\n</li>\n<li><p><strong><code>dispatch</code>Fiber<code>lastRenderedReducer</code><code>basicStateReducer</code><code>scheduleUpdateOnFiber</code></strong></p>\n</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">dispatchAction</span>(<span class=\"params\">fiber, queue, action</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> currentState = queue.<span class=\"property\">lastRenderedState</span>; <span class=\"comment\">// state</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> eagerState = <span class=\"title function_\">lastRenderedReducer</span>(currentState, action); <span class=\"comment\">// state</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// update</span></span><br><span class=\"line\">        update.<span class=\"property\">eagerReducer</span> = lastRenderedReducer;</span><br><span class=\"line\">        update.<span class=\"property\">eagerState</span> = eagerState;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (error) &#123;<span class=\"comment\">// Suppress the error. It will throw again in the render phase.</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"title class_\">ReactCurrentDispatcher</span>$<span class=\"number\">1.</span>current = prevDispatcher;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t<span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"title function_\">scheduleUpdateOnFiber</span>(fiber, lane, eventTime);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong><code>action</code><code>lastRenderReducer</code>state</strong></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">basicStateReducer</span>(<span class=\"params\">state, action</span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// $FlowFixMe: Flow doesn&#x27;t like mixed types</span></span><br><span class=\"line\">  <span class=\"comment\">// statestate</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">typeof</span> action === <span class=\"string\">&#x27;function&#x27;</span> ? <span class=\"title function_\">action</span>(state) : action;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"useEffect\"><a href=\"#useEffect\" class=\"headerlink\" title=\"useEffect\"></a>useEffect</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// useEffect</span></span><br><span class=\"line\"><span class=\"attr\">useEffect</span>: <span class=\"keyword\">function</span> (<span class=\"params\">create, deps</span>) &#123;</span><br><span class=\"line\">    currentHookNameInDev = <span class=\"string\">&#x27;useEffect&#x27;</span>;</span><br><span class=\"line\">    <span class=\"title function_\">mountHookTypesDev</span>(); <span class=\"comment\">//  hookName  hookTpyeDev</span></span><br><span class=\"line\">    <span class=\"title function_\">checkDepsAreArrayDev</span>(deps); <span class=\"comment\">// useEffectdeps</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"title function_\">mountEffect</span>(create, deps); <span class=\"comment\">// useEffect</span></span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>mountEffect</code><code>jest</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">mountEffectImpl</span>(<span class=\"params\">fiberFlags, hookFlags, create, deps</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// createeffect</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> hook = <span class=\"title function_\">mountWorkInProgressHook</span>(); <span class=\"comment\">// hook</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> nextDeps = deps === <span class=\"literal\">undefined</span> ? <span class=\"literal\">null</span> : deps;</span><br><span class=\"line\">    currentlyRenderingFiber$<span class=\"number\">1.</span>flags |= fiberFlags;</span><br><span class=\"line\">    hook.<span class=\"property\">memoizedState</span> = <span class=\"title function_\">pushEffect</span>(<span class=\"title class_\">HasEffect</span> | hookFlags, create, <span class=\"literal\">undefined</span>, nextDeps);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>hook</code><code>memoizedState</code><code>useState</code><code>useEffect</code><code>create</code><code>deps</code></li>\n</ul>\n<h3 id=\"commitRoot\"><a href=\"#commitRoot\" class=\"headerlink\" title=\"commitRoot\"></a>commitRoot</h3><ul>\n<li><code>commitRoot</code>DOM</li>\n</ul>\n<blockquote>\n<p>invokeGuardedCallback(null, commitBeforeMutationEffects, null);</p>\n</blockquote>\n<ul>\n<li><p><strong><code>invokeGuardedCallback</code>React<code>DEV</code></strong></p>\n</li>\n<li><p><code>flushPassiveEffects</code><code>effect</code></p>\n</li>\n</ul>\n<p></p>\n<p><img src=\"/44.png\" alt=\"44\"></p>\n<h3 id=\"commitBeforeMutationEffects\"><a href=\"#commitBeforeMutationEffects\" class=\"headerlink\" title=\"commitBeforeMutationEffects\"></a>commitBeforeMutationEffects</h3><ul>\n<li>debug<code>flushPassiveEffects</code>React<ul>\n<li><code>flushPassiveEffects</code><code>commitBeforeMutationEffects</code></li>\n<li><code>commitBeforeMutationEffects</code>React</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"flushPassiveEffects\"><a href=\"#flushPassiveEffects\" class=\"headerlink\" title=\"flushPassiveEffects\"></a>flushPassiveEffects</h4><ul>\n<li><code>unMountEffects</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> mountEffects = pendingPassiveHookEffectsMount; <span class=\"comment\">// effectsmounteffects</span></span><br><span class=\"line\">pendingPassiveHookEffectsMount = [];</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> _i = <span class=\"number\">0</span>; _i &lt; mountEffects.<span class=\"property\">length</span>; _i += <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// effectseffectseffectsfiber</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> _effect2 = mountEffects[_i];</span><br><span class=\"line\">    <span class=\"keyword\">var</span> _fiber = mountEffects[_i + <span class=\"number\">1</span>];</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"title function_\">setCurrentFiber</span>(_fiber); <span class=\"comment\">// fiber</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"comment\">// invokePassiveEffectCreateeffects</span></span><br><span class=\"line\">            <span class=\"title function_\">invokeGuardedCallback</span>(<span class=\"literal\">null</span>, invokePassiveEffectCreate, <span class=\"literal\">null</span>, _effect2);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"title function_\">hasCaughtError</span>()) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// ...</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"title function_\">resetCurrentFiber</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>syncQueue</code><code>useEffect</code><code>state</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">flushSyncCallbackQueue</span>(); </span><br><span class=\"line\"><span class=\"comment\">// flushSyncCallbackQueue()</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"invokePassiveEffectCreate\"><a href=\"#invokePassiveEffectCreate\" class=\"headerlink\" title=\"invokePassiveEffectCreate\"></a>invokePassiveEffectCreate</h4><ul>\n<li><code>effects</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">invokePassiveEffectCreate</span>(<span class=\"params\">effect</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> create = effect.<span class=\"property\">create</span>;</span><br><span class=\"line\">    effect.<span class=\"property\">destroy</span> = <span class=\"title function_\">create</span>();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// effects</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">tag</span>: <span class=\"number\">5</span>, <span class=\"comment\">// hook</span></span><br><span class=\"line\">  <span class=\"attr\">create</span>: <span class=\"function\">() =&gt;</span> &#123; <span class=\"comment\">// effect</span></span><br><span class=\"line\">    <span class=\"keyword\">debugger</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;effect!&quot;</span>);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">destroy</span>: <span class=\"literal\">undefined</span>, <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"attr\">deps</span>: <span class=\"literal\">null</span>, <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"attr\">next</span>: [<span class=\"title class_\">Circular</span>], <span class=\"comment\">// effect</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"commitMutationEffects\"><a href=\"#commitMutationEffects\" class=\"headerlink\" title=\"commitMutationEffects\"></a>commitMutationEffects</h3><ul>\n<li><strong>ReactFiberDOM<code>effects</code></strong></li>\n</ul>\n<h4 id=\"commitHookEffectListUnmount\"><a href=\"#commitHookEffectListUnmount\" class=\"headerlink\" title=\"commitHookEffectListUnmount\"></a>commitHookEffectListUnmount</h4><ul>\n<li><strong><code>effects</code></strong></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">do</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> ((effect.<span class=\"property\">tag</span> &amp; tag) === tag) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// Unmount</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> destroy = effect.<span class=\"property\">destroy</span>; <span class=\"comment\">// effect </span></span><br><span class=\"line\">        effect.<span class=\"property\">destroy</span> = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (destroy !== <span class=\"literal\">undefined</span>) &#123;</span><br><span class=\"line\">          <span class=\"title function_\">destroy</span>(); <span class=\"comment\">// </span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      effect = effect.<span class=\"property\">next</span>; <span class=\"comment\">// effect</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">while</span> (effect !== firstEffect);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"commitLayoutEffects\"><a href=\"#commitLayoutEffects\" class=\"headerlink\" title=\"commitLayoutEffects\"></a>commitLayoutEffects</h3><ul>\n<li>DOM</li>\n</ul>\n<blockquote>\n<p>invokeGuardedCallback(null, commitLayoutEffects, null, root, lanes);</p>\n</blockquote>\n<h4 id=\"commitLifeCycles\"><a href=\"#commitLifeCycles\" class=\"headerlink\" title=\"commitLifeCycles\"></a>commitLifeCycles</h4><ul>\n<li><p>effects</p>\n</li>\n<li><p><code>commitHookEffectListMount</code><code>effect</code></p>\n</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">if</span> ((effect.<span class=\"property\">tag</span> &amp; tag) === tag) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// Mount</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> create = effect.<span class=\"property\">create</span>;</span><br><span class=\"line\">    effect.<span class=\"property\">destroy</span> = <span class=\"title function_\">create</span>();</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> destroy = effect.<span class=\"property\">destroy</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (destroy !== <span class=\"literal\">undefined</span> &amp;&amp; <span class=\"keyword\">typeof</span> destroy !== <span class=\"string\">&#x27;function&#x27;</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// ... destroywarn</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"schedulePassiveEffects\"><a href=\"#schedulePassiveEffects\" class=\"headerlink\" title=\"schedulePassiveEffects\"></a>schedulePassiveEffects</h4><ul>\n<li><code>schedulePassiveEffects</code><code>effect</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">do</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> _effect = effect,</span><br><span class=\"line\">        next = _effect.<span class=\"property\">next</span>,</span><br><span class=\"line\">        tag = _effect.<span class=\"property\">tag</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ((tag &amp; <span class=\"title class_\">Passive</span>$<span class=\"number\">1</span>) !== <span class=\"title class_\">NoFlags</span>$<span class=\"number\">1</span> &amp;&amp; (tag &amp; <span class=\"title class_\">HasEffect</span>) !== <span class=\"title class_\">NoFlags</span>$<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// fiberhookpendingPassiveHookEffectsUnmountpendingPassiveHookEffectsMount</span></span><br><span class=\"line\">        <span class=\"comment\">// pendingPassiveHookEffectsMountflushPassiveEffectseffect</span></span><br><span class=\"line\">        <span class=\"title function_\">enqueuePendingPassiveHookEffectUnmount</span>(finishedWork, effect);</span><br><span class=\"line\">        <span class=\"title function_\">enqueuePendingPassiveHookEffectMount</span>(finishedWork, effect);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    effect = next;</span><br><span class=\"line\">&#125; <span class=\"keyword\">while</span> (effect !== firstEffect);</span><br></pre></td></tr></table></figure>\n\n\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>React<code>17.0.2</code></li>\n<li>Debug Demo </li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">Test</span> = (<span class=\"params\"></span>) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [num, setNum] = <span class=\"title function_\">useState</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"title function_\">useEffect</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;effect!&quot;</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">button</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">      <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-xml\">        setNum((prev) =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"language-xml\">          return prev + 1;</span></span><br><span class=\"line\"><span class=\"language-xml\">        &#125;);</span></span><br><span class=\"line\"><span class=\"language-xml\">      &#125;&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">    &gt;</span></span><br><span class=\"line\"><span class=\"language-xml\">      &#123;num&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>React Hook</strong></li>\n</ul>\n<h2 id=\"Hook\"><a href=\"#Hook\" class=\"headerlink\" title=\"Hook\"></a>Hook</h2><h3 id=\"beginWork\"><a href=\"#beginWork\" class=\"headerlink\" title=\"beginWork\"></a>beginWork</h3><ul>\n<li><code>rootContainer</code>lanes<code>&lt;Test /&gt;</code>FiberDEMO<strong><code>beginWork</code>rootFiber<code>&lt;Test /&gt;</code>Fiber</strong></li>\n</ul>\n<p><code>&lt;Test /&gt;</code>Fiber</p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">tag</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">  <span class=\"attr\">key</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"comment\">/*webpackTestJSXjsxDev*/</span></span><br><span class=\"line\">  <span class=\"attr\">elementType</span>: <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"title function_\">_s</span>();</span><br><span class=\"line\">    <span class=\"keyword\">const</span> [num, setNum] = (<span class=\"number\">0</span>,react__WEBPACK_IMPORTED_MODULE_0__.<span class=\"property\">useState</span>)(<span class=\"number\">0</span>);</span><br><span class=\"line\">    (<span class=\"number\">0</span>,react__WEBPACK_IMPORTED_MODULE_0__.<span class=\"property\">useEffect</span>)(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">debugger</span>;</span><br><span class=\"line\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;effect!&quot;</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"comment\">/*#__PURE__*/</span>(<span class=\"number\">0</span>,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_4__.<span class=\"property\">jsxDEV</span>)(<span class=\"string\">&quot;button&quot;</span>, &#123;</span><br><span class=\"line\">      <span class=\"attr\">onClick</span>: <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">debugger</span>;</span><br><span class=\"line\">        <span class=\"title function_\">setNum</span>(<span class=\"function\"><span class=\"params\">prev</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> prev + <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      <span class=\"attr\">children</span>: num</span><br><span class=\"line\">    &#125;, <span class=\"built_in\">void</span> <span class=\"number\">0</span>, <span class=\"literal\">false</span>, &#123;</span><br><span class=\"line\">      <span class=\"attr\">fileName</span>: _jsxFileName,</span><br><span class=\"line\">      <span class=\"attr\">lineNumber</span>: <span class=\"number\">59</span>,</span><br><span class=\"line\">      <span class=\"attr\">columnNumber</span>: <span class=\"number\">5</span></span><br><span class=\"line\">    &#125;, <span class=\"literal\">undefined</span>);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">type</span>: <span class=\"function\">() =&gt;</span> &#123;<span class=\"comment\">/*webpackTestelementType*/</span>&#125;,</span><br><span class=\"line\">  <span class=\"attr\">stateNode</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">return</span>: &#123;<span class=\"comment\">/*rootFiber*/</span>&#125;,</span><br><span class=\"line\">  <span class=\"attr\">child</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">sibling</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">index</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">  <span class=\"attr\">ref</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">pendingProps</span>: &#123;&#125;,</span><br><span class=\"line\">  <span class=\"attr\">memoizedProps</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">updateQueue</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">memoizedState</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">dependencies</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">mode</span>: <span class=\"number\">8</span>,</span><br><span class=\"line\">  <span class=\"attr\">flags</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">  <span class=\"attr\">nextEffect</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">firstEffect</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">lastEffect</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">alternate</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><img src=\"/11.png\" alt=\"1\"></p>\n<ul>\n<li>Fibertag2React<code>class</code><code>function</code></li>\n</ul>\n<blockquote>\n<p>var IndeterminateComponent &#x3D; 2; <em>&#x2F;&#x2F; Before we know whether it is function or class</em></p>\n</blockquote>\n<h3 id=\"renderWithHooks\"><a href=\"#renderWithHooks\" class=\"headerlink\" title=\"renderWithHooks\"></a>renderWithHooks</h3><ul>\n<li>tag2React<code>class</code><code>function</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"title class_\">Component</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span> &amp;&amp; <span class=\"keyword\">typeof</span> <span class=\"title class_\">Component</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">render</span> === <span class=\"string\">&#x27;function&#x27;</span>)&#123;</span><br><span class=\"line\">    <span class=\"comment\">//class...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Fiber</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title class_\">ReactCurrentOwner</span>$<span class=\"number\">1.</span>current = workInProgress; <span class=\"comment\">// workInProgress Fiber</span></span><br><span class=\"line\">value = <span class=\"title function_\">renderWithHooks</span>(<span class=\"literal\">null</span>, workInProgress, <span class=\"title class_\">Component</span>, props, context, renderLanes);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>hook<code>throwError</code>hook<code>function</code></strong></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title class_\">ReactCurrentDispatcher</span>$<span class=\"number\">1.</span>current = <span class=\"title class_\">HooksDispatcherOnMountInDEV</span>;</span><br><span class=\"line\"><span class=\"comment\">// HooksDispatchOnMountInDEVReacthookupdate</span></span><br></pre></td></tr></table></figure>\n\n<p>hook</p>\n<p><img src=\"/22.png\" alt=\"22\"></p>\n<ul>\n<li><code>function</code><code>child</code></li>\n</ul>\n<p></p>\n<p><img src=\"/33.png\" alt=\"33\"></p>\n<h3 id=\"useState\"><a href=\"#useState\" class=\"headerlink\" title=\"useState\"></a>useState</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// useState </span></span><br><span class=\"line\"><span class=\"attr\">useState</span>: <span class=\"keyword\">function</span> (<span class=\"params\">initialState</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> prevDispatcher = <span class=\"title class_\">ReactCurrentDispatcher</span>$<span class=\"number\">1.</span>current; <span class=\"comment\">// Hook</span></span><br><span class=\"line\">    <span class=\"title class_\">ReactCurrentDispatcher</span>$<span class=\"number\">1.</span>current = <span class=\"title class_\">InvalidNestedHooksDispatcherOnMountInDEV</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"title function_\">mountState</span>(initialState); <span class=\"comment\">// useState</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">        <span class=\"title class_\">ReactCurrentDispatcher</span>$<span class=\"number\">1.</span>current = prevDispatcher;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>initialState</code><code>mountState</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//mountState </span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">mountState</span>(<span class=\"params\">initialState</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> hook = <span class=\"title function_\">mountWorkInProgressHook</span>(); <span class=\"comment\">// hook</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> initialState === <span class=\"string\">&#x27;function&#x27;</span>) &#123; <span class=\"comment\">// initialState</span></span><br><span class=\"line\">        <span class=\"comment\">// $FlowFixMe: Flow doesn&#x27;t like mixed types</span></span><br><span class=\"line\">        initialState = <span class=\"title function_\">initialState</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    hook.<span class=\"property\">memoizedState</span> = hook.<span class=\"property\">baseState</span> = initialState; <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> queue = hook.<span class=\"property\">queue</span> = &#123;</span><br><span class=\"line\">        <span class=\"attr\">pending</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">        <span class=\"attr\">dispatch</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">        <span class=\"attr\">lastRenderedReducer</span>: basicStateReducer, <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"attr\">lastRenderedState</span>: initialState</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> dispatch = queue.<span class=\"property\">dispatch</span> = dispatchAction.<span class=\"title function_\">bind</span>(<span class=\"literal\">null</span>, currentlyRenderingFiber$<span class=\"number\">1</span>, queue); <span class=\"comment\">// useState2</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> [hook.<span class=\"property\">memoizedState</span>, dispatch]; <span class=\"comment\">//  const [val,setVal] = useState(0); </span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>hook<code>state</code></p>\n</li>\n<li><p><strong><code>dispatch</code>Fiber<code>lastRenderedReducer</code><code>basicStateReducer</code><code>scheduleUpdateOnFiber</code></strong></p>\n</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">dispatchAction</span>(<span class=\"params\">fiber, queue, action</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> currentState = queue.<span class=\"property\">lastRenderedState</span>; <span class=\"comment\">// state</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> eagerState = <span class=\"title function_\">lastRenderedReducer</span>(currentState, action); <span class=\"comment\">// state</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// update</span></span><br><span class=\"line\">        update.<span class=\"property\">eagerReducer</span> = lastRenderedReducer;</span><br><span class=\"line\">        update.<span class=\"property\">eagerState</span> = eagerState;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (error) &#123;<span class=\"comment\">// Suppress the error. It will throw again in the render phase.</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"title class_\">ReactCurrentDispatcher</span>$<span class=\"number\">1.</span>current = prevDispatcher;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t<span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"title function_\">scheduleUpdateOnFiber</span>(fiber, lane, eventTime);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong><code>action</code><code>lastRenderReducer</code>state</strong></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">basicStateReducer</span>(<span class=\"params\">state, action</span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// $FlowFixMe: Flow doesn&#x27;t like mixed types</span></span><br><span class=\"line\">  <span class=\"comment\">// statestate</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">typeof</span> action === <span class=\"string\">&#x27;function&#x27;</span> ? <span class=\"title function_\">action</span>(state) : action;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"useEffect\"><a href=\"#useEffect\" class=\"headerlink\" title=\"useEffect\"></a>useEffect</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// useEffect</span></span><br><span class=\"line\"><span class=\"attr\">useEffect</span>: <span class=\"keyword\">function</span> (<span class=\"params\">create, deps</span>) &#123;</span><br><span class=\"line\">    currentHookNameInDev = <span class=\"string\">&#x27;useEffect&#x27;</span>;</span><br><span class=\"line\">    <span class=\"title function_\">mountHookTypesDev</span>(); <span class=\"comment\">//  hookName  hookTpyeDev</span></span><br><span class=\"line\">    <span class=\"title function_\">checkDepsAreArrayDev</span>(deps); <span class=\"comment\">// useEffectdeps</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"title function_\">mountEffect</span>(create, deps); <span class=\"comment\">// useEffect</span></span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>mountEffect</code><code>jest</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">mountEffectImpl</span>(<span class=\"params\">fiberFlags, hookFlags, create, deps</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// createeffect</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> hook = <span class=\"title function_\">mountWorkInProgressHook</span>(); <span class=\"comment\">// hook</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> nextDeps = deps === <span class=\"literal\">undefined</span> ? <span class=\"literal\">null</span> : deps;</span><br><span class=\"line\">    currentlyRenderingFiber$<span class=\"number\">1.</span>flags |= fiberFlags;</span><br><span class=\"line\">    hook.<span class=\"property\">memoizedState</span> = <span class=\"title function_\">pushEffect</span>(<span class=\"title class_\">HasEffect</span> | hookFlags, create, <span class=\"literal\">undefined</span>, nextDeps);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>hook</code><code>memoizedState</code><code>useState</code><code>useEffect</code><code>create</code><code>deps</code></li>\n</ul>\n<h3 id=\"commitRoot\"><a href=\"#commitRoot\" class=\"headerlink\" title=\"commitRoot\"></a>commitRoot</h3><ul>\n<li><code>commitRoot</code>DOM</li>\n</ul>\n<blockquote>\n<p>invokeGuardedCallback(null, commitBeforeMutationEffects, null);</p>\n</blockquote>\n<ul>\n<li><p><strong><code>invokeGuardedCallback</code>React<code>DEV</code></strong></p>\n</li>\n<li><p><code>flushPassiveEffects</code><code>effect</code></p>\n</li>\n</ul>\n<p></p>\n<p><img src=\"/44.png\" alt=\"44\"></p>\n<h3 id=\"commitBeforeMutationEffects\"><a href=\"#commitBeforeMutationEffects\" class=\"headerlink\" title=\"commitBeforeMutationEffects\"></a>commitBeforeMutationEffects</h3><ul>\n<li>debug<code>flushPassiveEffects</code>React<ul>\n<li><code>flushPassiveEffects</code><code>commitBeforeMutationEffects</code></li>\n<li><code>commitBeforeMutationEffects</code>React</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"flushPassiveEffects\"><a href=\"#flushPassiveEffects\" class=\"headerlink\" title=\"flushPassiveEffects\"></a>flushPassiveEffects</h4><ul>\n<li><code>unMountEffects</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> mountEffects = pendingPassiveHookEffectsMount; <span class=\"comment\">// effectsmounteffects</span></span><br><span class=\"line\">pendingPassiveHookEffectsMount = [];</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> _i = <span class=\"number\">0</span>; _i &lt; mountEffects.<span class=\"property\">length</span>; _i += <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// effectseffectseffectsfiber</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> _effect2 = mountEffects[_i];</span><br><span class=\"line\">    <span class=\"keyword\">var</span> _fiber = mountEffects[_i + <span class=\"number\">1</span>];</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"title function_\">setCurrentFiber</span>(_fiber); <span class=\"comment\">// fiber</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"comment\">// invokePassiveEffectCreateeffects</span></span><br><span class=\"line\">            <span class=\"title function_\">invokeGuardedCallback</span>(<span class=\"literal\">null</span>, invokePassiveEffectCreate, <span class=\"literal\">null</span>, _effect2);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"title function_\">hasCaughtError</span>()) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// ...</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"title function_\">resetCurrentFiber</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>syncQueue</code><code>useEffect</code><code>state</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">flushSyncCallbackQueue</span>(); </span><br><span class=\"line\"><span class=\"comment\">// flushSyncCallbackQueue()</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"invokePassiveEffectCreate\"><a href=\"#invokePassiveEffectCreate\" class=\"headerlink\" title=\"invokePassiveEffectCreate\"></a>invokePassiveEffectCreate</h4><ul>\n<li><code>effects</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">invokePassiveEffectCreate</span>(<span class=\"params\">effect</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> create = effect.<span class=\"property\">create</span>;</span><br><span class=\"line\">    effect.<span class=\"property\">destroy</span> = <span class=\"title function_\">create</span>();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// effects</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">tag</span>: <span class=\"number\">5</span>, <span class=\"comment\">// hook</span></span><br><span class=\"line\">  <span class=\"attr\">create</span>: <span class=\"function\">() =&gt;</span> &#123; <span class=\"comment\">// effect</span></span><br><span class=\"line\">    <span class=\"keyword\">debugger</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;effect!&quot;</span>);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">destroy</span>: <span class=\"literal\">undefined</span>, <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"attr\">deps</span>: <span class=\"literal\">null</span>, <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"attr\">next</span>: [<span class=\"title class_\">Circular</span>], <span class=\"comment\">// effect</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"commitMutationEffects\"><a href=\"#commitMutationEffects\" class=\"headerlink\" title=\"commitMutationEffects\"></a>commitMutationEffects</h3><ul>\n<li><strong>ReactFiberDOM<code>effects</code></strong></li>\n</ul>\n<h4 id=\"commitHookEffectListUnmount\"><a href=\"#commitHookEffectListUnmount\" class=\"headerlink\" title=\"commitHookEffectListUnmount\"></a>commitHookEffectListUnmount</h4><ul>\n<li><strong><code>effects</code></strong></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">do</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> ((effect.<span class=\"property\">tag</span> &amp; tag) === tag) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// Unmount</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> destroy = effect.<span class=\"property\">destroy</span>; <span class=\"comment\">// effect </span></span><br><span class=\"line\">        effect.<span class=\"property\">destroy</span> = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (destroy !== <span class=\"literal\">undefined</span>) &#123;</span><br><span class=\"line\">          <span class=\"title function_\">destroy</span>(); <span class=\"comment\">// </span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      effect = effect.<span class=\"property\">next</span>; <span class=\"comment\">// effect</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">while</span> (effect !== firstEffect);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"commitLayoutEffects\"><a href=\"#commitLayoutEffects\" class=\"headerlink\" title=\"commitLayoutEffects\"></a>commitLayoutEffects</h3><ul>\n<li>DOM</li>\n</ul>\n<blockquote>\n<p>invokeGuardedCallback(null, commitLayoutEffects, null, root, lanes);</p>\n</blockquote>\n<h4 id=\"commitLifeCycles\"><a href=\"#commitLifeCycles\" class=\"headerlink\" title=\"commitLifeCycles\"></a>commitLifeCycles</h4><ul>\n<li><p>effects</p>\n</li>\n<li><p><code>commitHookEffectListMount</code><code>effect</code></p>\n</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">if</span> ((effect.<span class=\"property\">tag</span> &amp; tag) === tag) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// Mount</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> create = effect.<span class=\"property\">create</span>;</span><br><span class=\"line\">    effect.<span class=\"property\">destroy</span> = <span class=\"title function_\">create</span>();</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> destroy = effect.<span class=\"property\">destroy</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (destroy !== <span class=\"literal\">undefined</span> &amp;&amp; <span class=\"keyword\">typeof</span> destroy !== <span class=\"string\">&#x27;function&#x27;</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// ... destroywarn</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"schedulePassiveEffects\"><a href=\"#schedulePassiveEffects\" class=\"headerlink\" title=\"schedulePassiveEffects\"></a>schedulePassiveEffects</h4><ul>\n<li><code>schedulePassiveEffects</code><code>effect</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">do</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> _effect = effect,</span><br><span class=\"line\">        next = _effect.<span class=\"property\">next</span>,</span><br><span class=\"line\">        tag = _effect.<span class=\"property\">tag</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ((tag &amp; <span class=\"title class_\">Passive</span>$<span class=\"number\">1</span>) !== <span class=\"title class_\">NoFlags</span>$<span class=\"number\">1</span> &amp;&amp; (tag &amp; <span class=\"title class_\">HasEffect</span>) !== <span class=\"title class_\">NoFlags</span>$<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// fiberhookpendingPassiveHookEffectsUnmountpendingPassiveHookEffectsMount</span></span><br><span class=\"line\">        <span class=\"comment\">// pendingPassiveHookEffectsMountflushPassiveEffectseffect</span></span><br><span class=\"line\">        <span class=\"title function_\">enqueuePendingPassiveHookEffectUnmount</span>(finishedWork, effect);</span><br><span class=\"line\">        <span class=\"title function_\">enqueuePendingPassiveHookEffectMount</span>(finishedWork, effect);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    effect = next;</span><br><span class=\"line\">&#125; <span class=\"keyword\">while</span> (effect !== firstEffect);</span><br></pre></td></tr></table></figure>\n\n\n"},{"title":"ReactSourceDiffDebug","date":"2022-04-05T23:28:32.000Z","description":"React Diff Debug","top_img":"https://pic2.zhimg.com/v2-8c3223d9228013e069df6a302e81c38f_720w.png?source=d16d100b","cover":"/img/cover_1.webp","_content":"## \n\n- React`17.0.2`\n\n- DEMO\n\n```tsx\nconst Test = () => {\n  debugger;\n  const [list, setList] = useState<ListItemType[]>([\n    { text: \"22 a\", key: \"a\" },\n    { text: \"13 b\", key: \"b\" },\n    { text: \"21 c\", key: \"c\" },\n    { text: \"12 d\", key: \"d\" },\n    { text: \"32 e\", key: \"e\" },\n    { text: \"44 f\", key: \"f\" },\n  ]);\n\n  return (\n    <>\n      <ul>\n        {list.map((item) => {\n          return item ? <li key={item.key}>{item.text}</li> : null;\n        })}\n      </ul>\n      <button\n        onClick={() => {\n          debugger;\n          setList((prev) => {\n            let newArr: ListItemType[] = [];\n            // li\n            prev.splice(Math.floor(Math.random() * 5), 1);\n            newArr.push(...prev.splice(Math.floor(Math.random() * 4), 1));\n            newArr = newArr.concat(prev);\n            return newArr;\n          });\n        }}\n      >\n        random all\n      </button>\n    </>\n  );\n};\n```\n\n## Diff\n\n### Debug\n\n- ****`random all``state``performSyncWorkOnRoot`Debug\n- **`Test``hook``state`Fiber**\n\n### reconcileChildren\n\n- `beginWork``ul`**`children`Diff**\n\n```typescript\nfunction reconcileChildren(current, workInProgress, nextChildren, renderLanes) {\n    // currentFiberworkInProcess.alternate\n    if (current === null) {\n        // \n        workInProgress.child = mountChildFibers(workInProgress, null, nextChildren, renderLanes);\n    } else {\n        // Fiber\n        workInProgress.child = reconcileChildFibers(workInProgress, current.child, nextChildren, renderLanes);\n    }\n}\n```\n\n- `reconcileChildFibers``child``Fiber`** React DOMDOM Diff**\n\n```typescript\nfunction reconcileChildFibers(returnFiber, currentFirstChild, newChild, lanes) {\n    var isObject = typeof newChild === 'object' && newChild !== null;\n    if (isObject) {\n        switch (newChild.$$typeof) {\n            // child\n            case REACT_ELEMENT_TYPE:\n                return placeSingleChild(reconcileSingleElement(returnFiber, currentFirstChild, newChild, lanes));\n\t\t   // ......... Fragment\n        }\n    }\n\t// child\n    if (typeof newChild === 'string' || typeof newChild === 'number') {\n        return placeSingleChild(reconcileSingleTextNode(returnFiber, currentFirstChild, '' + newChild, lanes));\n    }\n\t// DOM Diff\n    if (isArray$1(newChild)) {\n        return reconcileChildrenArray(returnFiber, currentFirstChild, newChild, lanes);\n    }\n\t// ...........\n    return deleteRemainingChildren(returnFiber, currentFirstChild);\n}\n```\n\n### reconcileChildrenArray\n\n- **`reconcileChildrenArray``childs`DOM**\n- \n\n```typescript\nfunction reconcileChildrenArray(returnFiber, currentFirstChild, newChildren, lanes) {\n\t// childkey\n    // \n\n    var resultingFirstChild = null; // FiberFiber\n    var previousNewFiber = null; // newFiber\n    var oldFiber = currentFirstChild; // oldFiber\n    // ReactDOM\n    // oldFiberlastPlacedIndex\n    //  placeChild \n    var lastPlacedIndex = 0; // newFiber\n    var newIdx = 0; // Child\n    var nextOldFiber = null; // oldFiber\n\t// oldChildnewChild\n    // oldChild[0]newChild[0]\n    for (; oldFiber !== null && newIdx < newChildren.length; newIdx++) {\n        if (oldFiber.index > newIdx) { // ...\n            nextOldFiber = oldFiber;\n            oldFiber = null;\n        } else {\n\t\t   // oldChild[0]siblingoldChild[1]Fiber\n            nextOldFiber = oldFiber.sibling;\n        }\n\t    // Fiber\n        // updateSlotkey\n        // oldFibernewChild\n        // newFibernewFibertextNodenewFiberFragment\n        var newFiber = updateSlot(returnFiber, oldFiber, newChildren[newIdx], lanes);\n\t    //newFibernull\n        if (newFiber === null) {\n            if (oldFiber === null) {\n                oldFiber = nextOldFiber;\n            }\n            break;\n        }\n\t    // Fiber\n        if (shouldTrackSideEffects) { // shouldTrackSideEffetcstrue\n            if (oldFiber && newFiber.alternate === null) {\n                deleteChild(returnFiber, oldFiber);\n            }\n        }\n\t    //lastPlacedIndex\n        lastPlacedIndex = placeChild(newFiber, lastPlacedIndex, newIdx);\n\n        // newFiberFibernewFibersiblingnewFiber\n        if (previousNewFiber === null) { // \n            resultingFirstChild = newFiber;\n        } else {\n            previousNewFiber.sibling = newFiber;\n        }\n\t   // \n        previousNewFiber = newFiber;\n        oldFiber = nextOldFiber;\n    }\n\n    if (newIdx === newChildren.length) {\n        //.... ChildoldFiberDOMDOM commitRoot \n    }\n\n    if (oldFiber === null) {\n        //.... ChildnewFiberFiberFiber\n    }\n    // FibersetkeyFiber\n    var existingChildren = mapRemainingChildren(returnFiber, oldFiber);\n\t// newChildsetkeyFiber\n    for (; newIdx < newChildren.length; newIdx++) {\n        // updateFromMap mapkeyFiber\n        var _newFiber2 = updateFromMap(existingChildren, returnFiber, newIdx, newChildren[newIdx], lanes);\n\t    // mapoldFiber\n        if (_newFiber2 !== null) {\n            if (shouldTrackSideEffects) {\n                if (_newFiber2.alternate !== null) {\n                    existingChildren.delete(_newFiber2.key === null ? newIdx : _newFiber2.key);\n                }\n            }\n\t\t   // lastPlacedIndex\n            lastPlacedIndex = placeChild(_newFiber2, lastPlacedIndex, newIdx);\n\t\t  // \n            if (previousNewFiber === null) {\n                resultingFirstChild = _newFiber2;\n            } else {\n                previousNewFiber.sibling = _newFiber2;\n            }\n\n            previousNewFiber = _newFiber2;\n        }\n    }\n\t// ChildFiber\n    if (shouldTrackSideEffects) {\n        existingChildren.forEach(function (child) {\n            return deleteChild(returnFiber, child);\n        });\n    }\n\n    return resultingFirstChild;\n}\n```\n\n- ****\n  - ****\n  - **`Set`**\n\n### placeChild\n\n- **`newFiber``oldFiber``index``newFiber`DOM**\n- \n\n```typescript\nfunction placeChild(newFiber, lastPlacedIndex, newIndex) {\n    newFiber.index = newIndex; // newFiberindex\n    if (!shouldTrackSideEffects) { // \n        return lastPlacedIndex;\n    }\n    var current = newFiber.alternate; // oldFiber\n    if (current !== null) {\n        var oldIndex = current.index; // oldFiber\n        if (oldIndex < lastPlacedIndex) {\n            // DOM\n            newFiber.flags = Placement; // \n            return lastPlacedIndex;\n        } else {\n            // lastPlacedIndex\n            return oldIndex; // DOM(ReactDOMDiff)DOMFiberindex\n        }\n    } else {\n        // \n        newFiber.flags = Placement;\n        return lastPlacedIndex;\n    }\n}\n```\n\n### commitMutationEffects\n\n- **`commitRoot`DOM`Diff`FiberDOM**\n- **`nextEffect`Fiber......**\n- \n\n```typescript\nfunction commitMutationEffects(root, renderPriorityLevel) {\n  while (nextEffect !== null) {\n    setCurrentFiber(nextEffect); // nextEffect Fiber\n    var flags = nextEffect.flags; // flags FiberplaceChild\n    var primaryFlags = flags & (Placement | Update | Deletion | Hydrating); // flags\n    switch (primaryFlags) {\n      case Placement:\n        {\n          commitPlacement(nextEffect); // \n          nextEffect.flags &= ~Placement;\n          break;\n        }\n      case PlacementAndUpdate:\n        // ...\n      case Hydrating:\n       \t// ...\n      case HydratingAndUpdate:\n        // ...\n      case Update:\n        // ...\n      case Deletion:\n        // ...\n    }\n    resetCurrentFiber();\n    nextEffect = nextEffect.nextEffect; // Fiber\n  }\n}\n```\n\n### commitPlacement\n\n- **`commitPlacement`DOMDOM**\n- \n\n```javascript\nfunction commitPlacement(finishedWork) {\n  var parentFiber = getHostParentFiber(finishedWork); // DOMDEMO ul \n  var parent;\n  var isContainer;\n  var parentStateNode = parentFiber.stateNode; // DOM\n\n  switch (parentFiber.tag) { //\n    case HostComponent: // DEMO\n      parent = parentStateNode;\n      isContainer = false;\n      break;\n    case HostRoot:\n      //...\n    case HostPortal:\n      //...\n    case FundamentalComponent:\n      //...\n    default:\n      // ... \n  }\n\n  var before = getHostSibling(finishedWork); // FibersiblingflagsPlacement()\n  if (isContainer) {\n    insertOrAppendPlacementNodeIntoContainer(finishedWork, before, parent);\n  } else {\n    // DEMO\n    insertOrAppendPlacementNode(finishedWork, before, parent);\n  }\n}\n```\n\n- **`insertOrAppendPlacementNode``before`**\n  - **`before``parent.insertBefore(current,before)``current``before`**\n  - **`before``parent.appendChild(current)`**\n\n\n","source":"_posts/ReactSourceDiffDebug.md","raw":"---\ntitle: ReactSourceDiffDebug\ndate: 2022-04-06 07:28:32\ntags:\n- React\n- Diff\ncategories:\n- React\ndescription: React Diff Debug\ntop_img: https://pic2.zhimg.com/v2-8c3223d9228013e069df6a302e81c38f_720w.png?source=d16d100b\ncover: /img/cover_1.webp\n\n---\n## \n\n- React`17.0.2`\n\n- DEMO\n\n```tsx\nconst Test = () => {\n  debugger;\n  const [list, setList] = useState<ListItemType[]>([\n    { text: \"22 a\", key: \"a\" },\n    { text: \"13 b\", key: \"b\" },\n    { text: \"21 c\", key: \"c\" },\n    { text: \"12 d\", key: \"d\" },\n    { text: \"32 e\", key: \"e\" },\n    { text: \"44 f\", key: \"f\" },\n  ]);\n\n  return (\n    <>\n      <ul>\n        {list.map((item) => {\n          return item ? <li key={item.key}>{item.text}</li> : null;\n        })}\n      </ul>\n      <button\n        onClick={() => {\n          debugger;\n          setList((prev) => {\n            let newArr: ListItemType[] = [];\n            // li\n            prev.splice(Math.floor(Math.random() * 5), 1);\n            newArr.push(...prev.splice(Math.floor(Math.random() * 4), 1));\n            newArr = newArr.concat(prev);\n            return newArr;\n          });\n        }}\n      >\n        random all\n      </button>\n    </>\n  );\n};\n```\n\n## Diff\n\n### Debug\n\n- ****`random all``state``performSyncWorkOnRoot`Debug\n- **`Test``hook``state`Fiber**\n\n### reconcileChildren\n\n- `beginWork``ul`**`children`Diff**\n\n```typescript\nfunction reconcileChildren(current, workInProgress, nextChildren, renderLanes) {\n    // currentFiberworkInProcess.alternate\n    if (current === null) {\n        // \n        workInProgress.child = mountChildFibers(workInProgress, null, nextChildren, renderLanes);\n    } else {\n        // Fiber\n        workInProgress.child = reconcileChildFibers(workInProgress, current.child, nextChildren, renderLanes);\n    }\n}\n```\n\n- `reconcileChildFibers``child``Fiber`** React DOMDOM Diff**\n\n```typescript\nfunction reconcileChildFibers(returnFiber, currentFirstChild, newChild, lanes) {\n    var isObject = typeof newChild === 'object' && newChild !== null;\n    if (isObject) {\n        switch (newChild.$$typeof) {\n            // child\n            case REACT_ELEMENT_TYPE:\n                return placeSingleChild(reconcileSingleElement(returnFiber, currentFirstChild, newChild, lanes));\n\t\t   // ......... Fragment\n        }\n    }\n\t// child\n    if (typeof newChild === 'string' || typeof newChild === 'number') {\n        return placeSingleChild(reconcileSingleTextNode(returnFiber, currentFirstChild, '' + newChild, lanes));\n    }\n\t// DOM Diff\n    if (isArray$1(newChild)) {\n        return reconcileChildrenArray(returnFiber, currentFirstChild, newChild, lanes);\n    }\n\t// ...........\n    return deleteRemainingChildren(returnFiber, currentFirstChild);\n}\n```\n\n### reconcileChildrenArray\n\n- **`reconcileChildrenArray``childs`DOM**\n- \n\n```typescript\nfunction reconcileChildrenArray(returnFiber, currentFirstChild, newChildren, lanes) {\n\t// childkey\n    // \n\n    var resultingFirstChild = null; // FiberFiber\n    var previousNewFiber = null; // newFiber\n    var oldFiber = currentFirstChild; // oldFiber\n    // ReactDOM\n    // oldFiberlastPlacedIndex\n    //  placeChild \n    var lastPlacedIndex = 0; // newFiber\n    var newIdx = 0; // Child\n    var nextOldFiber = null; // oldFiber\n\t// oldChildnewChild\n    // oldChild[0]newChild[0]\n    for (; oldFiber !== null && newIdx < newChildren.length; newIdx++) {\n        if (oldFiber.index > newIdx) { // ...\n            nextOldFiber = oldFiber;\n            oldFiber = null;\n        } else {\n\t\t   // oldChild[0]siblingoldChild[1]Fiber\n            nextOldFiber = oldFiber.sibling;\n        }\n\t    // Fiber\n        // updateSlotkey\n        // oldFibernewChild\n        // newFibernewFibertextNodenewFiberFragment\n        var newFiber = updateSlot(returnFiber, oldFiber, newChildren[newIdx], lanes);\n\t    //newFibernull\n        if (newFiber === null) {\n            if (oldFiber === null) {\n                oldFiber = nextOldFiber;\n            }\n            break;\n        }\n\t    // Fiber\n        if (shouldTrackSideEffects) { // shouldTrackSideEffetcstrue\n            if (oldFiber && newFiber.alternate === null) {\n                deleteChild(returnFiber, oldFiber);\n            }\n        }\n\t    //lastPlacedIndex\n        lastPlacedIndex = placeChild(newFiber, lastPlacedIndex, newIdx);\n\n        // newFiberFibernewFibersiblingnewFiber\n        if (previousNewFiber === null) { // \n            resultingFirstChild = newFiber;\n        } else {\n            previousNewFiber.sibling = newFiber;\n        }\n\t   // \n        previousNewFiber = newFiber;\n        oldFiber = nextOldFiber;\n    }\n\n    if (newIdx === newChildren.length) {\n        //.... ChildoldFiberDOMDOM commitRoot \n    }\n\n    if (oldFiber === null) {\n        //.... ChildnewFiberFiberFiber\n    }\n    // FibersetkeyFiber\n    var existingChildren = mapRemainingChildren(returnFiber, oldFiber);\n\t// newChildsetkeyFiber\n    for (; newIdx < newChildren.length; newIdx++) {\n        // updateFromMap mapkeyFiber\n        var _newFiber2 = updateFromMap(existingChildren, returnFiber, newIdx, newChildren[newIdx], lanes);\n\t    // mapoldFiber\n        if (_newFiber2 !== null) {\n            if (shouldTrackSideEffects) {\n                if (_newFiber2.alternate !== null) {\n                    existingChildren.delete(_newFiber2.key === null ? newIdx : _newFiber2.key);\n                }\n            }\n\t\t   // lastPlacedIndex\n            lastPlacedIndex = placeChild(_newFiber2, lastPlacedIndex, newIdx);\n\t\t  // \n            if (previousNewFiber === null) {\n                resultingFirstChild = _newFiber2;\n            } else {\n                previousNewFiber.sibling = _newFiber2;\n            }\n\n            previousNewFiber = _newFiber2;\n        }\n    }\n\t// ChildFiber\n    if (shouldTrackSideEffects) {\n        existingChildren.forEach(function (child) {\n            return deleteChild(returnFiber, child);\n        });\n    }\n\n    return resultingFirstChild;\n}\n```\n\n- ****\n  - ****\n  - **`Set`**\n\n### placeChild\n\n- **`newFiber``oldFiber``index``newFiber`DOM**\n- \n\n```typescript\nfunction placeChild(newFiber, lastPlacedIndex, newIndex) {\n    newFiber.index = newIndex; // newFiberindex\n    if (!shouldTrackSideEffects) { // \n        return lastPlacedIndex;\n    }\n    var current = newFiber.alternate; // oldFiber\n    if (current !== null) {\n        var oldIndex = current.index; // oldFiber\n        if (oldIndex < lastPlacedIndex) {\n            // DOM\n            newFiber.flags = Placement; // \n            return lastPlacedIndex;\n        } else {\n            // lastPlacedIndex\n            return oldIndex; // DOM(ReactDOMDiff)DOMFiberindex\n        }\n    } else {\n        // \n        newFiber.flags = Placement;\n        return lastPlacedIndex;\n    }\n}\n```\n\n### commitMutationEffects\n\n- **`commitRoot`DOM`Diff`FiberDOM**\n- **`nextEffect`Fiber......**\n- \n\n```typescript\nfunction commitMutationEffects(root, renderPriorityLevel) {\n  while (nextEffect !== null) {\n    setCurrentFiber(nextEffect); // nextEffect Fiber\n    var flags = nextEffect.flags; // flags FiberplaceChild\n    var primaryFlags = flags & (Placement | Update | Deletion | Hydrating); // flags\n    switch (primaryFlags) {\n      case Placement:\n        {\n          commitPlacement(nextEffect); // \n          nextEffect.flags &= ~Placement;\n          break;\n        }\n      case PlacementAndUpdate:\n        // ...\n      case Hydrating:\n       \t// ...\n      case HydratingAndUpdate:\n        // ...\n      case Update:\n        // ...\n      case Deletion:\n        // ...\n    }\n    resetCurrentFiber();\n    nextEffect = nextEffect.nextEffect; // Fiber\n  }\n}\n```\n\n### commitPlacement\n\n- **`commitPlacement`DOMDOM**\n- \n\n```javascript\nfunction commitPlacement(finishedWork) {\n  var parentFiber = getHostParentFiber(finishedWork); // DOMDEMO ul \n  var parent;\n  var isContainer;\n  var parentStateNode = parentFiber.stateNode; // DOM\n\n  switch (parentFiber.tag) { //\n    case HostComponent: // DEMO\n      parent = parentStateNode;\n      isContainer = false;\n      break;\n    case HostRoot:\n      //...\n    case HostPortal:\n      //...\n    case FundamentalComponent:\n      //...\n    default:\n      // ... \n  }\n\n  var before = getHostSibling(finishedWork); // FibersiblingflagsPlacement()\n  if (isContainer) {\n    insertOrAppendPlacementNodeIntoContainer(finishedWork, before, parent);\n  } else {\n    // DEMO\n    insertOrAppendPlacementNode(finishedWork, before, parent);\n  }\n}\n```\n\n- **`insertOrAppendPlacementNode``before`**\n  - **`before``parent.insertBefore(current,before)``current``before`**\n  - **`before``parent.appendChild(current)`**\n\n\n","slug":"ReactSourceDiffDebug","published":1,"updated":"2022-04-11T08:20:07.317Z","_id":"cl1n95h0u0000c4o34dqgadcv","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><p>React<code>17.0.2</code></p>\n</li>\n<li><p>DEMO</p>\n</li>\n</ul>\n<figure class=\"highlight tsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">Test</span> = (<span class=\"params\"></span>) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">debugger</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [list, setList] = useState&lt;<span class=\"title class_\">ListItemType</span>[]&gt;([</span><br><span class=\"line\">    &#123; <span class=\"attr\">text</span>: <span class=\"string\">&quot;22 a&quot;</span>, <span class=\"attr\">key</span>: <span class=\"string\">&quot;a&quot;</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">text</span>: <span class=\"string\">&quot;13 b&quot;</span>, <span class=\"attr\">key</span>: <span class=\"string\">&quot;b&quot;</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">text</span>: <span class=\"string\">&quot;21 c&quot;</span>, <span class=\"attr\">key</span>: <span class=\"string\">&quot;c&quot;</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">text</span>: <span class=\"string\">&quot;12 d&quot;</span>, <span class=\"attr\">key</span>: <span class=\"string\">&quot;d&quot;</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">text</span>: <span class=\"string\">&quot;32 e&quot;</span>, <span class=\"attr\">key</span>: <span class=\"string\">&quot;e&quot;</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">text</span>: <span class=\"string\">&quot;44 f&quot;</span>, <span class=\"attr\">key</span>: <span class=\"string\">&quot;f&quot;</span> &#125;,</span><br><span class=\"line\">  ]);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    <span class=\"language-xml\"><span class=\"tag\">&lt;&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">        &#123;list.map((item) =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"language-xml\">          return item ? <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">key</span>=<span class=\"string\">&#123;item.key&#125;</span>&gt;</span>&#123;item.text&#125;<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span> : null;</span></span><br><span class=\"line\"><span class=\"language-xml\">        &#125;)&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">button</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">        <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-xml\">          debugger;</span></span><br><span class=\"line\"><span class=\"language-xml\">          setList((prev) =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"language-xml\">            let newArr: ListItemType[] = [];</span></span><br><span class=\"line\"><span class=\"language-xml\">            // li</span></span><br><span class=\"line\"><span class=\"language-xml\">            prev.splice(Math.floor(Math.random() * 5), 1);</span></span><br><span class=\"line\"><span class=\"language-xml\">            newArr.push(...prev.splice(Math.floor(Math.random() * 4), 1));</span></span><br><span class=\"line\"><span class=\"language-xml\">            newArr = newArr.concat(prev);</span></span><br><span class=\"line\"><span class=\"language-xml\">            return newArr;</span></span><br><span class=\"line\"><span class=\"language-xml\">          &#125;);</span></span><br><span class=\"line\"><span class=\"language-xml\">        &#125;&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">      &gt;</span></span><br><span class=\"line\"><span class=\"language-xml\">        random all</span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;/&gt;</span></span></span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Diff\"><a href=\"#Diff\" class=\"headerlink\" title=\"Diff\"></a>Diff</h2><h3 id=\"Debug\"><a href=\"#Debug\" class=\"headerlink\" title=\"Debug\"></a>Debug</h3><ul>\n<li><strong></strong><code>random all</code><code>state</code><code>performSyncWorkOnRoot</code>Debug</li>\n<li><strong><code>Test</code><code>hook</code><code>state</code>Fiber</strong></li>\n</ul>\n<h3 id=\"reconcileChildren\"><a href=\"#reconcileChildren\" class=\"headerlink\" title=\"reconcileChildren\"></a>reconcileChildren</h3><ul>\n<li><code>beginWork</code><code>ul</code><strong><code>children</code>Diff</strong></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">reconcileChildren</span>(<span class=\"params\">current, workInProgress, nextChildren, renderLanes</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// currentFiberworkInProcess.alternate</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (current === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        workInProgress.<span class=\"property\">child</span> = <span class=\"title function_\">mountChildFibers</span>(workInProgress, <span class=\"literal\">null</span>, nextChildren, renderLanes);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// Fiber</span></span><br><span class=\"line\">        workInProgress.<span class=\"property\">child</span> = <span class=\"title function_\">reconcileChildFibers</span>(workInProgress, current.<span class=\"property\">child</span>, nextChildren, renderLanes);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>reconcileChildFibers</code><code>child</code><code>Fiber</code><strong> React DOMDOM Diff</strong></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">reconcileChildFibers</span>(<span class=\"params\">returnFiber, currentFirstChild, newChild, lanes</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> isObject = <span class=\"keyword\">typeof</span> newChild === <span class=\"string\">&#x27;object&#x27;</span> &amp;&amp; newChild !== <span class=\"literal\">null</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isObject) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">switch</span> (newChild.<span class=\"property\">$$typeof</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// child</span></span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"attr\">REACT_ELEMENT_TYPE</span>:</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"title function_\">placeSingleChild</span>(<span class=\"title function_\">reconcileSingleElement</span>(returnFiber, currentFirstChild, newChild, lanes));</span><br><span class=\"line\">\t\t   <span class=\"comment\">// ......... Fragment</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t<span class=\"comment\">// child</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> newChild === <span class=\"string\">&#x27;string&#x27;</span> || <span class=\"keyword\">typeof</span> newChild === <span class=\"string\">&#x27;number&#x27;</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"title function_\">placeSingleChild</span>(<span class=\"title function_\">reconcileSingleTextNode</span>(returnFiber, currentFirstChild, <span class=\"string\">&#x27;&#x27;</span> + newChild, lanes));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t<span class=\"comment\">// DOM Diff</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"title function_\">isArray$1</span>(newChild)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"title function_\">reconcileChildrenArray</span>(returnFiber, currentFirstChild, newChild, lanes);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t<span class=\"comment\">// ...........</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"title function_\">deleteRemainingChildren</span>(returnFiber, currentFirstChild);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"reconcileChildrenArray\"><a href=\"#reconcileChildrenArray\" class=\"headerlink\" title=\"reconcileChildrenArray\"></a>reconcileChildrenArray</h3><ul>\n<li><strong><code>reconcileChildrenArray</code><code>childs</code>DOM</strong></li>\n<li></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">reconcileChildrenArray</span>(<span class=\"params\">returnFiber, currentFirstChild, newChildren, lanes</span>) &#123;</span><br><span class=\"line\">\t<span class=\"comment\">// childkey</span></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> resultingFirstChild = <span class=\"literal\">null</span>; <span class=\"comment\">// FiberFiber</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> previousNewFiber = <span class=\"literal\">null</span>; <span class=\"comment\">// newFiber</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> oldFiber = currentFirstChild; <span class=\"comment\">// oldFiber</span></span><br><span class=\"line\">    <span class=\"comment\">// ReactDOM</span></span><br><span class=\"line\">    <span class=\"comment\">// oldFiberlastPlacedIndex</span></span><br><span class=\"line\">    <span class=\"comment\">//  placeChild </span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> lastPlacedIndex = <span class=\"number\">0</span>; <span class=\"comment\">// newFiber</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> newIdx = <span class=\"number\">0</span>; <span class=\"comment\">// Child</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> nextOldFiber = <span class=\"literal\">null</span>; <span class=\"comment\">// oldFiber</span></span><br><span class=\"line\">\t<span class=\"comment\">// oldChildnewChild</span></span><br><span class=\"line\">    <span class=\"comment\">// oldChild[0]newChild[0]</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (; oldFiber !== <span class=\"literal\">null</span> &amp;&amp; newIdx &lt; newChildren.<span class=\"property\">length</span>; newIdx++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (oldFiber.<span class=\"property\">index</span> &gt; newIdx) &#123; <span class=\"comment\">// ...</span></span><br><span class=\"line\">            nextOldFiber = oldFiber;</span><br><span class=\"line\">            oldFiber = <span class=\"literal\">null</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t   <span class=\"comment\">// oldChild[0]siblingoldChild[1]Fiber</span></span><br><span class=\"line\">            nextOldFiber = oldFiber.<span class=\"property\">sibling</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">\t    <span class=\"comment\">// Fiber</span></span><br><span class=\"line\">        <span class=\"comment\">// updateSlotkey</span></span><br><span class=\"line\">        <span class=\"comment\">// oldFibernewChild</span></span><br><span class=\"line\">        <span class=\"comment\">// newFibernewFibertextNodenewFiberFragment</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> newFiber = <span class=\"title function_\">updateSlot</span>(returnFiber, oldFiber, newChildren[newIdx], lanes);</span><br><span class=\"line\">\t    <span class=\"comment\">//newFibernull</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (newFiber === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (oldFiber === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">                oldFiber = nextOldFiber;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">\t    <span class=\"comment\">// Fiber</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (shouldTrackSideEffects) &#123; <span class=\"comment\">// shouldTrackSideEffetcstrue</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (oldFiber &amp;&amp; newFiber.<span class=\"property\">alternate</span> === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">                <span class=\"title function_\">deleteChild</span>(returnFiber, oldFiber);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">\t    <span class=\"comment\">//lastPlacedIndex</span></span><br><span class=\"line\">        lastPlacedIndex = <span class=\"title function_\">placeChild</span>(newFiber, lastPlacedIndex, newIdx);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// newFiberFibernewFibersiblingnewFiber</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (previousNewFiber === <span class=\"literal\">null</span>) &#123; <span class=\"comment\">// </span></span><br><span class=\"line\">            resultingFirstChild = newFiber;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            previousNewFiber.<span class=\"property\">sibling</span> = newFiber;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">\t   <span class=\"comment\">// </span></span><br><span class=\"line\">        previousNewFiber = newFiber;</span><br><span class=\"line\">        oldFiber = nextOldFiber;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (newIdx === newChildren.<span class=\"property\">length</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">//.... ChildoldFiberDOMDOM commitRoot </span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (oldFiber === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">//.... ChildnewFiberFiberFiber</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// FibersetkeyFiber</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> existingChildren = <span class=\"title function_\">mapRemainingChildren</span>(returnFiber, oldFiber);</span><br><span class=\"line\">\t<span class=\"comment\">// newChildsetkeyFiber</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (; newIdx &lt; newChildren.<span class=\"property\">length</span>; newIdx++) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// updateFromMap mapkeyFiber</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> _newFiber2 = <span class=\"title function_\">updateFromMap</span>(existingChildren, returnFiber, newIdx, newChildren[newIdx], lanes);</span><br><span class=\"line\">\t    <span class=\"comment\">// mapoldFiber</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (_newFiber2 !== <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (shouldTrackSideEffects) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (_newFiber2.<span class=\"property\">alternate</span> !== <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">                    existingChildren.<span class=\"title function_\">delete</span>(_newFiber2.<span class=\"property\">key</span> === <span class=\"literal\">null</span> ? newIdx : _newFiber2.<span class=\"property\">key</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">\t\t   <span class=\"comment\">// lastPlacedIndex</span></span><br><span class=\"line\">            lastPlacedIndex = <span class=\"title function_\">placeChild</span>(_newFiber2, lastPlacedIndex, newIdx);</span><br><span class=\"line\">\t\t  <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (previousNewFiber === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">                resultingFirstChild = _newFiber2;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                previousNewFiber.<span class=\"property\">sibling</span> = _newFiber2;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            previousNewFiber = _newFiber2;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t<span class=\"comment\">// ChildFiber</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (shouldTrackSideEffects) &#123;</span><br><span class=\"line\">        existingChildren.<span class=\"title function_\">forEach</span>(<span class=\"keyword\">function</span> (<span class=\"params\">child</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"title function_\">deleteChild</span>(returnFiber, child);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> resultingFirstChild;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong></strong><ul>\n<li><strong></strong></li>\n<li><strong><code>Set</code></strong></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"placeChild\"><a href=\"#placeChild\" class=\"headerlink\" title=\"placeChild\"></a>placeChild</h3><ul>\n<li><strong><code>newFiber</code><code>oldFiber</code><code>index</code><code>newFiber</code>DOM</strong></li>\n<li></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">placeChild</span>(<span class=\"params\">newFiber, lastPlacedIndex, newIndex</span>) &#123;</span><br><span class=\"line\">    newFiber.<span class=\"property\">index</span> = newIndex; <span class=\"comment\">// newFiberindex</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!shouldTrackSideEffects) &#123; <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> lastPlacedIndex;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> current = newFiber.<span class=\"property\">alternate</span>; <span class=\"comment\">// oldFiber</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (current !== <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> oldIndex = current.<span class=\"property\">index</span>; <span class=\"comment\">// oldFiber</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (oldIndex &lt; lastPlacedIndex) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// DOM</span></span><br><span class=\"line\">            newFiber.<span class=\"property\">flags</span> = <span class=\"title class_\">Placement</span>; <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> lastPlacedIndex;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// lastPlacedIndex</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> oldIndex; <span class=\"comment\">// DOM(ReactDOMDiff)DOMFiberindex</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        newFiber.<span class=\"property\">flags</span> = <span class=\"title class_\">Placement</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> lastPlacedIndex;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"commitMutationEffects\"><a href=\"#commitMutationEffects\" class=\"headerlink\" title=\"commitMutationEffects\"></a>commitMutationEffects</h3><ul>\n<li><strong><code>commitRoot</code>DOM<code>Diff</code>FiberDOM</strong></li>\n<li><strong><code>nextEffect</code>Fiber</strong></li>\n<li></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">commitMutationEffects</span>(<span class=\"params\">root, renderPriorityLevel</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">while</span> (nextEffect !== <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">setCurrentFiber</span>(nextEffect); <span class=\"comment\">// nextEffect Fiber</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> flags = nextEffect.<span class=\"property\">flags</span>; <span class=\"comment\">// flags FiberplaceChild</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> primaryFlags = flags &amp; (<span class=\"title class_\">Placement</span> | <span class=\"title class_\">Update</span> | <span class=\"title class_\">Deletion</span> | <span class=\"title class_\">Hydrating</span>); <span class=\"comment\">// flags</span></span><br><span class=\"line\">    <span class=\"keyword\">switch</span> (primaryFlags) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"title class_\">Placement</span>:</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          <span class=\"title function_\">commitPlacement</span>(nextEffect); <span class=\"comment\">// </span></span><br><span class=\"line\">          nextEffect.<span class=\"property\">flags</span> &amp;= ~<span class=\"title class_\">Placement</span>;</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"title class_\">PlacementAndUpdate</span>:</span><br><span class=\"line\">        <span class=\"comment\">// ...</span></span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"title class_\">Hydrating</span>:</span><br><span class=\"line\">       \t<span class=\"comment\">// ...</span></span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"title class_\">HydratingAndUpdate</span>:</span><br><span class=\"line\">        <span class=\"comment\">// ...</span></span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"title class_\">Update</span>:</span><br><span class=\"line\">        <span class=\"comment\">// ...</span></span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"title class_\">Deletion</span>:</span><br><span class=\"line\">        <span class=\"comment\">// ...</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"title function_\">resetCurrentFiber</span>();</span><br><span class=\"line\">    nextEffect = nextEffect.<span class=\"property\">nextEffect</span>; <span class=\"comment\">// Fiber</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"commitPlacement\"><a href=\"#commitPlacement\" class=\"headerlink\" title=\"commitPlacement\"></a>commitPlacement</h3><ul>\n<li><strong><code>commitPlacement</code>DOMDOM</strong></li>\n<li></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">commitPlacement</span>(<span class=\"params\">finishedWork</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> parentFiber = <span class=\"title function_\">getHostParentFiber</span>(finishedWork); <span class=\"comment\">// DOMDEMO ul </span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> parent;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> isContainer;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> parentStateNode = parentFiber.<span class=\"property\">stateNode</span>; <span class=\"comment\">// DOM</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (parentFiber.<span class=\"property\">tag</span>) &#123; <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"title class_\">HostComponent</span>: <span class=\"comment\">// DEMO</span></span><br><span class=\"line\">      parent = parentStateNode;</span><br><span class=\"line\">      isContainer = <span class=\"literal\">false</span>;</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"title class_\">HostRoot</span>:</span><br><span class=\"line\">      <span class=\"comment\">//...</span></span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"title class_\">HostPortal</span>:</span><br><span class=\"line\">      <span class=\"comment\">//...</span></span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"title class_\">FundamentalComponent</span>:</span><br><span class=\"line\">      <span class=\"comment\">//...</span></span><br><span class=\"line\">    <span class=\"attr\">default</span>:</span><br><span class=\"line\">      <span class=\"comment\">// ... </span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">var</span> before = <span class=\"title function_\">getHostSibling</span>(finishedWork); <span class=\"comment\">// FibersiblingflagsPlacement()</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (isContainer) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">insertOrAppendPlacementNodeIntoContainer</span>(finishedWork, before, parent);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// DEMO</span></span><br><span class=\"line\">    <span class=\"title function_\">insertOrAppendPlacementNode</span>(finishedWork, before, parent);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong><code>insertOrAppendPlacementNode</code><code>before</code></strong><ul>\n<li><strong><code>before</code><code>parent.insertBefore(current,before)</code><code>current</code><code>before</code></strong></li>\n<li><strong><code>before</code><code>parent.appendChild(current)</code></strong></li>\n</ul>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><p>React<code>17.0.2</code></p>\n</li>\n<li><p>DEMO</p>\n</li>\n</ul>\n<figure class=\"highlight tsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">Test</span> = (<span class=\"params\"></span>) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">debugger</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [list, setList] = useState&lt;<span class=\"title class_\">ListItemType</span>[]&gt;([</span><br><span class=\"line\">    &#123; <span class=\"attr\">text</span>: <span class=\"string\">&quot;22 a&quot;</span>, <span class=\"attr\">key</span>: <span class=\"string\">&quot;a&quot;</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">text</span>: <span class=\"string\">&quot;13 b&quot;</span>, <span class=\"attr\">key</span>: <span class=\"string\">&quot;b&quot;</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">text</span>: <span class=\"string\">&quot;21 c&quot;</span>, <span class=\"attr\">key</span>: <span class=\"string\">&quot;c&quot;</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">text</span>: <span class=\"string\">&quot;12 d&quot;</span>, <span class=\"attr\">key</span>: <span class=\"string\">&quot;d&quot;</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">text</span>: <span class=\"string\">&quot;32 e&quot;</span>, <span class=\"attr\">key</span>: <span class=\"string\">&quot;e&quot;</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">text</span>: <span class=\"string\">&quot;44 f&quot;</span>, <span class=\"attr\">key</span>: <span class=\"string\">&quot;f&quot;</span> &#125;,</span><br><span class=\"line\">  ]);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    <span class=\"language-xml\"><span class=\"tag\">&lt;&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">        &#123;list.map((item) =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"language-xml\">          return item ? <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">key</span>=<span class=\"string\">&#123;item.key&#125;</span>&gt;</span>&#123;item.text&#125;<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span> : null;</span></span><br><span class=\"line\"><span class=\"language-xml\">        &#125;)&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">button</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">        <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-xml\">          debugger;</span></span><br><span class=\"line\"><span class=\"language-xml\">          setList((prev) =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"language-xml\">            let newArr: ListItemType[] = [];</span></span><br><span class=\"line\"><span class=\"language-xml\">            // li</span></span><br><span class=\"line\"><span class=\"language-xml\">            prev.splice(Math.floor(Math.random() * 5), 1);</span></span><br><span class=\"line\"><span class=\"language-xml\">            newArr.push(...prev.splice(Math.floor(Math.random() * 4), 1));</span></span><br><span class=\"line\"><span class=\"language-xml\">            newArr = newArr.concat(prev);</span></span><br><span class=\"line\"><span class=\"language-xml\">            return newArr;</span></span><br><span class=\"line\"><span class=\"language-xml\">          &#125;);</span></span><br><span class=\"line\"><span class=\"language-xml\">        &#125;&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">      &gt;</span></span><br><span class=\"line\"><span class=\"language-xml\">        random all</span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;/&gt;</span></span></span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Diff\"><a href=\"#Diff\" class=\"headerlink\" title=\"Diff\"></a>Diff</h2><h3 id=\"Debug\"><a href=\"#Debug\" class=\"headerlink\" title=\"Debug\"></a>Debug</h3><ul>\n<li><strong></strong><code>random all</code><code>state</code><code>performSyncWorkOnRoot</code>Debug</li>\n<li><strong><code>Test</code><code>hook</code><code>state</code>Fiber</strong></li>\n</ul>\n<h3 id=\"reconcileChildren\"><a href=\"#reconcileChildren\" class=\"headerlink\" title=\"reconcileChildren\"></a>reconcileChildren</h3><ul>\n<li><code>beginWork</code><code>ul</code><strong><code>children</code>Diff</strong></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">reconcileChildren</span>(<span class=\"params\">current, workInProgress, nextChildren, renderLanes</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// currentFiberworkInProcess.alternate</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (current === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        workInProgress.<span class=\"property\">child</span> = <span class=\"title function_\">mountChildFibers</span>(workInProgress, <span class=\"literal\">null</span>, nextChildren, renderLanes);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// Fiber</span></span><br><span class=\"line\">        workInProgress.<span class=\"property\">child</span> = <span class=\"title function_\">reconcileChildFibers</span>(workInProgress, current.<span class=\"property\">child</span>, nextChildren, renderLanes);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>reconcileChildFibers</code><code>child</code><code>Fiber</code><strong> React DOMDOM Diff</strong></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">reconcileChildFibers</span>(<span class=\"params\">returnFiber, currentFirstChild, newChild, lanes</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> isObject = <span class=\"keyword\">typeof</span> newChild === <span class=\"string\">&#x27;object&#x27;</span> &amp;&amp; newChild !== <span class=\"literal\">null</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isObject) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">switch</span> (newChild.<span class=\"property\">$$typeof</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// child</span></span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"attr\">REACT_ELEMENT_TYPE</span>:</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"title function_\">placeSingleChild</span>(<span class=\"title function_\">reconcileSingleElement</span>(returnFiber, currentFirstChild, newChild, lanes));</span><br><span class=\"line\">\t\t   <span class=\"comment\">// ......... Fragment</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t<span class=\"comment\">// child</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> newChild === <span class=\"string\">&#x27;string&#x27;</span> || <span class=\"keyword\">typeof</span> newChild === <span class=\"string\">&#x27;number&#x27;</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"title function_\">placeSingleChild</span>(<span class=\"title function_\">reconcileSingleTextNode</span>(returnFiber, currentFirstChild, <span class=\"string\">&#x27;&#x27;</span> + newChild, lanes));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t<span class=\"comment\">// DOM Diff</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"title function_\">isArray$1</span>(newChild)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"title function_\">reconcileChildrenArray</span>(returnFiber, currentFirstChild, newChild, lanes);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t<span class=\"comment\">// ...........</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"title function_\">deleteRemainingChildren</span>(returnFiber, currentFirstChild);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"reconcileChildrenArray\"><a href=\"#reconcileChildrenArray\" class=\"headerlink\" title=\"reconcileChildrenArray\"></a>reconcileChildrenArray</h3><ul>\n<li><strong><code>reconcileChildrenArray</code><code>childs</code>DOM</strong></li>\n<li></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">reconcileChildrenArray</span>(<span class=\"params\">returnFiber, currentFirstChild, newChildren, lanes</span>) &#123;</span><br><span class=\"line\">\t<span class=\"comment\">// childkey</span></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> resultingFirstChild = <span class=\"literal\">null</span>; <span class=\"comment\">// FiberFiber</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> previousNewFiber = <span class=\"literal\">null</span>; <span class=\"comment\">// newFiber</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> oldFiber = currentFirstChild; <span class=\"comment\">// oldFiber</span></span><br><span class=\"line\">    <span class=\"comment\">// ReactDOM</span></span><br><span class=\"line\">    <span class=\"comment\">// oldFiberlastPlacedIndex</span></span><br><span class=\"line\">    <span class=\"comment\">//  placeChild </span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> lastPlacedIndex = <span class=\"number\">0</span>; <span class=\"comment\">// newFiber</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> newIdx = <span class=\"number\">0</span>; <span class=\"comment\">// Child</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> nextOldFiber = <span class=\"literal\">null</span>; <span class=\"comment\">// oldFiber</span></span><br><span class=\"line\">\t<span class=\"comment\">// oldChildnewChild</span></span><br><span class=\"line\">    <span class=\"comment\">// oldChild[0]newChild[0]</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (; oldFiber !== <span class=\"literal\">null</span> &amp;&amp; newIdx &lt; newChildren.<span class=\"property\">length</span>; newIdx++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (oldFiber.<span class=\"property\">index</span> &gt; newIdx) &#123; <span class=\"comment\">// ...</span></span><br><span class=\"line\">            nextOldFiber = oldFiber;</span><br><span class=\"line\">            oldFiber = <span class=\"literal\">null</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t   <span class=\"comment\">// oldChild[0]siblingoldChild[1]Fiber</span></span><br><span class=\"line\">            nextOldFiber = oldFiber.<span class=\"property\">sibling</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">\t    <span class=\"comment\">// Fiber</span></span><br><span class=\"line\">        <span class=\"comment\">// updateSlotkey</span></span><br><span class=\"line\">        <span class=\"comment\">// oldFibernewChild</span></span><br><span class=\"line\">        <span class=\"comment\">// newFibernewFibertextNodenewFiberFragment</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> newFiber = <span class=\"title function_\">updateSlot</span>(returnFiber, oldFiber, newChildren[newIdx], lanes);</span><br><span class=\"line\">\t    <span class=\"comment\">//newFibernull</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (newFiber === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (oldFiber === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">                oldFiber = nextOldFiber;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">\t    <span class=\"comment\">// Fiber</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (shouldTrackSideEffects) &#123; <span class=\"comment\">// shouldTrackSideEffetcstrue</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (oldFiber &amp;&amp; newFiber.<span class=\"property\">alternate</span> === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">                <span class=\"title function_\">deleteChild</span>(returnFiber, oldFiber);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">\t    <span class=\"comment\">//lastPlacedIndex</span></span><br><span class=\"line\">        lastPlacedIndex = <span class=\"title function_\">placeChild</span>(newFiber, lastPlacedIndex, newIdx);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// newFiberFibernewFibersiblingnewFiber</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (previousNewFiber === <span class=\"literal\">null</span>) &#123; <span class=\"comment\">// </span></span><br><span class=\"line\">            resultingFirstChild = newFiber;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            previousNewFiber.<span class=\"property\">sibling</span> = newFiber;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">\t   <span class=\"comment\">// </span></span><br><span class=\"line\">        previousNewFiber = newFiber;</span><br><span class=\"line\">        oldFiber = nextOldFiber;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (newIdx === newChildren.<span class=\"property\">length</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">//.... ChildoldFiberDOMDOM commitRoot </span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (oldFiber === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">//.... ChildnewFiberFiberFiber</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// FibersetkeyFiber</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> existingChildren = <span class=\"title function_\">mapRemainingChildren</span>(returnFiber, oldFiber);</span><br><span class=\"line\">\t<span class=\"comment\">// newChildsetkeyFiber</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (; newIdx &lt; newChildren.<span class=\"property\">length</span>; newIdx++) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// updateFromMap mapkeyFiber</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> _newFiber2 = <span class=\"title function_\">updateFromMap</span>(existingChildren, returnFiber, newIdx, newChildren[newIdx], lanes);</span><br><span class=\"line\">\t    <span class=\"comment\">// mapoldFiber</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (_newFiber2 !== <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (shouldTrackSideEffects) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (_newFiber2.<span class=\"property\">alternate</span> !== <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">                    existingChildren.<span class=\"title function_\">delete</span>(_newFiber2.<span class=\"property\">key</span> === <span class=\"literal\">null</span> ? newIdx : _newFiber2.<span class=\"property\">key</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">\t\t   <span class=\"comment\">// lastPlacedIndex</span></span><br><span class=\"line\">            lastPlacedIndex = <span class=\"title function_\">placeChild</span>(_newFiber2, lastPlacedIndex, newIdx);</span><br><span class=\"line\">\t\t  <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (previousNewFiber === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">                resultingFirstChild = _newFiber2;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                previousNewFiber.<span class=\"property\">sibling</span> = _newFiber2;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            previousNewFiber = _newFiber2;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t<span class=\"comment\">// ChildFiber</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (shouldTrackSideEffects) &#123;</span><br><span class=\"line\">        existingChildren.<span class=\"title function_\">forEach</span>(<span class=\"keyword\">function</span> (<span class=\"params\">child</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"title function_\">deleteChild</span>(returnFiber, child);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> resultingFirstChild;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong></strong><ul>\n<li><strong></strong></li>\n<li><strong><code>Set</code></strong></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"placeChild\"><a href=\"#placeChild\" class=\"headerlink\" title=\"placeChild\"></a>placeChild</h3><ul>\n<li><strong><code>newFiber</code><code>oldFiber</code><code>index</code><code>newFiber</code>DOM</strong></li>\n<li></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">placeChild</span>(<span class=\"params\">newFiber, lastPlacedIndex, newIndex</span>) &#123;</span><br><span class=\"line\">    newFiber.<span class=\"property\">index</span> = newIndex; <span class=\"comment\">// newFiberindex</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!shouldTrackSideEffects) &#123; <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> lastPlacedIndex;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> current = newFiber.<span class=\"property\">alternate</span>; <span class=\"comment\">// oldFiber</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (current !== <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> oldIndex = current.<span class=\"property\">index</span>; <span class=\"comment\">// oldFiber</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (oldIndex &lt; lastPlacedIndex) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// DOM</span></span><br><span class=\"line\">            newFiber.<span class=\"property\">flags</span> = <span class=\"title class_\">Placement</span>; <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> lastPlacedIndex;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// lastPlacedIndex</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> oldIndex; <span class=\"comment\">// DOM(ReactDOMDiff)DOMFiberindex</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        newFiber.<span class=\"property\">flags</span> = <span class=\"title class_\">Placement</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> lastPlacedIndex;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"commitMutationEffects\"><a href=\"#commitMutationEffects\" class=\"headerlink\" title=\"commitMutationEffects\"></a>commitMutationEffects</h3><ul>\n<li><strong><code>commitRoot</code>DOM<code>Diff</code>FiberDOM</strong></li>\n<li><strong><code>nextEffect</code>Fiber</strong></li>\n<li></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">commitMutationEffects</span>(<span class=\"params\">root, renderPriorityLevel</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">while</span> (nextEffect !== <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">setCurrentFiber</span>(nextEffect); <span class=\"comment\">// nextEffect Fiber</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> flags = nextEffect.<span class=\"property\">flags</span>; <span class=\"comment\">// flags FiberplaceChild</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> primaryFlags = flags &amp; (<span class=\"title class_\">Placement</span> | <span class=\"title class_\">Update</span> | <span class=\"title class_\">Deletion</span> | <span class=\"title class_\">Hydrating</span>); <span class=\"comment\">// flags</span></span><br><span class=\"line\">    <span class=\"keyword\">switch</span> (primaryFlags) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"title class_\">Placement</span>:</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          <span class=\"title function_\">commitPlacement</span>(nextEffect); <span class=\"comment\">// </span></span><br><span class=\"line\">          nextEffect.<span class=\"property\">flags</span> &amp;= ~<span class=\"title class_\">Placement</span>;</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"title class_\">PlacementAndUpdate</span>:</span><br><span class=\"line\">        <span class=\"comment\">// ...</span></span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"title class_\">Hydrating</span>:</span><br><span class=\"line\">       \t<span class=\"comment\">// ...</span></span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"title class_\">HydratingAndUpdate</span>:</span><br><span class=\"line\">        <span class=\"comment\">// ...</span></span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"title class_\">Update</span>:</span><br><span class=\"line\">        <span class=\"comment\">// ...</span></span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"title class_\">Deletion</span>:</span><br><span class=\"line\">        <span class=\"comment\">// ...</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"title function_\">resetCurrentFiber</span>();</span><br><span class=\"line\">    nextEffect = nextEffect.<span class=\"property\">nextEffect</span>; <span class=\"comment\">// Fiber</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"commitPlacement\"><a href=\"#commitPlacement\" class=\"headerlink\" title=\"commitPlacement\"></a>commitPlacement</h3><ul>\n<li><strong><code>commitPlacement</code>DOMDOM</strong></li>\n<li></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">commitPlacement</span>(<span class=\"params\">finishedWork</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> parentFiber = <span class=\"title function_\">getHostParentFiber</span>(finishedWork); <span class=\"comment\">// DOMDEMO ul </span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> parent;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> isContainer;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> parentStateNode = parentFiber.<span class=\"property\">stateNode</span>; <span class=\"comment\">// DOM</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (parentFiber.<span class=\"property\">tag</span>) &#123; <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"title class_\">HostComponent</span>: <span class=\"comment\">// DEMO</span></span><br><span class=\"line\">      parent = parentStateNode;</span><br><span class=\"line\">      isContainer = <span class=\"literal\">false</span>;</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"title class_\">HostRoot</span>:</span><br><span class=\"line\">      <span class=\"comment\">//...</span></span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"title class_\">HostPortal</span>:</span><br><span class=\"line\">      <span class=\"comment\">//...</span></span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"title class_\">FundamentalComponent</span>:</span><br><span class=\"line\">      <span class=\"comment\">//...</span></span><br><span class=\"line\">    <span class=\"attr\">default</span>:</span><br><span class=\"line\">      <span class=\"comment\">// ... </span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">var</span> before = <span class=\"title function_\">getHostSibling</span>(finishedWork); <span class=\"comment\">// FibersiblingflagsPlacement()</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (isContainer) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">insertOrAppendPlacementNodeIntoContainer</span>(finishedWork, before, parent);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// DEMO</span></span><br><span class=\"line\">    <span class=\"title function_\">insertOrAppendPlacementNode</span>(finishedWork, before, parent);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong><code>insertOrAppendPlacementNode</code><code>before</code></strong><ul>\n<li><strong><code>before</code><code>parent.insertBefore(current,before)</code><code>current</code><code>before</code></strong></li>\n<li><strong><code>before</code><code>parent.appendChild(current)</code></strong></li>\n</ul>\n</li>\n</ul>\n"}],"PostAsset":[{"_id":"source/_posts/vueReactive/1.png","slug":"1.png","post":"ckvhtdmbc0000rgo3fcfm10za","modified":0,"renderable":0},{"_id":"source/_posts/vueReactive/2.gif","slug":"2.gif","post":"ckvhtdmbc0000rgo3fcfm10za","modified":0,"renderable":0},{"_id":"source/_posts/vueReactive/3.gif","slug":"3.gif","post":"ckvhtdmbc0000rgo3fcfm10za","modified":0,"renderable":0},{"_id":"source/_posts/vueReactive/4.gif","slug":"4.gif","post":"ckvhtdmbc0000rgo3fcfm10za","modified":0,"renderable":0},{"_id":"source/_posts/vueReactive/5.gif","slug":"5.gif","post":"ckvhtdmbc0000rgo3fcfm10za","modified":0,"renderable":0},{"_id":"source/_posts/ReactSourceDebug/1.png","slug":"1.png","post":"cl10f1yi400009no3hcj3clyx","modified":0,"renderable":0},{"_id":"source/_posts/ReactSourceDebug/2.png","slug":"2.png","post":"cl10f1yi400009no3hcj3clyx","modified":0,"renderable":0},{"_id":"source/_posts/ReactSourceDebug/3.png","slug":"3.png","post":"cl10f1yi400009no3hcj3clyx","modified":0,"renderable":0},{"_id":"source/_posts/ReactSourceDebug/4.png","slug":"4.png","post":"cl10f1yi400009no3hcj3clyx","modified":0,"renderable":0},{"_id":"source/_posts/ReactSourceDebug/5.png","slug":"5.png","post":"cl10f1yi400009no3hcj3clyx","modified":0,"renderable":0},{"_id":"source/_posts/ReactSourceDebug/6.png","slug":"6.png","post":"cl10f1yi400009no3hcj3clyx","modified":0,"renderable":0},{"_id":"source/_posts/wirteMyAsync/1.gif","slug":"1.gif","post":"ckvhtdmbk0004rgo3djy6h8od","modified":0,"renderable":0},{"_id":"source/_posts/wirteMyAsync/2.gif","slug":"2.gif","post":"ckvhtdmbk0004rgo3djy6h8od","modified":0,"renderable":0},{"_id":"source/_posts/ReactSourceHookDebug/11.png","slug":"11.png","post":"cl196f5ym0000b1o36xidegzq","modified":0,"renderable":0},{"_id":"source/_posts/ReactSourceHookDebug/22.png","slug":"22.png","post":"cl196f5ym0000b1o36xidegzq","modified":0,"renderable":0},{"_id":"source/_posts/ReactSourceHookDebug/33.png","slug":"33.png","post":"cl196f5ym0000b1o36xidegzq","modified":0,"renderable":0},{"_id":"source/_posts/ReactSourceHookDebug/44.png","slug":"44.png","post":"cl196f5ym0000b1o36xidegzq","modified":0,"renderable":0}],"PostCategory":[{"post_id":"ckvhtdmbl0005rgo3fymy7ldv","category_id":"ckvhtdmbi0002rgo34rxz688x","_id":"ckvhtdmbo0009rgo3aw8e6vbg"},{"post_id":"ckvhtdmbg0001rgo38pjz7t9a","category_id":"ckvhtdmbi0002rgo34rxz688x","_id":"ckvhtdmbp000ergo334889951"},{"post_id":"ckvhtdmbk0004rgo3djy6h8od","category_id":"ckvhtdmbi0002rgo34rxz688x","_id":"ckvhtdmbq000grgo3fug57eam"},{"post_id":"ckzxsx2f800006lo3hr4qamhe","category_id":"ckzxsx2fc00016lo3dimph9ov","_id":"ckzxsx2ff00046lo33wl75ilx"},{"post_id":"cl10f1yi400009no3hcj3clyx","category_id":"cl10f1yi700019no33ttn633o","_id":"cl10f1yib00049no38rcq3gnd"},{"post_id":"cl196f5ym0000b1o36xidegzq","category_id":"cl10f1yi700019no33ttn633o","_id":"cl196f5yq0003b1o39bqn7yz7"},{"post_id":"cl1n95h0u0000c4o34dqgadcv","category_id":"cl10f1yi700019no33ttn633o","_id":"cl1n95h100002c4o3b0cz3tok"},{"post_id":"ckw0gwfcc0000u3o3dgw5f1d4","category_id":"cl1ugm1au0000tio36gc56id3","_id":"cl1ugm1b20003tio3g73jgzoh"},{"post_id":"ckvhtdmbc0000rgo3fcfm10za","category_id":"cl1ugm1au0000tio36gc56id3","_id":"cl1ugm1b30004tio3go3o63z1"}],"PostTag":[{"post_id":"ckvhtdmbc0000rgo3fcfm10za","tag_id":"ckvhtdmbj0003rgo3hjjl07c6","_id":"ckvhtdmbo0008rgo30jog610l"},{"post_id":"ckvhtdmbg0001rgo38pjz7t9a","tag_id":"ckvhtdmbn0007rgo31eeu0vx2","_id":"ckvhtdmbp000drgo307e10bqy"},{"post_id":"ckvhtdmbk0004rgo3djy6h8od","tag_id":"ckvhtdmbp000brgo35o3q31qw","_id":"ckvhtdmbq000irgo37wci12e1"},{"post_id":"ckvhtdmbk0004rgo3djy6h8od","tag_id":"ckvhtdmbq000frgo39qirardb","_id":"ckvhtdmbq000jrgo3h8nw9l30"},{"post_id":"ckvhtdmbl0005rgo3fymy7ldv","tag_id":"ckvhtdmbp000brgo35o3q31qw","_id":"ckvhtdmbr000lrgo34e4wde8n"},{"post_id":"ckvhtdmbl0005rgo3fymy7ldv","tag_id":"ckvhtdmbq000krgo3b8v010cg","_id":"ckvhtdmbr000mrgo3dn0c68ce"},{"post_id":"ckw0gwfcc0000u3o3dgw5f1d4","tag_id":"ckvhtdmbj0003rgo3hjjl07c6","_id":"ckw0gwfch0002u3o365f6guz9"},{"post_id":"ckzxsx2f800006lo3hr4qamhe","tag_id":"ckzxsx2fd00026lo30bm0hv2e","_id":"ckzxsx2ff00056lo30wcsbkc7"},{"post_id":"ckzxsx2f800006lo3hr4qamhe","tag_id":"ckzxsx2fe00036lo3hfzd03hr","_id":"ckzxsx2ff00066lo362832z8n"},{"post_id":"cl10f1yi400009no3hcj3clyx","tag_id":"cl10f1yia00029no38jf0gpfl","_id":"cl10f1yic00069no33xeh5u1f"},{"post_id":"cl10f1yi400009no3hcj3clyx","tag_id":"cl10f1yia00039no34ucg9i81","_id":"cl10f1yic00079no337592xbr"},{"post_id":"cl10f1yi400009no3hcj3clyx","tag_id":"cl10f1yib00059no3d4550re5","_id":"cl10f1yic00089no32ylx3dfq"},{"post_id":"cl196f5ym0000b1o36xidegzq","tag_id":"cl10f1yia00029no38jf0gpfl","_id":"cl196f5yo0001b1o3g31nd0d4"},{"post_id":"cl196f5ym0000b1o36xidegzq","tag_id":"cl10f1yib00059no3d4550re5","_id":"cl196f5yp0002b1o3c61d69hj"},{"post_id":"cl196f5ym0000b1o36xidegzq","tag_id":"ckvhtdmbp000brgo35o3q31qw","_id":"cl196f5yq0004b1o3ated7nlk"},{"post_id":"cl1n95h0u0000c4o34dqgadcv","tag_id":"cl10f1yia00029no38jf0gpfl","_id":"cl1n95h110003c4o3gjk50lqh"},{"post_id":"cl1n95h0u0000c4o34dqgadcv","tag_id":"cl1n95h0x0001c4o34s5d7d1v","_id":"cl1n95h110004c4o35f6gcsf6"},{"post_id":"ckw0gwfcc0000u3o3dgw5f1d4","tag_id":"cl10f1yib00059no3d4550re5","_id":"cl1ugm1ax0001tio31bqygcvc"}],"Tag":[{"name":"Vue","_id":"ckvhtdmbj0003rgo3hjjl07c6"},{"name":"webpack","_id":"ckvhtdmbn0007rgo31eeu0vx2"},{"name":"javascript","_id":"ckvhtdmbp000brgo35o3q31qw"},{"name":"async","_id":"ckvhtdmbq000frgo39qirardb"},{"name":"promise","_id":"ckvhtdmbq000krgo3b8v010cg"},{"name":"Rust","_id":"ckzxsx2fd00026lo30bm0hv2e"},{"name":"basic","_id":"ckzxsx2fe00036lo3hfzd03hr"},{"name":"React","_id":"cl10f1yia00029no38jf0gpfl"},{"name":"Javascript","_id":"cl10f1yia00039no34ucg9i81"},{"name":"source","_id":"cl10f1yib00059no3d4550re5"},{"name":"Diff","_id":"cl1n95h0x0001c4o34s5d7d1v"}]}}